<section class="summary-cards-container">
  <info-card
    icon="numbers"
    [value]="portfolioHoldings?.portfolioPositions"
    subtitle="Total Positions"
  />
  <info-card
    icon="payments"
    [value]="portfolioHoldings?.portfolioTotalInvestment"
    valueType="currency"
    subtitle="Total Investment"
  />
  <info-card
    icon="payments"
    [value]="portfolioHoldings?.portfolioMarketValue"
    valueType="currency"
    subtitle="Market Value"
  />
  <info-card
    icon="payments"
    [value]="portfolioHoldings?.portfolioUnrealizedGain"
    subtitle="Unrealized Gain"
    valueType="currency"
    [color]="portfolioHoldings?.portfolioUnrealizedGain > 0 ? 'teal' : 'chocolate'"
    [accentColor]="portfolioHoldings?.portfolioUnrealizedGain > 0 ? 'teal' : 'chocolate'"
  />
  <info-card
    icon="percentage"
    [value]="portfolioHoldings?.portfolioUnrealizedGainPercent"
    valueType="percentage"
    subtitle="Unrealized Gain %"
    [color]="portfolioHoldings?.portfolioUnrealizedGainPercent > 0 ? 'teal' : 'chocolate'"
    [accentColor]="portfolioHoldings?.portfolioUnrealizedGain > 0 ? 'teal' : 'chocolate'"
  />
  <info-card
    icon="payments"
    [value]="portfolioHoldings?.portfolioDividendIncome"
    valueType="currency"
    subtitle="Projected Annual Income"
  />
  <info-card
    icon="percentage"
    [value]="portfolioHoldings?.portfolioYield"
    valueType="percentage"
    subtitle="Portfolio Yield"
  />
  <info-card
    icon="percentage"
    [value]="portfolioHoldings?.portfolioYieldOnCost"
    valueType="percentage"
    subtitle="Portfolio YOC"
    color="teal"
    accentColor="teal"
  />
</section>

<mat-divider />

<section class="add-border">
  <div class="title">
    <span>Portfolio Allocation</span>
  </div>
  <button 
    *ngIf="showResetButton" 
    mat-mini-fab 
    color="warn" 
    class="reset-button" 
    (click)="filterBySector({name: 'all'})"
  >
    <mat-icon>restart_alt</mat-icon>
  </button> 

  <div class="add-flex">
    <div class="chart-container">
      <ngx-charts-pie-grid
        [scheme]="'picnic'"
        [animations]="true"
        [results]="sectorsData"
        [label]="'Dollars Invested'"
        (select)="filterBySector($event)"
      />
    </div>
    <div class="chart-container">
      <ngx-charts-bar-vertical
        [scheme]="portfolioPercentBarChartColorScheme"
        [results]="portfolioPercentBarChartData"
        [animations]="true"
        [xAxis]="true"
        [yAxis]="true"
        [showXAxisLabel]="true"
        [showYAxisLabel]="true"
        [yAxisLabel]="'Portfolio %'"
      />
    </div>
  </div>
</section>

<section class="add-border">
  <div class="goal-container">
    <h1>
      <span>Portfolio Value Goal:</span>
      <span class="goal-title">{{ portfolioValueGoalPercentage | percent : ".2" }}</span>
    </h1>
  
    <mat-slider
      [min]="0"
      [max]="portfolioValueTarget"
      [step]="1000"
      [showTickMarks]="true"
      [color]="'accent'"
    >
      <input
        matSliderThumb
        [value]="portfolioHoldings?.portfolioMarketValue"
        [matTooltip]="getTooltip('investment')"
        matTooltipPosition="above"
      />
    </mat-slider>
    <div class="goal-labels">
      <h1>{{ "0" | currency }}</h1>
      <h1>{{ portfolioValueTarget | currency }}</h1>
    </div>
  </div>

  <mat-expansion-panel [expanded]="false">
    <mat-expansion-panel-header>
      <mat-panel-title>
        <mat-icon class="">payment</mat-icon>
        <span>Portfolio Value</span>
      </mat-panel-title>
    </mat-expansion-panel-header>
    <div class="add-flex">
      <div class="chart-container">
        <ngx-charts-bar-vertical-stacked
          [scheme]="'picnic'"
          [results]="marketValueBarChartData"
          [animations]="true"
          [xAxis]="true"
          [yAxis]="true"
          [showXAxisLabel]="true"
          [showYAxisLabel]="true"
          [yAxisLabel]="'Market Value $'"
        />
      </div>
      <div class="chart-container">
        <ngx-charts-bar-vertical
          [scheme]="'picnic'"
          [results]="unrealizedGainBarChartData"
          [animations]="true"
          [xAxis]="true"
          [yAxis]="true"
          [showXAxisLabel]="true"
          [showYAxisLabel]="true"
          [yAxisLabel]="'Unrealized Gain %'"
        />
      </div>
    </div>
  </mat-expansion-panel>
</section>

<section class="add-border">
  <div class="goal-container">
    <h1>
      <span>Passive Income Goal:</span>
      <span class="goal-title">{{ passiveIncomeGoalPercentage | percent : ".2" }}</span>
    </h1>
  
    <mat-slider
      [min]="0"
      [max]="passiveIncomeTarget"
      [step]="120"
      [showTickMarks]="true"
      [color]="'accent'"
    >
      <input
        matSliderThumb
        [value]="portfolioHoldings?.portfolioDividendIncome"
        [matTooltip]="getTooltip('passive')"
        matTooltipPosition="above"
      />
    </mat-slider>
    <div class="goal-labels">
      <h1>{{ "0" | currency }}</h1>
      <h1>{{ passiveIncomeTarget | currency }}</h1>
    </div>
  </div>

  <mat-expansion-panel [expanded]="false">
    <mat-expansion-panel-header>
      <mat-panel-title>
        <mat-icon class="">local_fire_department</mat-icon>
        <span>Passive Income</span>
      </mat-panel-title>
    </mat-expansion-panel-header>
    <div class="add-flex">
      <div class="chart-container">
        <ngx-charts-bar-vertical
          [scheme]="'natural'"
          [results]="dividendBarChartData"
          [animations]="true"
          [xAxis]="true"
          [yAxis]="true"
          [showXAxisLabel]="true"
          [showYAxisLabel]="true"
          [yAxisLabel]="'Dividend Income $'"
        />
      </div>
      <div class="chart-container">
        <ngx-charts-bar-vertical
          [scheme]="'natural'"
          [results]="yocBarChartData"
          [animations]="true"
          [xAxis]="true"
          [yAxis]="true"
          [showXAxisLabel]="true"
          [showYAxisLabel]="true"
          [yAxisLabel]="'Yield On Cost %'"
        />
      </div>
    </div>
  </mat-expansion-panel>
</section>
