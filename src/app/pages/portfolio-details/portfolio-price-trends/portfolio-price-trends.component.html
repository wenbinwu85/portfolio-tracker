<price-movement-charts />

<section class="add-border">
    <div class="chart-header">
        <div class="title">
            <span>Price Performance</span>
        </div>
        <mat-chip-listbox [ngStyle]="{padding: '20px'}">
            <mat-chip-option selected (click)="changePerformanceChart(1)">Moving Averages</mat-chip-option>
            <mat-chip-option (click)="changePerformanceChart(2)">Stocks 52 Week Change</mat-chip-option>
            <mat-chip-option (click)="changePerformanceChart(3)">ETF Past Performance</mat-chip-option>
        </mat-chip-listbox>
    </div>
    <div class="charts-flex">
        <div *ngIf="selectedPerformanceChart === 1" class="chart-container">
            <ngx-charts-bar-vertical
                [scheme]="performanceChartColorScheme"
                [animations]="true"
                [results]="fiftyDayMAChartData"
                [xAxis]="true"
                [yAxis]="true"
                [showXAxisLabel]="true"
                [showYAxisLabel]="true"
                [legend]="false"
                [yAxisLabel]="'Price vs 50 Day MA %'"
                [rotateXAxisTicks]="true"
                [yScaleMin]="fiftyDayMAChartData[0].value - 5"
            >
                <!-- <ng-template #tooltipTemplate let-model="model" class="dark">
                    <stock-price-info-card [stock]="getTooltipData(model.name)" />
                    <mat-divider style="margin: none;"/>
                    <span>{{ model.name }}: </span>
                    <span>{{ model.value.toFixed(2) }}%</span>
                </ng-template> -->
            </ngx-charts-bar-vertical>

        </div> 
        <div *ngIf="selectedPerformanceChart === 1" class="chart-container">
            <ngx-charts-bar-vertical
                [scheme]="'air'"
                [scheme]="performanceChartColorScheme"
                [animations]="true"
                [results]="twoHundredDayMAChartData"
                [xAxis]="true"
                [yAxis]="true"
                [showXAxisLabel]="true"
                [showYAxisLabel]="true"
                [legend]="false"
                [yAxisLabel]="'Price vs 200 Day MA %'"
                [rotateXAxisTicks]="true"
                [yScaleMin]="twoHundredDayMAChartData[0].value - 5"
            >
                <!-- <ng-template #tooltipTemplate let-model="model" class="dark">
                    <stock-price-info-card [stock]="getTooltipData(model.name)" />
                    <mat-divider style="margin: none;"/>
                    <span>{{ model.name }}: </span>
                    <span>{{ model.value.toFixed(2) }}%</span>
                </ng-template> -->
            </ngx-charts-bar-vertical>
        </div> 
    </div>

    <div *ngIf="selectedPerformanceChart === 2" class="chart-container">
        <ngx-charts-bar-vertical
            [scheme]="performanceChartColorScheme"
            [animations]="true"
            [results]="fiftyTwoWeekChangeChartData"
            [xAxis]="true"
            [yAxis]="true"
            [showXAxisLabel]="true"
            [showYAxisLabel]="true"
            [legend]="false"
            [yAxisLabel]="'52 Week Change %'"
            [rotateXAxisTicks]="true"
            [activeEntries]="['S&P 500']"
            [customColors]="[{name:'S&P 500', value: 'tomato'}]"
        >
            <ng-template #tooltipTemplate let-model="model" class="dark">
                <stock-price-info-card *ngIf="model.name !== 'S&P 500'" [stock]="getTooltipData(model.name)" />
                <mat-divider *ngIf="model.name !== 'S&P 500'" style="margin: none;" />
                <span>{{ model.name }}: </span>
                <span>{{ model.value.toFixed(2) }}%</span>
            </ng-template>
        </ngx-charts-bar-vertical>
    </div>

    <div *ngIf="selectedPerformanceChart === 3" class="chart-container">
        <ngx-charts-bar-vertical-2d
            [animations]="true"
            [results]="etfPerformanceChartData"
            [xAxis]="true"
            [yAxis]="true"
            [showXAxisLabel]="true"
            [showYAxisLabel]="true"
            [legend]="false"
            [yAxisLabel]="'ETF Performance %'"
            [showDataLabel]="true"
            [rotateXAxisTicks]="true"
            [customColors]="[{name: 'SCHD', value: 'deepskyblue'}, {name: 'VYM', value: 'maroon'}, {name: 'JEPI', value: 'dodgerblue'}]"
        >
            <!-- <ng-template #tooltipTemplate let-model="model" class="dark">
                <stock-price-info-card [stock]="getTooltipData(model.name)" />
            </ng-template> -->
        </ngx-charts-bar-vertical-2d>
    </div>
</section>

<!-- move to analysis page -->
<section class="add-border">
    <div class="chart-header">
        <div class="title">
            <span>Current Price vs 52 Week & Target Price</span>
        </div>
        <mat-chip-listbox [ngStyle]="{padding: '20px'}">
            <mat-chip-option selected (click)="changeVSCharts(1)">VS 52 Week High Low</mat-chip-option>
            <mat-chip-option (click)="changeVSCharts(2)">VS Target Price</mat-chip-option>
        </mat-chip-listbox>
    </div>
    <div class="charts-flex">
        <div *ngIf="selectedVSChart === 1" class="chart-container">
            <ngx-charts-bar-vertical
                [scheme]="fiftyTwoWeekChartColorScheme"
                [animations]="true"
                [results]="fiftyTwoWeekLowChartData"
                [xAxis]="true"
                [yAxis]="true"
                [showXAxisLabel]="true"
                [showYAxisLabel]="true"
                [legend]="false"
                [yAxisLabel]="'Current price vs 52 week low %'"
                [rotateXAxisTicks]="true"
            >
                <!-- <ng-template #tooltipTemplate let-model="model" class="dark">
                    <stock-price-info-card [stock]="getTooltipData(model.name)" />
                    <mat-divider style="margin: none;"/>
                    <span>{{ model.name }}: </span>
                    <span>{{ model.value.toFixed(2) }}%</span>
                </ng-template> -->
            </ngx-charts-bar-vertical>
        </div> 
        <div *ngIf="selectedVSChart === 1" class="chart-container">
            <ngx-charts-bar-vertical
                [scheme]="fiftyTwoWeekChartColorScheme"
                [animations]="true"
                [results]="fiftyTwoWeekHighChartData"
                [xAxis]="true"
                [yAxis]="true"
                [showXAxisLabel]="true"
                [showYAxisLabel]="true"
                [legend]="false"
                [yAxisLabel]="'Current price vs 52 week High %'"
                [rotateXAxisTicks]="true"
            >
                <!-- <ng-template #tooltipTemplate let-model="model" class="dark">
                    <stock-price-info-card [stock]="getTooltipData(model.name)" />
                    <mat-divider style="margin: none;"/>
                    <span>{{ model.name }}: </span>
                    <span>{{ model.value.toFixed(2) }}%</span>
                </ng-template> -->
            </ngx-charts-bar-vertical>
        </div> 
    </div>

    <div *ngIf="selectedVSChart === 2" class="chart-container">
        <ngx-charts-bar-vertical
            [scheme]="targetPriceChartColorScheme"
            [animations]="true"
            [results]="discountChartData"
            [xAxis]="true"
            [yAxis]="true"
            [showXAxisLabel]="true"
            [showYAxisLabel]="true"
            [legend]="false"
            [yAxisLabel]="'Current price vs target price %'"
            [rotateXAxisTicks]="true"
            [yScaleMin]="-5"
        >
            <!-- <ng-template #tooltipTemplate let-model="model" class="dark">
                <stock-price-info-card [stock]="getTooltipData(model.name)" />
                <mat-divider style="margin: none;"/>
                <span>{{ model.name }}: </span>
                <span>{{ model.value.toFixed(2) }}%</span>
            </ng-template> -->
        </ngx-charts-bar-vertical>
    </div> 
</section>
