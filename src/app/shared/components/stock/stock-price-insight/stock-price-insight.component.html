<section *ngIf="technicalInsights as ti" [class]="showBorder ? 'add-border' : ''">
    <table mat-table [dataSource]="getTableDataSource()">
        <ng-container matColumnDef="symbol">
            <th mat-header-cell *matHeaderCellDef>Symbol</th>
            <td mat-cell *matCellDef="let element">
                <!-- <span>{{ element.symbol }}</span>
                <span [ngStyle]="{color: 'teal'}"> {{ element.regularMarketPrice | currency }}</span> -->
                <stock-ticker-chip [stock]="stockData" />
            </td>
        </ng-container>
        <ng-container matColumnDef="support">
            <th mat-header-cell *matHeaderCellDef>Support</th>
            <td mat-cell *matCellDef="let element">
                <span>{{ ti.instrumentInfo.keyTechnicals.support | currency }}</span>
                <span [ngStyle]="{color: 'teal'}"> {{(element.regularMarketPrice - ti.instrumentInfo.keyTechnicals.support).toFixed(2) }}</span>
            </td>
        </ng-container>
        <ng-container matColumnDef="resistance">
            <th mat-header-cell *matHeaderCellDef>Resistance</th>
            <td mat-cell *matCellDef="let element">
                <span>{{ ti.instrumentInfo.keyTechnicals.resistance | currency }}</span>
                <span [ngStyle]="{color: 'chocolate'}"> {{ (element.regularMarketPrice - ti.instrumentInfo.keyTechnicals.resistance).toFixed(2)}} </span>
            </td>
        </ng-container>
        <ng-container matColumnDef="stopLoss">
            <th mat-header-cell *matHeaderCellDef>Stop Loss</th>
            <td mat-cell *matCellDef="let element"> {{ ti.instrumentInfo.keyTechnicals.stopLoss | currency }}</td>
        </ng-container>
        <ng-container matColumnDef="fiftyTwoWeekLow">
            <th mat-header-cell *matHeaderCellDef>52 Week Low</th>
            <td mat-cell *matCellDef="let element">
                <span>{{ element.fiftyTwoWeekLow | currency }}</span>
                <span [ngStyle]="{color: 'teal'}"> +{{ (element.regularMarketPrice - element.fiftyTwoWeekLow).toFixed(2) }}</span>
            </td>
        </ng-container>
        <ng-container matColumnDef="dayLow">
            <th mat-header-cell *matHeaderCellDef>Day Low</th>
            <td mat-cell *matCellDef="let element">
                <span>{{ element.dayLow | currency }}</span>
                <span [ngStyle]="{color: 'teal'}"> +{{( element.regularMarketPrice - element.dayLow).toFixed(2) }}</span>
            </td>
        </ng-container>
        <ng-container matColumnDef="dayHigh">
            <th mat-header-cell *matHeaderCellDef>Day High</th>
            <td mat-cell *matCellDef="let element">
                <span>{{ element.dayHigh | currency }}</span>
                <span [ngStyle]="{color: 'chocolate'}"> {{ (element.regularMarketPrice - element.dayHigh).toFixed(2) }}</span>
            </td>
        </ng-container>
        <ng-container matColumnDef="fiftyTwoWeekHigh">
            <th mat-header-cell *matHeaderCellDef>52 Week High</th>
            <td mat-cell *matCellDef="let element">
                <span>{{ element.fiftyTwoWeekHigh | currency }}</span>
                <span [ngStyle]="{color: 'chocolate'}"> {{ (element.regularMarketPrice - element.fiftyTwoWeekHigh).toFixed(2) }}</span>
            </td>
        </ng-container>
        <ng-container matColumnDef="targetLowPrice">
            <th mat-header-cell *matHeaderCellDef>Target Price Low</th>
            <td mat-cell *matCellDef="let element">
                <span> {{ (element.targetLowPrice - element.regularMarketPrice) / element.regularMarketPrice | percent: '.2' }}</span>
                <span *ngIf="stockData.quoteType === 'EQUITY'" [ngStyle]="{color: 'teal'}"> ({{ element.targetLowPrice | currency }})</span>
            </td>
        </ng-container>
        <ng-container matColumnDef="targetMedianPrice">
            <th mat-header-cell *matHeaderCellDef>Target Price Median</th>
            <td mat-cell *matCellDef="let element">
                <span> {{ (element.targetMedianPrice - element.regularMarketPrice) / element.regularMarketPrice | percent: '.2' }}</span>
                <span *ngIf="stockData.quoteType === 'EQUITY'" [ngStyle]="{color: 'teal'}"> ( {{ element.targetMedianPrice | currency }} )</span>
            </td>
        </ng-container>
        <ng-container matColumnDef="targetHighPrice">
            <th mat-header-cell *matHeaderCellDef>Target Price High</th>
            <td mat-cell *matCellDef="let element">
                <span> {{ (element.targetHighPrice - element.regularMarketPrice) / element.regularMarketPrice | percent: '.2' }}</span>
                <span *ngIf="stockData.quoteType === 'EQUITY'" [ngStyle]="{color: 'teal'}"> ({{ element.targetHighPrice | currency }})</span>
            </td>
        </ng-container>
        <ng-container matColumnDef="argusTarget">
            <th mat-header-cell *matHeaderCellDef>Argus Research Target</th>
            <td mat-cell *matCellDef="let element">
                <span>{{ ti?.recommendation?.targetPrice | currency }}</span>
                <span *ngIf="stockData.quoteType === 'EQUITY'"> ({{ ti?.recommendation?.rating }})</span>
            </td>
        </ng-container>
        <ng-container matColumnDef="tradingCentral">
            <th mat-header-cell *matHeaderCellDef>Trading Central Valuation</th>
            <td mat-cell *matCellDef="let element">
                <span>{{ ti?.instrumentInfo?.valuation.description }}</span>
                <span *ngIf="stockData.quoteType === 'EQUITY'"> ({{ ti?.instrumentInfo?.valuation.discount }})</span>
            </td>
        </ng-container>
        <tr mat-header-row *matHeaderRowDef="tableColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: tableColumns;"></tr>
    </table>

    <mat-divider />

    <div *ngIf="stockData" class="add-margin">
        <!-- <ng-container *ngComponentOutlet="getWidget.widget; inputs:{symbol: selectedSymbol};" /> -->
        <h3>{{ stockData.symbol }} Day Range vs 52 Week Range</h3>
        <stock-day-price-range [min]="stockData.fiftyTwoWeekLow" [max]="stockData.fiftyTwoWeekHigh"
            [lowThumbValue]="stockData.dayLow" [highThumbValue]="stockData.dayHigh" [showThumbs]="false" />
    </div>
</section>