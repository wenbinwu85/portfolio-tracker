import{a as pe}from"./chunk-H5MSENZN.js";import{a as b}from"./chunk-NUDCWQRX.js";import{a as oe,b as re}from"./chunk-C6W2NXWO.js";import{A as J,B as j,C as K,D as _,E as $,G as z}from"./chunk-EPG7QQRP.js";import{a as Z,b as ee,c as te,e as ie,f as ae,g as ne}from"./chunk-ZZZ6CR5C.js";import{f as se,g as le,i as me,m as ce}from"./chunk-S43E2SXB.js";import{a as Y,b as G}from"./chunk-XPYKHHLJ.js";import{$ as y,Ab as Q,Bb as R,Cb as V,Db as M,Fa as u,Hc as U,Ka as p,Pa as h,Sb as L,Ua as o,V as f,Va as r,Wa as d,Wb as X,Xb as O,Yb as F,_ as v,_a as E,bb as k,db as m,ib as S,jb as w,kb as P,nb as D,ob as l,pb as N,qb as T,ra as n,rb as B,sa as g,wb as x,wd as H,xd as q,yb as A}from"./chunk-N2YA6NA4.js";var fe=["miniChartWidget"],he=(()=>{class t{constructor(e){this.tradingviewService=e,this.width="100%",this.height=200,this.range="12M",this.theme="light"}ngAfterViewInit(){this.params={symbol:this.symbol,dateRange:this.range,width:this.width,height:this.height,colorTheme:this.theme,autosize:!0,trendLineColor:"rgba(41, 98, 255, 1)",underLineColor:"rgba(41, 98, 255, 0.3)",underLineBottomColor:"rgba(41, 98, 255, 0)",isTransparent:!0,locale:"en"},this.params=JSON.stringify(this.params);let e=this.tradingviewService.miniChartWidget(this.params);this.miniChartWidget.nativeElement.appendChild(e)}static{this.\u0275fac=function(i){return new(i||t)(g(b))}}static{this.\u0275cmp=f({type:t,selectors:[["tv-mini-chart-widget"]],viewQuery:function(i,a){if(i&1&&S(fe,5),i&2){let s;w(s=P())&&(a.miniChartWidget=s.first)}},inputs:{symbol:"symbol",width:"width",height:"height",range:"range",theme:"theme"},standalone:!0,features:[x],decls:2,vars:0,consts:[["miniChartWidget",""]],template:function(i,a){i&1&&d(0,"div",null,0)},encapsulation:2})}}return t})();var xe=["marketQuotesWidget"],ge=(()=>{class t{constructor(e){this.tradingviewService=e}ngAfterViewInit(){let e;this.stockNames?e=[{name:"Portfolio",symbols:this.stockNames}]:e=[{name:"Indices",originalName:"Indices",symbols:[{name:"FOREXCOM:SPXUSD",displayName:"S&P 500 Index"},{name:"NASDAQ:NDX",displayName:"NADAQ 100"},{name:"FOREXCOM:DJI",displayName:"Dow Jones Industrial Average Index"},{name:"INDEX:NKY",displayName:"Nikkei 225"},{name:"FOREXCOM:UKXGBP",displayName:"FTSE 100 Index"}]},{name:"Futures",originalName:"Futures",symbols:[{name:"CME_MINI:ES1!",displayName:"S&P 500"},{name:"CME:6E1!",displayName:"Euro"},{name:"CME:BTC1!",displayName:"Bitcoin"},{name:"COMEX:GC1!",displayName:"Gold"},{name:"NYMEX:CL1!",displayName:"WTI Crude Oil"},{name:"NYMEX:NG1!",displayName:"Gas"},{name:"CBOT:ZC1!",displayName:"Corn"}]},{name:"Bonds",originalName:"Bonds",symbols:[{name:"CBOT:ZB1!",displayName:"T-Bond"},{name:"CBOT:UB1!",displayName:"Ultra T-Bond"},{name:"TVC:US01Y",displayName:"US GOV Bonds 1Year Yield"},{name:"TVC:US02Y",displayName:"US GOV Bonds 2Year Yield"},{name:"TVC:US05Y",displayName:"US GOV Bonds 5Year Yield"},{name:"TVC:US10Y",displayName:"US GOV Bonds 10Year Yield"}]}],this.params={width:"100%",height:this.height||21*35+100,symbolsGroups:e,showSymbolLogo:!0,isTransparent:!1,colorTheme:"light",locale:"en"},this.params=JSON.stringify(this.params);let i=this.tradingviewService.marketQuotesWidget(this.params);this.marketQuotesWidget.nativeElement.append(i)}static{this.\u0275fac=function(i){return new(i||t)(g(b))}}static{this.\u0275cmp=f({type:t,selectors:[["tv-market-quotes-widget"]],viewQuery:function(i,a){if(i&1&&S(xe,5),i&2){let s;w(s=P())&&(a.marketQuotesWidget=s.first)}},inputs:{stockNames:"stockNames",height:"height"},standalone:!0,features:[x],decls:2,vars:0,consts:[["marketQuotesWidget",""]],template:function(i,a){i&1&&d(0,"div",null,0)},encapsulation:2})}}return t})();var _e=["tickersWidget"],Be=(()=>{class t{constructor(e){this.tradingviewService=e,this.theme="light",this.displayMode="adaptive"}ngAfterViewInit(){this.symbols||(this.symbols=[{title:"S&P 500 Index",proName:"FOREXCOM:SPXUSD"},{title:"Nasdaq 100",proName:"NASDAQ:NDX"},{title:"Dow Jones Industrial",proName:"DJI"},{title:"Bitcoin",proName:"BITSTAMP:BTCUSD"},{title:"Ethereum",proName:"BITSTAMP:ETHUSD"},{title:"Dogecoin",proName:"BINANCE:DOGEUSD"},{title:"USD/RMB",proName:"FX:USDCNH"},{title:"USD/JPY",proName:"FX:USDJPY"},{title:"EUR/USD",proName:"FX:EURUSD"}]),this.params={symbols:this.symbols,displayMode:this.displayMode,colorTheme:this.theme,isTransparent:!1,showSymbolLogo:!0,locale:"en"},this.params=JSON.stringify(this.params);let e=this.tradingviewService.tickersWidget(this.params,this.tape);this.tickersWidget.nativeElement.appendChild(e);try{let i=this.tickersWidget.nativeElement.children[1];this.tickersWidget.nativeElement.removeChild(i)}catch{}}static{this.\u0275fac=function(i){return new(i||t)(g(b))}}static{this.\u0275cmp=f({type:t,selectors:[["tv-tickers-widget"]],viewQuery:function(i,a){if(i&1&&S(_e,5),i&2){let s;w(s=P())&&(a.tickersWidget=s.first)}},inputs:{symbols:"symbols",tape:"tape",theme:"theme",displayMode:"displayMode"},standalone:!0,features:[x],decls:2,vars:0,consts:[["tickersWidget",""]],template:function(i,a){i&1&&d(0,"div",null,0)},encapsulation:2})}}return t})();var I=t=>({color:t});function ve(t,c){if(t&1){let e=E();o(0,"mat-chip-option",8),k("click",function(){v(e);let a=m(2);return y(a.displayChart(2))}),l(1,"Beta"),r()}}function ye(t,c){if(t&1){let e=E();o(0,"div",6)(1,"mat-chip-listbox")(2,"mat-chip-option",7),k("click",function(){v(e);let a=m();return y(a.displayChart(1))}),l(3,"Price Changes"),r(),u(4,ve,2,0,"mat-chip-option"),o(5,"mat-chip-option",8),k("click",function(){v(e);let a=m();return y(a.displayChart(3))}),l(6,"VIX"),r()()()}if(t&2){let e=m();n(4),h(e.betaChartData.length?4:-1)}}function ke(t,c){if(t&1&&(o(0,"div",6)(1,"span"),l(2,"Regular Market "),r(),o(3,"mat-icon"),l(4,"schedule"),r(),o(5,"span",10),l(6),Q(7,"currency"),r(),o(8,"span",10),l(9),Q(10,"percent"),r()()),t&2){let e=m(3);n(5),p("ngStyle",A(9,I,e.getDayPriceChangeColor())),n(),T(" ",R(7,4,e.priceChange)," "),n(2),p("ngStyle",A(11,I,e.getDayPriceChangeColor())),n(),T(" (",V(10,6,e.priceChange/e.portfolioMarketValue,".4"),") ")}}function Se(t,c){if(t&1&&(o(0,"div",6)(1,"span"),l(2),r(),o(3,"mat-icon"),l(4),r(),o(5,"span",10),l(6),Q(7,"currency"),r(),o(8,"span",10),l(9),Q(10,"percent"),r()()),t&2){let e=m(3);n(2),N(e.prePostHourText),n(2),N(e.prePostHourIcon),n(),p("ngStyle",A(11,I,e.getPrePostPriceChangeColor())),n(),T(" ",R(7,6,e.prePostPriceChange)," "),n(2),p("ngStyle",A(13,I,e.getPrePostPriceChangeColor())),n(),T(" (",V(10,8,e.prePostPriceChange/e.portfolioMarketValue,".4"),") ")}}function we(t,c){if(t&1){let e=E();o(0,"mat-slide-toggle",11),k("toggleChange",function(){v(e);let a=m(3);return y(a.changeChart())}),o(1,"span"),l(2),r()()}if(t&2){let e=m(3);n(2),N(e.chartConfigs.preMarket.toggleText)}}function Pe(t,c){if(t&1){let e=E();o(0,"mat-slide-toggle",11),k("toggleChange",function(){v(e);let a=m(3);return y(a.changeChart())}),o(1,"span"),l(2),r()()}if(t&2){let e=m(3);n(2),N(e.chartConfigs.postMarket.toggleText)}}function Te(t,c){if(t&1&&(o(0,"div",9),u(1,ke,11,13,"div",6)(2,Se,11,15,"div",6)(3,we,3,1,"mat-slide-toggle")(4,Pe,3,1,"mat-slide-toggle"),r()),t&2){let e=m(2);n(),h(e.prefix.startsWith("pre")?-1:1),n(),h(e.prefix.startsWith("regular")?-1:2),n(),h(e.prefix.startsWith("pre")?3:-1),n(),h(e.prefix.startsWith("post")?4:-1)}}function Me(t,c){if(t&1&&u(0,Te,5,4,"div",9),t&2){let e=m();h(e.marketState!=="CLOSED"?0:-1)}}function be(t,c){if(t&1&&(d(0,"tv-mini-chart-widget",18)(1,"mat-divider",19),o(2,"span"),l(3),r(),o(4,"span"),l(5),r()),t&2){let e=c.model,i=m(3);p("symbol",e.name)("theme","dark"),n(3),B("",i.chartConfigs[i.prefix].text," : ",e.name," "),n(2),T("",e.value.toFixed(2),"%")}}function Ee(t,c){if(t&1&&(o(0,"div",6)(1,"div",15)(2,"ngx-charts-bar-vertical",16),u(3,be,6,5,"ng-template",null,4,M),r()(),o(5,"div",15),d(6,"ngx-charts-bar-vertical-stacked",17),r()()),t&2){let e=m(2);n(2),p("results",e.priceChangeChartData)("xAxis",!0)("yAxis",!0)("showXAxisLabel",!0)("showYAxisLabel",!0)("rotateXAxisTicks",!0)("animations",!0)("showDataLabel",!0)("yAxisLabel","Price Change %")("customColors",e.getPriceChangeChartColor)("roundEdges",!1),n(4),p("scheme",e.priceRangeColorScheme)("results",e.priceRangeChartData)("xAxis",!0)("yAxis",!0)("showXAxisLabel",!0)("showYAxisLabel",!0)("rotateXAxisTicks",!0)("animations",!0)("yAxisLabel","Market Day Price Range $")}}function De(t,c){if(t&1&&(o(0,"div",6)(1,"div",15),d(2,"ngx-charts-bar-vertical",20),r()()),t&2){let e=m(2);n(2),p("results",e.betaChartData)("xAxis",!0)("yAxis",!0)("showXAxisLabel",!0)("showYAxisLabel",!0)("rotateXAxisTicks",!0)("animations",!0)("yAxisLabel","Beta")("roundEdges",!1)("customColors",e.getBetaColor)}}function Ne(t,c){t&1&&d(0,"tv-symbol-overview-widget",12),t&2&&p("company","VIX Volatility")("symbol","VANTAGE:VIX")("timeFrame","1m")}function Ae(t,c){t&1&&d(0,"tv-market-quotes-widget")}function Qe(t,c){if(t&1&&d(0,"tv-market-quotes-widget",21),t&2){let e=m(2);p("stockNames",e.stockNames)("height",e.stockNames.length*35+100)}}function Ie(t,c){if(t&1&&(u(0,Ee,7,20,"div",6)(1,De,3,10,"div",6)(2,Ne,1,3,"tv-symbol-overview-widget",12),o(3,"mat-accordion")(4,"mat-expansion-panel",13)(5,"mat-expansion-panel-header")(6,"mat-panel-title")(7,"mat-icon"),l(8,"price_change"),r(),o(9,"span"),l(10,"Market Quotes"),r()()(),u(11,Ae,1,0,"ng-template",14),r(),o(12,"mat-expansion-panel",13)(13,"mat-expansion-panel-header")(14,"mat-panel-title")(15,"mat-icon"),l(16,"price_change"),r(),o(17,"span"),l(18,"Portfolio Quotes"),r()()(),u(19,Qe,1,2,"ng-template",14),r()()),t&2){let e=m();h(e.selectedChart===1?0:-1),n(),h(e.selectedChart===2?1:-1),n(),h(e.selectedChart===3?2:-1),n(2),p("expanded",e.expandWidget),n(8),p("expanded",!1)}}function Re(t,c){t&1&&(o(0,"div",22)(1,"a",23)(2,"span",24),l(3,"Track all markets on TradingView"),r()()())}var mt=(()=>{class t{constructor(e,i){this.dataService=e,this.helper=i,this.showTickers=!0,this.priceChange=0,this.prePostPriceChange=0,this.priceChangeChartData=[],this.priceRangeChartData=[],this.betaChartData=[],this.stockNames=[],this.priceRangeColorScheme={domain:["steelblue","skyblue"]},this.betaColorScheme={domain:["slategrey"]},this.scaleType=se,this.selectedChart=1,this.toggleChecked=!1,this.portfolioMarketValue=0,this.chartConfigs={preMarket:{text:"Pre Market",toggleText:"Pre Market Chart",priceChange:"preMarketChange",priceChangePercent:"preMarketChangePercent"},postMarket:{text:"Post Market",toggleText:"Post Market Chart",priceChange:"postMarketChange",priceChangePercent:"postMarketChangePercent"},regularMarket:{text:"Regular Market"}},this.marketState="",this.getPriceChangeChartColor=a=>{let s=this.toggleChecked?this.chartConfigs[this.prefix]?.priceChangePercent:"regularMarketChangePercent";return this.dataService.getTickerData(a)[s].raw>0?_.Gain:_.Lost},this.getBetaColor=a=>(this.dataService.getTickerData(a).beta?.raw||0)>1?"chocolate":"teal"}ngOnInit(){this.marketState=this.dataService.marketState,this.prefix=this.helper.getPriceKeyPrefix(),this.portfolioMarketValue=this.dataService.portfolioHoldings.marketValue,this.prePostHourIcon=this.prefix.startsWith("pre")?"sunny":"bedtime",this.prePostHourText=this.prefix.startsWith("pre")?"Pre Market ":"Post Market ",this.dataService.portfolioSymbols.forEach(e=>{let i=this.dataService.getTickerHolding(e),a=this.dataService.getTickerData(e);if(this.stockNames.push({name:a.symbol,displayName:`${a.symbol} - ${a.longName}`}),this.priceChange+=a.regularMarketChange.raw*i.shares,this.priceChangeChartData.push({name:a.symbol,value:a.regularMarketChangePercent.raw*100}),this.priceChangeChartData.sort((s,C)=>s.value-C.value),this.priceRangeChartData.push({name:a.symbol,series:[{name:"Price -> Day Low Range",value:a.regularMarketPrice.raw-a.regularMarketDayLow.raw},{name:"Price -> Day High Range",value:a.regularMarketDayHigh.raw-a.regularMarketPrice.raw}]}),this.priceRangeChartData.sort((s,C)=>s.series[0].value+s.series[1].value-(C.series[0].value+C.series[1].value)),!this.prefix.startsWith("regular")){let s=this.chartConfigs[this.prefix].priceChange;a[s]&&(this.prePostPriceChange+=a[s].raw*i.shares)}a.quoteType==="EQUITY"&&a.beta.raw&&this.betaChartData.push({name:a.symbol,value:a.beta.raw||0})}),this.stockNames.sort((e,i)=>{let a=this.dataService.portfolioData[e.name].regularMarketChangePercent.raw,s=this.dataService.portfolioData[i.name].regularMarketChangePercent.raw;return a-s}),this.betaChartData.sort((e,i)=>e.value-i.value)}getDayPriceChangeColor(){return this.priceChange>0?_.Gain:_.Lost}getPrePostPriceChangeColor(){return this.prePostPriceChange>0?_.Gain:_.Lost}displayChart(e){this.selectedChart=e}changeChart(){this.toggleChecked=!this.toggleChecked;let e=this.toggleChecked?this.prefix+"ChangePercent":"regularMarketChangePercent";this.priceChangeChartData=[],this.dataService.portfolioSymbols?.forEach(i=>{let a=this.dataService.getTickerData(i);a[e].raw&&this.priceChangeChartData.push({name:a.symbol,value:a[e].raw*100})}),this.priceChangeChartData.sort((i,a)=>i.value-a.value)}static{this.\u0275fac=function(i){return new(i||t)(g(U),g($))}}static{this.\u0275cmp=f({type:t,selectors:[["portfolio-quotes"]],inputs:{showTickers:"showTickers",expandWidget:"expandWidget"},standalone:!0,features:[x],decls:9,vars:4,consts:[["titleContentRef",""],["subtitleContentRef",""],["ValueChangeRef",""],["quotesFooterRef",""],["tooltipTemplate",""],["title","Quotes",3,"titleContentRef","subtitleContentRef","mainContentRef","footerContentRef"],[1,"add-flex"],["selected","",3,"click"],[3,"click"],[1,"subcontent-wrapper"],[3,"ngStyle"],[3,"toggleChange"],[3,"company","symbol","timeFrame"],[3,"expanded"],["matExpansionPanelContent",""],[1,"chart-container"],[3,"results","xAxis","yAxis","showXAxisLabel","showYAxisLabel","rotateXAxisTicks","animations","showDataLabel","yAxisLabel","customColors","roundEdges"],[3,"scheme","results","xAxis","yAxis","showXAxisLabel","showYAxisLabel","rotateXAxisTicks","animations","yAxisLabel"],[3,"symbol","theme"],[2,"margin","none","border-top-color","slategrey"],[3,"results","xAxis","yAxis","showXAxisLabel","showYAxisLabel","rotateXAxisTicks","animations","yAxisLabel","roundEdges","customColors"],[3,"stockNames","height"],[1,"tradingview-widget-copyright"],["href","https://www.tradingview.com/markets/#indices","rel","noopener nofollow","target","_blank"],[1,"blue-text"]],template:function(i,a){if(i&1&&(u(0,ye,7,1,"ng-template",null,0,M)(2,Me,1,1,"ng-template",null,1,M)(4,Ie,20,5,"ng-template",null,2,M)(6,Re,4,0,"ng-template",null,3,M),d(8,"container-card",5)),i&2){let s=D(1),C=D(3),ue=D(5),Ce=D(7);n(8),p("titleContentRef",s)("subtitleContentRef",C)("mainContentRef",ue)("footerContentRef",a.expandWidget||a.selectedChart===3?Ce:void 0)}},dependencies:[F,L,X,O,z,K,j,J,q,H,ne,ae,ee,te,ie,Z,G,Y,re,oe,ce,le,me,ge,he,pe],styles:[".subcontent-wrapper[_ngcontent-%COMP%]{display:flex;align-content:center!important;align-items:center;margin-top:.5rem;font-size:1.25rem}.subcontent-wrapper[_ngcontent-%COMP%]   .add-flex[_ngcontent-%COMP%]{margin-right:1rem}  .mat-expansion-panel{border-radius:0!important}  .mat-expansion-panel-body{padding:0!important}"]})}}return t})();export{Be as a,mt as b};
