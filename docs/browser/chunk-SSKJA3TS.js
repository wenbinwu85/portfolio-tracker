import{a as se}from"./chunk-DVOH2XRH.js";import{A as le,a as h,b as X,c as G,d as _,e as z,f as K,h as W,i as Z,k as ee,l as te,n as ie,o as ne,q as oe,s as ae,t as re}from"./chunk-5VRABJFB.js";import{c as de}from"./chunk-K2KI2H2N.js";import{c as J,g as U}from"./chunk-G4IXQKAA.js";import{k as q}from"./chunk-2H2AKPFO.js";import{o as N,q as Q}from"./chunk-4X3KAFTL.js";import{f as B}from"./chunk-F3AX4KGU.js";import{$b as Y,Ab as p,Bb as u,Fb as M,Ib as w,Kb as d,Mc as V,Od as j,Pb as S,Qb as P,Rb as T,Ub as R,Vb as O,Wa as l,Xa as $,Xb as A,bc as L,fa as E,hc as F,kb as f,na as y,oa as x,pb as s,qb as k,ub as D,wb as H,xb as g,yb as b,zb as m}from"./chunk-PZQJWWKM.js";import{a as C,b as I}from"./chunk-GAL4ENT6.js";var me=(t,o)=>o.value,pe=t=>({color:t});function ue(t,o){if(t&1&&u(0,"info-card",5),t&2){let n=o.$implicit;s("value",n.value)("valueType",n.valueType)("subtitle",n.subtitle)("color",n.color)}}function fe(t,o){if(t&1&&(m(0,"section",2),g(1,ue,1,4,"info-card",5,me),p()),t&2){let n=d();l(),b(n.infoCards)}}function ve(t,o){if(t&1){let n=M();m(0,"div",6)(1,"portfolio-ticker-buttons",7),w("selectedTicker",function(e){y(n);let a=d();return x(a.onSelect(e))}),p(),m(2,"div",8),u(3,"ngx-charts-bar-vertical-2d",9),p()()}if(t&2){let n=d();k("flex-direction","column"),l(),s("dividendPayersOnly",!0),l(2),s("scheme",n.dividendChartColorScheme)("results",n.dividendLineChartData)("xAxisLabel",n.selectedSymbolLabel)("xAxisLabel","Dividend Rate")("showXAxisLabel",!0)("showYAxisLabel",!0)("xAxis",!0)("yAxis",!0)("animations",!0)("roundEdges",!1)}}function he(t,o){if(t&1&&(m(0,"th",16),O(1),p()),t&2){let n=d().$index,i=d(2);l(),A(" ",i.headers[n]," ")}}function _e(t,o){if(t&1&&(m(0,"div",18),u(1,"stock-name-card",20),p()),t&2){let n=d().$implicit;l(),s("stock",n)}}function Ce(t,o){if(t&1){let n=M();m(0,"span",21),w("click",function(){y(n);let e=d().$implicit,a=d(3);return x(a.updateChart(e.symbol))}),O(1),p()}if(t&2){let n=d().$implicit,i=d().$index,e=d(2);s("ngStyle",L(2,pe,e.getCellColor(n,i))),l(),A(" ",e.cells[i](n)," ")}}function ye(t,o){if(t&1&&(m(0,"td",17),f(1,_e,2,1,"div",18)(2,Ce,2,4,"span",19),p()),t&2){let n=d().$index;l(),D(n===0?1:2)}}function xe(t,o){if(t&1&&(m(0,"div",11),f(1,he,2,1,"th",14)(2,ye,3,1,"td",15),p()),t&2){let n=o.$implicit;s("matColumnDef",n)}}function De(t,o){t&1&&u(0,"tr",22)}function ge(t,o){t&1&&u(0,"tr",23)}function be(t,o){if(t&1&&(m(0,"table",10),g(1,xe,3,1,"div",11,H),f(3,De,1,0,"tr",12)(4,ge,1,0,"tr",13),p()),t&2){let n=d();s("dataSource",n.dataSource),l(),b(n.columnDefs),l(2),s("matHeaderRowDef",n.columnDefs)("matHeaderRowDefSticky",!0),l(),s("matRowDefColumns",n.columnDefs)}}var je=(()=>{let o=class o{constructor(i){this.dataService=i,this.monthStrings=["January","February","March","April","May","June","July","August","September","October","November","December"],this.browser="",this.todayDate=new Date,this.dividendIncome=0,this.portfolioYieldOnCost=0,this.selectedSymbolLabel="",this.infoCards=[],this.dividendLineChartData=[],this.dividendChartColorScheme={domain:["steelblue"]},this.currentMonth=new Date().getMonth(),this.pieChartData=[],this.echartUpdateOptions={yAxis:{},xAxis:{data:[]},series:[{data:[]}]},this.dataSource=new re,this.headers=["Symbol","Dividend Income","Yield on Cost","Dividend Yield","Dividend Yield (TTM)","Dividend Rate","Dividend Rate (TTM)","5Y Avg. Yield","Payout Ratio","FCF Payout Ratio","Last Dividend Paid","Ex-dividend Date","Dividend Date"],this.columnDefs=["symbol","dividendIncome","yieldOnCost","dividendYield","trailingAnnualDividendYield","dividendRate","trailingAnnualDividendRate","fiveYearAvgDividendYield","payoutRatio","freeCashflowPayoutRatio","lastDividendValue","exDividendDate","dividendDate"],this.cells=[e=>"",e=>`$${e.dividendIncome.toFixed(2)}`,e=>`${(e.yieldOnCost*100).toFixed(2)}%`,e=>e.dividendYield?.fmt||(e.dividendYield*100).toFixed(2)+"%",e=>e.trailingAnnualDividendYield?.fmt||"--",e=>"$"+(e.dividendRate?.fmt||e.dividendRate.toFixed(2)),e=>e.trailingAnnualDividendRate?.fmt||"--",e=>e.fiveYearAvgDividendYield?.fmt||"--",e=>e.payoutRatio.toFixed(2)+"%",e=>e.quoteType==="EQUITY"&&e.freeCashflowPayoutRatio!==0?`${(e.freeCashflowPayoutRatio*100).toFixed(2)}%`:"--",e=>e.lastDividendValue?.fmt||"--",e=>{let a=e.calendarEvents?.exDividendDate;return a&&a.raw*1e3>=this.todayDate.valueOf()?new Date(a.fmt).toDateString():"--"},e=>{let a=e.calendarEvents?.dividendDate;return a&&a.raw*1e3>=this.todayDate.valueOf()?new Date(a.fmt).toDateString():"--"}]}ngOnInit(){this.portfolioHoldings=this.dataService.portfolioHoldings,this.dividendIncome=this.portfolioHoldings.dividendIncome,this.portfolioYieldOnCost=this.portfolioHoldings.yieldOnCost,this.dataSource.data=this.dataService.portfolioDividendPayers.map(i=>{let e=this.portfolioHoldings[i.symbol];return this.pieChartData.push({name:i.symbol,value:e.dividendIncome}),I(C(C({},e),i),{regularMarketPrice:i.regularMarketPrice.raw,regularMarketChange:i.regularMarketChange.raw,regularMarketChangePercent:i.regularMarketChangePercent.raw,preMarketPrice:i.preMarketPrice.raw,preMarketChangePercent:i.preMarketChangePercent?.raw||0,postMarketPrice:i.postMarketPrice.raw,postMarketChangePercent:i.postMarketChangePercent?.raw||0,payoutRatio:i.payoutRatio?.raw*100||0})}),this.selectedSymbol=this.dataSource.data[0].symbol,this.setInfoCards(),this.updateChart(this.selectedSymbol,!1)}ngAfterViewInit(){this.dataSource.sort=this.sort}setInfoCards(){this.infoCards=[{value:this.dividendIncome.toFixed(4),valueType:"currency",subtitle:"Projected Annual Income",color:null},{value:(this.dividendIncome/4).toFixed(4),valueType:"currency",subtitle:"Average Quarterly Income",color:null},{value:(this.dividendIncome/12).toFixed(4),valueType:"currency",subtitle:"Average Monthly Income",color:"teal"},{value:(this.dividendIncome/365).toFixed(4),valueType:"currency",subtitle:"Average Daily Income",color:null},{value:this.portfolioYieldOnCost.toFixed(4),valueType:"percentage",subtitle:"Portfolio YOC",color:"teal"}]}updateChart(i,e=!0){let a={title:{text:""},legend:{data:["Dividend $"]},tooltip:{},xAxis:{data:[],splitLine:{show:!1}},yAxis:{},series:[{name:"Dividend $",type:"bar",data:[],emphasis:{focus:"series"},animationDelay:function(c){return c*10}}],animationEasing:"elasticOut",animationDelayUpdate:function(c){return c*5}},r=this.dataSource.data.filter(c=>c.symbol===i)[0],v={name:`${r.symbol} | ${r.shortName}`,series:[]},ce=this.dataService.getTickerDividendHistory(r.symbol);Object.entries(ce).forEach(c=>{v.series.push({name:new Date(c[0].split("-").join(" ")),value:+c[1]}),a.xAxis.data.push(c[0].split("-").join(" ")),a.series[0].data.push(+c[1])}),this.dividendLineChartData=[v],this.selectedSymbol=r.symbol,this.selectedSymbolLabel=`
      ${r.symbol} | 
      ${r.longName} | 
      ${r.profile?.sector||"ETF"} |
      ${r.profile?.industry||"ETF"}
    `,e&&window.scroll({top:0,left:0,behavior:"smooth"})}onSelect(i){this.updateChart(i,!0)}getCellColor(i,e){switch(e){case 8:return i.payoutRatio<80?"teal":"chocolate";case 9:return i.freeCashflowPayoutRatio>0&&i.freeCashflowPayoutRatio<1?"teal":"chocolate";default:return"black"}}};o.\u0275fac=function(e){return new(e||o)($(N))},o.\u0275cmp=E({type:o,selectors:[["portfolio-dividend"]],viewQuery:function(e,a){if(e&1&&(S(_,5),S(h,5)),e&2){let r;P(r=T())&&(a.table=r.first),P(r=T())&&(a.sort=r.first)}},standalone:!0,features:[Y],decls:7,vars:3,consts:[["dividendHistoryRef",""],["dividendTableRef",""],[1,"dividend-cards-container"],["title","Dividend History",3,"mainContentRef"],["title","Dividend Details",3,"mainContentRef"],[3,"value","valueType","subtitle","color"],[1,"add-flex"],[3,"selectedTicker","dividendPayersOnly"],[1,"chart-container","dividend-chart"],[3,"scheme","results","xAxisLabel","showXAxisLabel","showYAxisLabel","xAxis","yAxis","animations","roundEdges"],["mat-table","","matSort","","matSortActive","yieldOnCost","matSortDirection","desc",3,"dataSource"],[3,"matColumnDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[1,"table-col-0"],[3,"ngStyle"],[3,"stock"],[3,"click","ngStyle"],["mat-header-row",""],["mat-row",""]],template:function(e,a){if(e&1&&(f(0,fe,3,0,"section",2)(1,ve,4,13,"ng-template",null,0,F),u(3,"container-card",3),f(4,be,5,4,"ng-template",null,1,F),u(6,"container-card",4)),e&2){let r=R(2),v=R(5);D(a.infoCards?0:-1),l(3),s("mainContentRef",r),l(3),s("mainContentRef",v)}},dependencies:[B,q,de,j,Q,G,h,X,ae,_,K,te,W,z,ie,Z,ee,ne,oe,U,V,J,se,le],styles:["echarts-vertical-bar-chart[_ngcontent-%COMP%]{width:100%}.dividend-cards-container[_ngcontent-%COMP%]{display:flex;align-items:center;flex-wrap:wrap;margin-top:.5rem;margin-bottom:1rem}.safari-charts-container[_ngcontent-%COMP%]{display:flex;align-items:center}.table-col-0[_ngcontent-%COMP%]{display:flex;align-items:center;align-content:center;margin:0;padding:0}td.mat-mdc-cell[_ngcontent-%COMP%]:first-of-type   td.mat-mdc-footer-cell[_ngcontent-%COMP%]:first-of-type{padding-left:0}.mdc-data-table__header-cell[_ngcontent-%COMP%], .mdc-data-table__cell[_ngcontent-%COMP%]{padding:0}.dividend-chart[_ngcontent-%COMP%]{width:100%}.chart-flex[_ngcontent-%COMP%]{display:flex}"]});let t=o;return t})();export{je as a};
