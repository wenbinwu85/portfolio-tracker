import{b as B}from"./chunk-QCOHBRPV.js";import"./chunk-GAVEHVB6.js";import"./chunk-ERBTA6JL.js";import{a as Q}from"./chunk-4HJ2ZKJO.js";import"./chunk-CRMHJAQR.js";import{A as N}from"./chunk-EHSQUHLC.js";import"./chunk-2JUJXOFE.js";import{d as q}from"./chunk-IS3RVH2Q.js";import"./chunk-4GH27PYD.js";import"./chunk-KEVOKD7L.js";import"./chunk-54KGWDDZ.js";import"./chunk-6XHSZSBU.js";import{b as H}from"./chunk-AZ4ILC22.js";import{p as E,r as W,s as I,t as X,x as R}from"./chunk-YEZFZVSE.js";import{f as Y}from"./chunk-GYESSFHN.js";import{e as F}from"./chunk-ITPZWI7Y.js";import{g as V,h as O,m as j}from"./chunk-HRDN5KJF.js";import"./chunk-XYXDOSHV.js";import{b as M}from"./chunk-WUSB5NQB.js";import{$ as C,Cb as T,Ea as f,Ja as o,Oa as u,Ta as s,Tb as S,Ua as l,V as b,Va as n,Za as x,_ as g,ab as y,cb as c,mb as w,md as k,nb as P,nd as L,qa as a,ra as v,sb as A,ub as h,xc as D,zb as _}from"./chunk-NRXSNQ2Q.js";var p=i=>[i];function J(i,m){if(i&1&&n(0,"stock-price-insight",7),i&2){let t=c(2);o("symbol",t.selectedSymbol)}}function K(i,m){if(i&1){let t=x();s(0,"portfolio-ticker-buttons",6),y("selectedTicker",function(r){g(t);let d=c();return C(d.updateSelectedStock(r))}),l(),f(1,J,1,1,"stock-price-insight",7)}if(i&2){let t=c();a(),u(t.selectedSymbol?1:-1)}}function U(i,m){if(i&1&&(s(0,"div",9)(1,"div",8),n(2,"ngx-charts-bar-vertical",10),l(),s(3,"div",8),n(4,"ngx-charts-bar-vertical",10),l()(),n(5,"mat-divider"),s(6,"div",9)(7,"div",8),n(8,"ngx-charts-bar-vertical",11),l(),s(9,"div",8),n(10,"ngx-charts-bar-vertical",11),l()(),n(11,"mat-divider"),s(12,"div",9)(13,"div",8),n(14,"ngx-charts-bar-vertical",12),l(),s(15,"div",8),n(16,"ngx-charts-bar-vertical",12),l()()),i&2){let t=c(2);a(2),o("scheme",t.performanceChartColorScheme)("results",t.fiftyDayMAChartData)("animations",!0)("xAxis",!0)("yAxis",!0)("showXAxisLabel",!0)("showYAxisLabel",!0)("legend",!1)("rotateXAxisTicks",!0)("yAxisLabel","Price vs 50 Day Moving Average %")("yScaleMin",t.fiftyDayMAChartData[0].value-5)("customColors",h(76,p,t.selectedSymbolColor))("roundEdges",!1),a(2),o("scheme",t.performanceChartColorScheme)("results",t.twoHundredDayMAChartData)("animations",!0)("xAxis",!0)("yAxis",!0)("showXAxisLabel",!0)("showYAxisLabel",!0)("legend",!1)("rotateXAxisTicks",!0)("yAxisLabel","Price vs 200 Day Moving Average %")("yScaleMin",t.twoHundredDayMAChartData[0].value-5)("customColors",h(78,p,t.selectedSymbolColor))("roundEdges",!1),a(4),o("scheme",t.fiftyTwoWeekChartColorScheme)("results",t.fiftyTwoWeekLowChartData)("animations",!0)("xAxis",!0)("yAxis",!0)("showXAxisLabel",!0)("showYAxisLabel",!0)("legend",!1)("rotateXAxisTicks",!0)("yAxisLabel","Price above 52 week low %")("customColors",h(80,p,t.selectedSymbolColor))("roundEdges",!1),a(2),o("scheme",t.fiftyTwoWeekChartColorScheme)("results",t.fiftyTwoWeekHighChartData)("animations",!0)("xAxis",!0)("yAxis",!0)("showXAxisLabel",!0)("showYAxisLabel",!0)("legend",!1)("rotateXAxisTicks",!0)("yAxisLabel","Price below 52 week high %")("customColors",h(82,p,t.selectedSymbolColor))("roundEdges",!1),a(4),o("scheme",t.targetPriceChartColorScheme)("results",t.lowTargetPriceData)("animations",!0)("xAxis",!0)("yAxis",!0)("showXAxisLabel",!0)("showYAxisLabel",!0)("legend",!1)("rotateXAxisTicks",!0)("yScaleMin",-5)("yAxisLabel","Price vs low target price %")("customColors",h(84,p,t.selectedSymbolColor))("roundEdges",!1),a(2),o("scheme",t.targetPriceChartColorScheme)("results",t.highTargetPriceData)("animations",!0)("xAxis",!0)("yAxis",!0)("showXAxisLabel",!0)("showYAxisLabel",!0)("legend",!1)("rotateXAxisTicks",!0)("yScaleMin",-5)("yAxisLabel","Price vs high target price %")("customColors",h(86,p,t.selectedSymbolColor))("roundEdges",!1)}}function Z(i,m){if(i&1&&(s(0,"div",8),n(1,"ngx-charts-bar-vertical-2d",13),l()),i&2){let t=c(2);a(),o("results",t.etfPerformanceChartData)("animations",!0)("xAxis",!0)("yAxis",!0)("showXAxisLabel",!0)("showYAxisLabel",!0)("legend",!0)("legendTitle","Tickers")("showDataLabel",!0)("rotateXAxisTicks",!0)("yAxisLabel","ETF Performance %")("roundEdges",!1)}}function $(i,m){if(i&1&&f(0,U,17,88)(1,Z,2,12,"div",8),i&2){let t=c();u(t.selectedPerformanceChart===1?0:-1),a(),u(t.selectedPerformanceChart===2?1:-1)}}function ee(i,m){if(i&1){let t=x();s(0,"mat-chip-option",15),y("click",function(){g(t);let r=c(2);return C(r.changePerformanceChart(1))}),P(1," Stocks "),l()}if(i&2){let t=c(2);o("selected",t.selectedPerformanceChart===1)}}function te(i,m){if(i&1){let t=x();s(0,"mat-chip-option",15),y("click",function(){g(t);let r=c(2);return C(r.changePerformanceChart(2))}),P(1," ETFs "),l()}if(i&2){let t=c(2);o("selected",t.selectedPerformanceChart===2)}}function ie(i,m){if(i&1&&(s(0,"mat-chip-listbox"),f(1,ee,2,1,"mat-chip-option",14)(2,te,2,1,"mat-chip-option",14),l()),i&2){let t=c();a(),u(t.sortedStocks.length>0?1:-1),a(),u(t.sortedEtfs.length>0?2:-1)}}var Ee=(()=>{class i{constructor(t,e){this.dataService=t,this.cdr=e,this.sortedStocks=[],this.sortedEtfs=[],this.sp500FiftyTwoWeekChange=0,this.fiftyTwoWeekChangeChartData=[],this.fiftyTwoWeekLowChartData=[],this.fiftyTwoWeekHighChartData=[],this.meanTargetPriceData=[],this.lowTargetPriceData=[],this.highTargetPriceData=[],this.fiftyDayMAChartData=[],this.twoHundredDayMAChartData=[],this.etfPerformanceChartData=[],this.sp500="S&P 500",this.selectedPerformanceChart=1,this.performanceChartColorScheme={domain:["slategrey"]},this.fiftyTwoWeekChartColorScheme={domain:["slategrey"]},this.targetPriceChartColorScheme={domain:["slategrey"]}}ngOnInit(){this.sortedStocks=this.dataService.portfolioStocks.sort((e,r)=>e["52WeekChange"].raw-r["52WeekChange"].raw),this.sortedEtfs=this.dataService.portfolioEtfs.sort((e,r)=>e.ytdReturn.raw-r.ytdReturn.raw),this.sp500FiftyTwoWeekChange=this.sortedStocks[0].SandP52WeekChange.raw,this.selectedSymbol=this.sortedStocks[0].symbol||this.sortedEtfs[0].symbol,this.selectedStock=this.dataService.getTickerData(this.selectedSymbol),this.selectedSymbolColor={name:this.selectedSymbol,value:"skyblue"},this.sortedStocks.forEach(e=>{this.fiftyDayMAChartData.push({name:e.symbol,value:(e.regularMarketPrice.raw-e.fiftyDayAverage.raw)/e.fiftyDayAverage.raw*100}),this.twoHundredDayMAChartData.push({name:e.symbol,value:(e.regularMarketPrice.raw-e.twoHundredDayAverage.raw)/e.twoHundredDayAverage.raw*100}),this.fiftyTwoWeekChangeChartData.push({name:e.symbol,value:e["52WeekChange"]?.raw*100||0}),this.fiftyTwoWeekLowChartData.push({name:e.symbol,value:(e.regularMarketPrice.raw-e.fiftyTwoWeekLow.raw)/e.fiftyTwoWeekLow.raw*100}),this.fiftyTwoWeekHighChartData.push({name:e.symbol,value:(e.regularMarketPrice.raw-e.fiftyTwoWeekHigh.raw)/e.fiftyTwoWeekHigh.raw*100}),e.targetMeanPrice.raw&&this.meanTargetPriceData.push({name:e.symbol,value:(e.regularMarketPrice.raw-e.targetMeanPrice.raw)/e.targetMeanPrice.raw*100}),e.targetLowPrice.raw&&this.lowTargetPriceData.push({name:e.symbol,value:(e.regularMarketPrice.raw-e.targetLowPrice.raw)/e.targetLowPrice.raw*100}),e.targetHighPrice.raw&&this.highTargetPriceData.push({name:e.symbol,value:(e.regularMarketPrice.raw-e.targetHighPrice.raw)/e.targetHighPrice.raw*100})}),this.fiftyTwoWeekChangeChartData.push({name:this.sp500,value:this.sortedStocks[0].SandP52WeekChange.raw*100}),this.fiftyDayMAChartData.sort((e,r)=>e.value-r.value),this.twoHundredDayMAChartData.sort((e,r)=>e.value-r.value),this.fiftyTwoWeekChangeChartData.sort((e,r)=>e.value-r.value),this.fiftyTwoWeekLowChartData.sort((e,r)=>e.value-r.value),this.fiftyTwoWeekHighChartData.sort((e,r)=>e.value-r.value),this.meanTargetPriceData.sort((e,r)=>e.value-r.value),this.lowTargetPriceData.sort((e,r)=>e.value-r.value),this.highTargetPriceData.sort((e,r)=>e.value-r.value);let t={ytd:"Year to Date",oneMonth:"One Month",threeMonth:"Three Month",oneYear:"One Year",threeYear:"Three Year",fiveYear:"Five Year",tenYear:"Ten Year"};Object.keys(t).forEach(e=>{let r={name:t[e],series:[]};this.sortedEtfs.forEach(d=>{r.series.push({name:d.symbol,value:d.fundPerformance.trailingReturns[e].raw*100})}),this.etfPerformanceChartData.push(r)})}changePerformanceChart(t){this.selectedPerformanceChart=t}updateSelectedStock(t){this.selectedSymbol=null,this.cdr.detectChanges(),this.selectedSymbol=t,this.selectedSymbolColor={name:t,value:"skyblue"},this.selectedStock=[this.dataService.getTickerData(t)],this.selectedStock[0].quoteType==="ETF"?this.changePerformanceChart(2):this.changePerformanceChart(1)}static{this.\u0275fac=function(e){return new(e||i)(v(D),v(T))}}static{this.\u0275cmp=b({type:i,selectors:[["portfolio-price-insights"]],standalone:!0,features:[A],decls:9,vars:4,consts:[["priceInsightsRef",""],["performanceChartsRef",""],["performanceChartsTitleRef",""],[3,"expandWidget"],["title","Price Insights",3,"mainContentRef"],["title","Performance Charts",3,"mainContentRef","titleContentRef"],[3,"selectedTicker"],[3,"symbol"],[1,"chart-container"],[1,"add-flex"],[3,"scheme","results","animations","xAxis","yAxis","showXAxisLabel","showYAxisLabel","legend","rotateXAxisTicks","yAxisLabel","yScaleMin","customColors","roundEdges"],[3,"scheme","results","animations","xAxis","yAxis","showXAxisLabel","showYAxisLabel","legend","rotateXAxisTicks","yAxisLabel","customColors","roundEdges"],[3,"scheme","results","animations","xAxis","yAxis","showXAxisLabel","showYAxisLabel","legend","rotateXAxisTicks","yScaleMin","yAxisLabel","customColors","roundEdges"],[3,"results","animations","xAxis","yAxis","showXAxisLabel","showYAxisLabel","legend","legendTitle","showDataLabel","rotateXAxisTicks","yAxisLabel","roundEdges"],[3,"selected"],[3,"click","selected"]],template:function(e,r){if(e&1&&(n(0,"portfolio-quotes",3),f(1,K,2,1,"ng-template",null,0,_),n(3,"container-card",4),f(4,$,2,2,"ng-template",null,1,_)(6,ie,3,2,"ng-template",null,2,_),n(8,"container-card",5)),e&2){let d=w(2),z=w(5),G=w(7);o("expandWidget",!1),a(3),o("mainContentRef",d),a(5),o("mainContentRef",z)("titleContentRef",G)}},dependencies:[S,R,q,X,I,W,L,k,F,E,M,H,Y,j,V,O,B,Q,N],styles:[".chart-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.etf-chart[_ngcontent-%COMP%]{display:flex;justify-content:center}  ul.legend-labels{width:max-content!important;background:none!important}"]})}}return i})();export{Ee as PortfolioPriceInsightsComponent};
