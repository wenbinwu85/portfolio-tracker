import{b as V,c as q}from"./chunk-YSUEGWGI.js";import{d as M}from"./chunk-XTOROSG2.js";import{d as J}from"./chunk-RSKIEEQE.js";import{$ as j,da as B,ea as R,ia as N,j as E,l as W,q as I,s as F,t as X,u as Y}from"./chunk-3AJZMPWB.js";import{a as T,b as P}from"./chunk-724LR74Q.js";import{g as H}from"./chunk-XFMTSKGO.js";import{a as O}from"./chunk-IB4YU7GS.js";import{Sa as _,Ta as L,i as w,j as D,q as k}from"./chunk-7VATBPOI.js";import{$a as v,$b as u,Bb as o,Cb as r,Db as m,Lb as p,Mb as y,Vb as h,_a as l,_b as b,ac as f,bc as A,cc as S,ja as g,qb as x,sb as n}from"./chunk-RETPHGFO.js";var U=()=>({"padding-right":"1.25rem"}),C=a=>[a],z=()=>["S&P 500"],G=()=>({name:"S&P 500",value:"gold"}),K=(a,s)=>[a,s],Z=()=>({name:"SCHD",value:"deepskyblue"}),$=()=>({name:"VYM",value:"maroon"}),ee=()=>({name:"JEPI",value:"dodgerblue"}),te=(a,s,t)=>[a,s,t];function ie(a,s){if(a&1&&m(0,"stock-price-insight",12),a&2){let t=y();n("symbol",t.selectedSymbol)}}function ae(a,s){if(a&1&&(o(0,"div",1)(1,"div",13),m(2,"ngx-charts-bar-vertical",14),r(),o(3,"div",13),m(4,"ngx-charts-bar-vertical",14),r(),o(5,"div",13),m(6,"ngx-charts-bar-vertical",15),r()()),a&2){let t=y();l(2),n("scheme",t.performanceChartColorScheme)("results",t.fiftyDayMAChartData)("animations",!0)("xAxis",!0)("yAxis",!0)("showXAxisLabel",!0)("showYAxisLabel",!0)("legend",!1)("rotateXAxisTicks",!0)("yAxisLabel","Price vs 50 Day MA %")("yScaleMin",t.fiftyDayMAChartData[0].value-5)("customColors",f(36,C,t.selectedSymbolColor)),l(2),n("scheme",t.performanceChartColorScheme)("results",t.twoHundredDayMAChartData)("animations",!0)("xAxis",!0)("yAxis",!0)("showXAxisLabel",!0)("showYAxisLabel",!0)("legend",!1)("rotateXAxisTicks",!0)("yAxisLabel","Price vs 200 Day MA %")("yScaleMin",t.twoHundredDayMAChartData[0].value-5)("customColors",f(38,C,t.selectedSymbolColor)),l(2),n("scheme",t.performanceChartColorScheme)("results",t.fiftyTwoWeekChangeChartData)("animations",!0)("xAxis",!0)("yAxis",!0)("showXAxisLabel",!0)("showYAxisLabel",!0)("legend",!1)("rotateXAxisTicks",!0)("yAxisLabel","52 Week Change %")("activeEntries",u(40,z))("customColors",A(42,K,t.selectedSymbolColor,u(41,G)))}}function re(a,s){if(a&1&&(o(0,"div",13),m(1,"ngx-charts-bar-vertical-2d",16),r()),a&2){let t=y();l(),n("results",t.etfPerformanceChartData)("animations",!0)("xAxis",!0)("yAxis",!0)("showXAxisLabel",!0)("showYAxisLabel",!0)("legend",!1)("showDataLabel",!0)("rotateXAxisTicks",!0)("yAxisLabel","ETF Performance %")("customColors",S(14,te,u(11,Z),u(12,$),u(13,ee)))}}function oe(a,s){if(a&1&&(o(0,"div",1)(1,"div",13),m(2,"ngx-charts-bar-vertical",17),r(),o(3,"div",13),m(4,"ngx-charts-bar-vertical",17),r(),o(5,"div",13),m(6,"ngx-charts-bar-vertical",18),r()()),a&2){let t=y();l(2),n("scheme",t.fiftyTwoWeekChartColorScheme)("results",t.fiftyTwoWeekLowChartData)("animations",!0)("xAxis",!0)("yAxis",!0)("showXAxisLabel",!0)("showYAxisLabel",!0)("legend",!1)("rotateXAxisTicks",!0)("yAxisLabel","Price % above 52 week low")("customColors",f(34,C,t.selectedSymbolColor)),l(2),n("scheme",t.fiftyTwoWeekChartColorScheme)("results",t.fiftyTwoWeekHighChartData)("animations",!0)("xAxis",!0)("yAxis",!0)("showXAxisLabel",!0)("showYAxisLabel",!0)("legend",!1)("rotateXAxisTicks",!0)("yAxisLabel","Price % below 52 week high")("customColors",f(36,C,t.selectedSymbolColor)),l(2),n("scheme",t.targetPriceChartColorScheme)("results",t.discountChartData)("animations",!0)("xAxis",!0)("yAxis",!0)("showXAxisLabel",!0)("showYAxisLabel",!0)("legend",!1)("rotateXAxisTicks",!0)("yScaleMin",-5)("yAxisLabel","Price % vs mean target price")("customColors",f(38,C,t.selectedSymbolColor))}}var Oe=(()=>{let s=class s{constructor(c){this.dataService=c,this.sortedStocks=[],this.sortedEtfs=[],this.sp500FiftyTwoWeekChange=0,this.fiftyTwoWeekChangeChartData=[],this.fiftyTwoWeekLowChartData=[],this.fiftyTwoWeekHighChartData=[],this.discountChartData=[],this.fiftyDayMAChartData=[],this.twoHundredDayMAChartData=[],this.etfPerformanceChartData=[],this.sp500="S&P 500",this.selectedPerformanceChart=1,this.selectedSymbol="SCHD",this.selectedSymbolColor={name:"SCHD",value:"teal"},this.performanceChartColorScheme={domain:["slategrey"]},this.fiftyTwoWeekChartColorScheme={domain:["slategrey"]},this.targetPriceChartColorScheme={domain:["slategrey"]}}ngOnInit(){this.sortedStocks=Object.values(this.dataService.portfolioData).filter(e=>e.quoteType==="EQUITY").sort((e,i)=>e["52WeekChange"]-i["52WeekChange"]),this.sortedEtfs=Object.values(this.dataService.portfolioData).filter(e=>e.quoteType==="ETF").sort((e,i)=>e.ytdReturn-i.ytdReturn),this.sp500FiftyTwoWeekChange=this.sortedStocks[0].SandP52WeekChange,this.selectedStock=Object.values(this.dataService.portfolioData).filter(e=>e.symbol===this.selectedSymbol)[0],this.sortedStocks.forEach(e=>{this.fiftyTwoWeekChangeChartData.push({name:e.symbol,value:e["52WeekChange"]*100}),this.fiftyTwoWeekLowChartData.push({name:e.symbol,value:(e.regularMarketPrice-e.fiftyTwoWeekLow)/e.fiftyTwoWeekLow*100}),this.fiftyTwoWeekHighChartData.push({name:e.symbol,value:(e.regularMarketPrice-e.fiftyTwoWeekHigh)/e.fiftyTwoWeekHigh*100}),this.discountChartData.push({name:e.symbol,value:(e.regularMarketPrice-e.targetMeanPrice)/e.targetMeanPrice*100}),this.fiftyDayMAChartData.push({name:e.symbol,value:(e.regularMarketPrice-e.fiftyDayAverage)/e.fiftyDayAverage*100}),this.twoHundredDayMAChartData.push({name:e.symbol,value:(e.regularMarketPrice-e.twoHundredDayAverage)/e.twoHundredDayAverage*100})}),this.fiftyTwoWeekChangeChartData.push({name:this.sp500,value:this.sortedStocks[0].SandP52WeekChange*100}),this.fiftyTwoWeekChangeChartData.sort((e,i)=>e.value-i.value),this.fiftyDayMAChartData.sort((e,i)=>e.value-i.value),this.twoHundredDayMAChartData.sort((e,i)=>e.value-i.value),this.fiftyTwoWeekLowChartData.sort((e,i)=>e.value-i.value),this.fiftyTwoWeekHighChartData.sort((e,i)=>e.value-i.value),this.discountChartData.sort((e,i)=>e.value-i.value);let c={ytd:"Year to Date",oneMonth:"One Month",threeMonth:"Three Month",oneYear:"One Year",threeYear:"Three Year",fiveYear:"Five Year",tenYear:"Ten Year"};Object.keys(c).forEach(e=>{let i={name:c[e],series:[]};this.sortedEtfs.forEach(d=>{i.series.push({name:d.symbol,value:d.fundPerformance.trailingReturns[e]*100})}),this.etfPerformanceChartData.push(i)})}refreshData(){this.dataService.updatePortfolioTechnicalInsights()}changePerformanceChart(c){this.selectedPerformanceChart=c}updateSelectedStock(c){this.selectedSymbol=null,setTimeout(()=>{this.selectedSymbolColor={name:c,value:"chocolate"},this.selectedSymbol=c,this.selectedStock=Object.values(this.dataService.portfolioData).filter(e=>e.symbol===this.selectedSymbol)[0]},50)}};s.\u0275fac=function(e){return new(e||s)(v(O))},s.\u0275cmp=g({type:s,selectors:[["portfolio-price-insights"]],standalone:!0,features:[b],decls:27,vars:6,consts:[[1,"add-border"],[1,"add-flex"],[1,"title"],["mat-button","","color","primary",1,"add-margin",3,"click"],[3,"selectedTicker"],[3,"symbol",4,"ngIf"],[1,"chart-header"],[3,"ngStyle"],["selected","",3,"click"],[3,"click"],["class","add-flex",4,"ngIf"],["class","chart-container",4,"ngIf"],[3,"symbol"],[1,"chart-container"],[3,"scheme","results","animations","xAxis","yAxis","showXAxisLabel","showYAxisLabel","legend","rotateXAxisTicks","yAxisLabel","yScaleMin","customColors"],[3,"scheme","results","animations","xAxis","yAxis","showXAxisLabel","showYAxisLabel","legend","rotateXAxisTicks","yAxisLabel","activeEntries","customColors"],[3,"results","animations","xAxis","yAxis","showXAxisLabel","showYAxisLabel","legend","showDataLabel","rotateXAxisTicks","yAxisLabel","customColors"],[3,"scheme","results","animations","xAxis","yAxis","showXAxisLabel","showYAxisLabel","legend","rotateXAxisTicks","yAxisLabel","customColors"],[3,"scheme","results","animations","xAxis","yAxis","showXAxisLabel","showYAxisLabel","legend","rotateXAxisTicks","yScaleMin","yAxisLabel","customColors"]],template:function(e,i){e&1&&(m(0,"stock-price-movement-charts"),o(1,"section",0)(2,"div",1)(3,"div",2)(4,"span"),h(5,"Price Insights"),r()(),o(6,"button",3),p("click",function(){return i.refreshData()}),o(7,"mat-icon"),h(8,"cloud_sync"),r(),o(9,"span"),h(10,"Refresh Technical Insights"),r()()(),o(11,"stock-ticker-buttons",4),p("selectedTicker",function(Q){return i.updateSelectedStock(Q)}),r(),m(12,"mat-divider"),x(13,ie,1,1,"stock-price-insight",5),r(),o(14,"section",0)(15,"div",6)(16,"div",2)(17,"span"),h(18,"Performance Charts"),r()(),o(19,"mat-chip-listbox",7)(20,"mat-chip-option",8),p("click",function(){return i.changePerformanceChart(1)}),h(21,"Stocks"),r(),o(22,"mat-chip-option",9),p("click",function(){return i.changePerformanceChart(2)}),h(23,"ETFs"),r()()(),x(24,ae,7,45,"div",10)(25,re,2,18,"div",11)(26,oe,7,40,"div",10),r()),e&2&&(l(13),n("ngIf",i.selectedSymbol),l(6),n("ngStyle",u(5,U)),l(5),n("ngIf",i.selectedPerformanceChart===1),l(),n("ngIf",i.selectedPerformanceChart===2),l(),n("ngIf",i.selectedPerformanceChart===1))},dependencies:[k,w,D,W,E,Y,X,F,P,T,M,I,L,_,H,J,N,B,R,j,V,q],styles:[".chart-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}"]});let a=s;return a})();export{Oe as a};
