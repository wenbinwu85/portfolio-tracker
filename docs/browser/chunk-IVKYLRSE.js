import{a as ee,b as te,c as ie,d as ae}from"./chunk-63H6MYPZ.js";import{a as P}from"./chunk-Q3Y66XZ6.js";import{a as ne,b as re}from"./chunk-ZOG75TH3.js";import{a as oe,c as se,e as ce,h as le}from"./chunk-KGCF5KC5.js";import{h as v,i as Z}from"./chunk-TFACUFIG.js";import{g as $,h as K,i as z}from"./chunk-DZQDODP3.js";import{p as O,q as Y,r as q}from"./chunk-7TW437ZA.js";import{f as J}from"./chunk-6NO5WZFX.js";import{$b as x,Ab as s,Bb as l,Cb as d,Gb as R,Jb as b,Lb as m,Mc as F,Md as j,Nd as G,Qb as y,Qc as B,Rb as k,Rc as U,Sb as S,Sc as H,Vb as W,Wb as p,Xa as o,Xb as D,Ya as g,Yb as M,Zb as X,bc as E,ec as A,fa as C,fc as N,gc as V,hc as I,na as w,oa as T,ob as _,qb as h,vb as u}from"./chunk-QSIP5JXX.js";var ge=["marketQuotesWidget"],me=(()=>{let n=class n{constructor(a){this.tradingviewService=a}ngOnInit(){this.params={width:"100%",height:this.height,symbolsGroups:[{name:"Portfolio",symbols:this.stockNames}],showSymbolLogo:!0,isTransparent:!1,colorTheme:"light",locale:"en"},this.params=JSON.stringify(this.params)}ngAfterViewInit(){let a=this.tradingviewService.marketQuotesWidget(this.params);this.marketQuotesWidget.nativeElement.append(a)}};n.\u0275fac=function(i){return new(i||n)(g(P))},n.\u0275cmp=C({type:n,selectors:[["tv-market-quotes-widget"]],viewQuery:function(i,r){if(i&1&&y(ge,5),i&2){let c;k(c=S())&&(r.marketQuotesWidget=c.first)}},inputs:{stockNames:"stockNames",height:"height"},standalone:!0,features:[x],decls:2,vars:0,consts:[["marketQuotesWidget",""]],template:function(i,r){i&1&&d(0,"div",null,0)},encapsulation:2});let e=n;return e})();var Ce=["miniChartWidget"],he=(()=>{let n=class n{constructor(a){this.tradingviewService=a,this.width="100%",this.height=200,this.range="12M",this.theme="light"}ngAfterViewInit(){let a=this.tradingviewService.miniChartWidget(this.symbol,this.width,this.height,this.range,this.theme);this.miniChartWidget.nativeElement.appendChild(a)}};n.\u0275fac=function(i){return new(i||n)(g(P))},n.\u0275cmp=C({type:n,selectors:[["tv-mini-chart-widget"]],viewQuery:function(i,r){if(i&1&&y(Ce,5),i&2){let c;k(c=S())&&(r.miniChartWidget=c.first)}},inputs:{symbol:"symbol",width:"width",height:"height",range:"range",theme:"theme"},standalone:!0,features:[x],decls:2,vars:0,consts:[["miniChartWidget",""]],template:function(i,r){i&1&&d(0,"div",null,0)},encapsulation:2});let e=n;return e})();var ue=["tickersWidget"],Ee=(()=>{let n=class n{constructor(a){this.tradingviewService=a,this.symbols=`[
    {
      "title": "S&P 500 Index",
      "proName": "FOREXCOM:SPXUSD"
    },
    {
      "title": "Nasdaq 100",
      "proName": "NASDAQ:NDX"
    },
    {
      "title": "Dow Jones Industrial",
      "proName": "DJI"
    },
    {
      "title": "Bitcoin",
      "proName": "BITSTAMP:BTCUSD"
    },
    {
      "title": "Ethereum",
      "proName": "BITSTAMP:ETHUSD"
    },
    {
      "title": "Dogecoin",
      "proName": "BINANCE:DOGEUSD"
    },
    {
      "title": "USD/RMB",
      "proName": "FX:USDCNH"
    },
    {
      "title": "USD/JPY",
      "proName": "FX:USDJPY"
    },
    {
      "title": "EUR/USD",
      "proName": "FX:EURUSD"
    }
  ]`,this.theme="light",this.displayMode="adaptive"}ngAfterViewInit(){let a=this.tradingviewService.tickersWidget(this.symbols,this.tape,this.displayMode,this.theme);this.tickersWidget.nativeElement.appendChild(a);try{let i=this.tickersWidget.nativeElement.children[1];this.tickersWidget.nativeElement.removeChild(i)}catch{}}};n.\u0275fac=function(i){return new(i||n)(g(P))},n.\u0275cmp=C({type:n,selectors:[["tv-tickers-widget"]],viewQuery:function(i,r){if(i&1&&y(ue,5),i&2){let c;k(c=S())&&(r.tickersWidget=c.first)}},inputs:{symbols:"symbols",tape:"tape",theme:"theme",displayMode:"displayMode"},standalone:!0,features:[x],decls:2,vars:0,consts:[["tickersWidget",""]],template:function(i,r){i&1&&d(0,"div",null,0)},encapsulation:2});let e=n;return e})();var L=e=>({color:e});function xe(e,n){if(e&1){let t=R();s(0,"div",5)(1,"mat-chip-listbox")(2,"mat-chip-option",6),b("click",function(){w(t);let i=m();return T(i.displayChart(1))}),p(3,"Today's Change"),l(),s(4,"mat-chip-option",7),b("click",function(){w(t);let i=m();return T(i.displayChart(2))}),p(5,"Beta"),l()()()}}function fe(e,n){if(e&1&&(s(0,"div",5)(1,"span"),p(2,"Regular Market "),l(),s(3,"mat-icon"),p(4,"schedule"),l(),s(5,"span",9),p(6),A(7,"currency"),l(),s(8,"span",9),p(9),A(10,"percent"),l()()),e&2){let t=m(3);o(5),h("ngStyle",E(9,L,t.getDayPriceChangeColor())),o(),M(" ",N(7,4,t.priceChange)," "),o(2),h("ngStyle",E(11,L,t.getDayPriceChangeColor())),o(),M(" (",V(10,6,t.priceChange/t.portfolioMarketValue,".4"),") ")}}function ve(e,n){if(e&1&&(s(0,"div",5)(1,"span"),p(2),l(),s(3,"mat-icon"),p(4),l(),s(5,"span",9),p(6),A(7,"currency"),l(),s(8,"span",9),p(9),A(10,"percent"),l()()),e&2){let t=m(3);o(2),D(t.prePostHourText),o(2),D(t.prePostHourIcon),o(),h("ngStyle",E(11,L,t.getPrePostPriceChangeColor())),o(),M(" ",N(7,6,t.prePostPriceChange)," "),o(2),h("ngStyle",E(13,L,t.getPrePostPriceChangeColor())),o(),M(" (",V(10,8,t.prePostPriceChange/t.portfolioMarketValue,".4"),") ")}}function _e(e,n){if(e&1){let t=R();s(0,"mat-slide-toggle",10),b("toggleChange",function(){w(t);let i=m(3);return T(i.changeChart())}),s(1,"span"),p(2),l()()}if(e&2){let t=m(3);o(2),D(t.chartConfigs.preMarket.toggleText)}}function ye(e,n){if(e&1){let t=R();s(0,"mat-slide-toggle",10),b("toggleChange",function(){w(t);let i=m(3);return T(i.changeChart())}),s(1,"span"),p(2),l()()}if(e&2){let t=m(3);o(2),D(t.chartConfigs.postMarket.toggleText)}}function ke(e,n){if(e&1&&(s(0,"div",8),_(1,fe,11,13,"div",5)(2,ve,11,15,"div",5)(3,_e,3,1,"mat-slide-toggle")(4,ye,3,1,"mat-slide-toggle"),l()),e&2){let t=m(2);o(),u(t.prefix.startsWith("pre")?-1:1),o(),u(t.prefix.startsWith("regular")?-1:2),o(),u(t.prefix.startsWith("pre")?3:-1),o(),u(t.prefix.startsWith("post")?4:-1)}}function Se(e,n){if(e&1&&_(0,ke,5,4,"div",8),e&2){let t=m();u(t.marketState!=="CLOSED"?0:-1)}}function Me(e,n){if(e&1&&(d(0,"tv-mini-chart-widget",16)(1,"mat-divider",17),s(2,"span"),p(3),l(),s(4,"span"),p(5),l()),e&2){let t=n.model,a=m(3);h("symbol",t.name)("theme","dark"),o(3),X("",a.chartConfigs[a.prefix].text," : ",t.name," "),o(2),M("",t.value.toFixed(2),"%")}}function Pe(e,n){if(e&1&&(s(0,"div",5)(1,"div",13)(2,"ngx-charts-bar-vertical",14),_(3,Me,6,5,"ng-template",null,3,I),l()(),s(5,"div",13),d(6,"ngx-charts-bar-vertical-stacked",15),l()()),e&2){let t=m(2);o(2),h("results",t.priceChangeChartData)("xAxis",!0)("yAxis",!0)("showXAxisLabel",!0)("showYAxisLabel",!0)("rotateXAxisTicks",!0)("animations",!0)("showDataLabel",!0)("yAxisLabel","Price Change %")("customColors",t.getPriceChangeChartColor),o(4),h("scheme",t.priceRangeColorScheme)("results",t.priceRangeChartData)("xAxis",!0)("yAxis",!0)("showXAxisLabel",!0)("showYAxisLabel",!0)("rotateXAxisTicks",!0)("animations",!0)("yAxisLabel","Market Day Price Range $")}}function we(e,n){if(e&1&&(s(0,"div",5)(1,"div",13),d(2,"ngx-charts-bar-vertical",18),l()()),e&2){let t=m(2);o(2),h("scheme",t.betaColorScheme)("schemeType",t.scaleType.Linear)("results",t.betaChartData)("xAxis",!0)("yAxis",!0)("showXAxisLabel",!0)("showYAxisLabel",!0)("rotateXAxisTicks",!0)("animations",!0)("yAxisLabel","Beta")}}function Te(e,n){if(e&1&&(_(0,Pe,7,19,"div",5)(1,we,3,10,"div",5),s(2,"mat-expansion-panel",11)(3,"mat-expansion-panel-header")(4,"mat-panel-title")(5,"mat-icon"),p(6,"price_change"),l(),s(7,"span"),p(8,"Live Quotes"),l()()(),d(9,"tv-market-quotes-widget",12),l()),e&2){let t=m();u(t.selectedChart===1?0:-1),o(),u(t.selectedChart===2?1:-1),o(),h("expanded",t.expandWidget),o(7),h("stockNames",t.stockNames)("height",410)}}var et=(()=>{let n=class n{constructor(a,i){this.dataService=a,this.helper=i,this.showTickers=!0,this.priceChange=0,this.prePostPriceChange=0,this.priceChangeChartData=[],this.priceRangeChartData=[],this.betaChartData=[],this.stockNames=[],this.priceRangeColorScheme={domain:["steelblue","skyblue"]},this.betaColorScheme={domain:["palevioletred"]},this.scaleType=oe,this.selectedChart=1,this.toggleChecked=!1,this.portfolioMarketValue=0,this.chartConfigs={preMarket:{text:"Pre Market",toggleText:"Pre Market Chart",priceChange:"preMarketChange",priceChangePercent:"preMarketChangePercent"},postMarket:{text:"Post Market",toggleText:"Post Market Chart",priceChange:"postMarketChange",priceChangePercent:"postMarketChangePercent"},regularMarket:{text:"Regular Market"}},this.marketState="",this.getPriceChangeChartColor=r=>{let c=this.toggleChecked?this.chartConfigs[this.prefix]?.priceChangePercent:"regularMarketChangePercent";return this.dataService.portfolioData[r][c].raw>0?v.Gain:v.Lost}}ngOnInit(){this.marketState=this.dataService.marketState,this.prefix=this.helper.getPriceKeyPrefix(),this.portfolioMarketValue=this.dataService.portfolioHoldings.marketValue,this.prePostHourIcon=this.prefix.startsWith("pre")?"sunny":"bedtime",this.prePostHourText=this.prefix.startsWith("pre")?"Pre Market ":"Post Market ",this.dataService.portfolioSymbols.forEach(a=>{let i=this.dataService.portfolioHoldings[a],r=this.dataService.portfolioData[a];if(this.stockNames.push({name:r.symbol,displayName:`${r.longName} - ${r.profile.sector||r.quoteType} - ${r.symbol}`}),this.priceChange+=r.regularMarketChange.raw*i.shares,this.priceChangeChartData.push({name:r.symbol,value:r.regularMarketChangePercent.raw*100}),this.priceChangeChartData.sort((c,f)=>c.value-f.value),this.priceRangeChartData.push({name:r.symbol,series:[{name:"Price -> Day Low Range",value:r.regularMarketPrice.raw-r.regularMarketDayLow.raw},{name:"Price -> Day High Range",value:r.regularMarketDayHigh.raw-r.regularMarketPrice.raw}]}),this.priceRangeChartData.sort((c,f)=>c.series[0].value+c.series[1].value-(f.series[0].value+f.series[1].value)),!this.prefix.startsWith("regular")){let c=this.chartConfigs[this.prefix].priceChange;r[c]&&(this.prePostPriceChange+=r[c].raw*i.shares)}r.quoteType==="EQUITY"&&r.beta.raw&&this.betaChartData.push({name:r.symbol,value:r.beta.raw||0})}),this.stockNames.sort((a,i)=>{let r=this.dataService.portfolioData[a.name].regularMarketChangePercent.raw,c=this.dataService.portfolioData[i.name].regularMarketChangePercent.raw;return r-c}),this.betaChartData.sort((a,i)=>a.value-i.value)}getDayPriceChangeColor(){return this.priceChange>0?v.Gain:v.Lost}getPrePostPriceChangeColor(){return this.prePostPriceChange>0?v.Gain:v.Lost}displayChart(a){this.selectedChart=a}changeChart(){this.toggleChecked=!this.toggleChecked;let a=this.toggleChecked?this.prefix+"ChangePercent":"regularMarketChangePercent";this.priceChangeChartData=[],this.dataService.portfolioSymbols?.forEach(i=>{let r=this.dataService.portfolioData[i];r[a].raw&&this.priceChangeChartData.push({name:r.symbol,value:r[a].raw*100})}),this.priceChangeChartData.sort((i,r)=>i.value-r.value)}};n.\u0275fac=function(i){return new(i||n)(g(O),g(Z))},n.\u0275cmp=C({type:n,selectors:[["stock-price-movement-charts"]],inputs:{showTickers:"showTickers",expandWidget:"expandWidget"},standalone:!0,features:[x],decls:7,vars:3,consts:[["titleContentRef",""],["subContentRef",""],["ValueChangeRef",""],["tooltipTemplate",""],["title","Portfolio Price Change",3,"titleContentRef","subContentRef","mainContentRef"],[1,"add-flex"],["selected","",3,"click"],[3,"click"],[1,"subcontent-wrapper"],[3,"ngStyle"],[3,"toggleChange"],[3,"expanded"],[3,"stockNames","height"],[1,"chart-container"],[3,"results","xAxis","yAxis","showXAxisLabel","showYAxisLabel","rotateXAxisTicks","animations","showDataLabel","yAxisLabel","customColors"],[3,"scheme","results","xAxis","yAxis","showXAxisLabel","showYAxisLabel","rotateXAxisTicks","animations","yAxisLabel"],[3,"symbol","theme"],[2,"margin","none","border-top-color","slategrey"],[3,"scheme","schemeType","results","xAxis","yAxis","showXAxisLabel","showYAxisLabel","rotateXAxisTicks","animations","yAxisLabel"]],template:function(i,r){if(i&1&&(_(0,xe,6,0,"ng-template",null,0,I)(2,Se,1,1,"ng-template",null,1,I)(4,Te,10,5,"ng-template",null,2,I),d(6,"container-card",4)),i&2){let c=W(1),f=W(3),de=W(5);o(6),h("titleContentRef",c)("subContentRef",f)("mainContentRef",de)}},dependencies:[H,F,B,U,J,z,K,$,G,j,ae,ee,te,ie,q,Y,re,ne,le,se,ce,me,he],styles:[".subcontent-wrapper[_ngcontent-%COMP%]{display:flex;align-content:center!important;align-items:center;margin-top:.5rem;font-size:1.25rem}.subcontent-wrapper[_ngcontent-%COMP%]   .add-flex[_ngcontent-%COMP%]{margin-right:1rem}  .mat-expansion-panel-body{padding:0!important}"]});let e=n;return e})();export{Ee as a,et as b};
