import{b as U}from"./chunk-AQP3GDMJ.js";import{d as I}from"./chunk-PDHJK7NQ.js";import{d as q}from"./chunk-7KBG2QR5.js";import{c as R,d as $,h as B}from"./chunk-HNALET22.js";import{A as G}from"./chunk-DQODAM45.js";import{d as z,f as J}from"./chunk-MN64ZHLJ.js";import{b as Q}from"./chunk-CK7T7BX7.js";import{e as X,f as Y,g as H,h as O}from"./chunk-JJRYLBXA.js";import{a as V,b as j}from"./chunk-WB7PLXYS.js";import{a as N}from"./chunk-67B52VIS.js";import{Sa as W,Ta as F,h as T,i as M,j as L,q as E}from"./chunk-AZ6TNXQN.js";import{$a as w,$b as p,Ab as r,Bb as a,Cb as m,Gb as S,Kb as f,Lb as h,Ub as u,Va as b,Vb as A,Zb as P,_a as n,_b as d,ac as k,bc as D,ja as _,pb as C,rb as c,ta as x,ua as v}from"./chunk-Z2OYXGZW.js";var K=()=>({"padding-right":"1.25rem"}),g=i=>[i],Z=()=>["S&P 500"],ee=()=>({name:"S&P 500",value:"gold"}),te=(i,s)=>[i,s],ie=()=>({name:"SCHD",value:"deepskyblue"}),oe=()=>({name:"VYM",value:"maroon"}),re=()=>({name:"JEPI",value:"dodgerblue"}),ae=(i,s,o)=>[i,s,o];function ne(i,s){if(i&1){let o=S();r(0,"button",15),f("click",function(){let e=x(o).$implicit,t=h();return v(t.updateSelectedStock(e.symbol))}),m(1,"img",16),r(2,"div"),u(3),a()()}if(i&2){let o=s.$implicit,l=h();n(),c("src",l.getLogoSource(o),b),n(2),A(o.symbol)}}function se(i,s){if(i&1){let o=S();r(0,"button",15),f("click",function(){let e=x(o).$implicit,t=h();return v(t.updateSelectedStock(e.symbol))}),m(1,"img",16),r(2,"div"),u(3),a()()}if(i&2){let o=s.$implicit,l=h();n(),c("src",l.getLogoSource(o),b),n(2),A(o.symbol)}}function le(i,s){if(i&1&&(r(0,"div"),m(1,"stock-price-insight",17),a()),i&2){let o=h();n(),c("symbol",o.selectedSymbol)}}function ce(i,s){if(i&1&&(r(0,"div",12),m(1,"ngx-charts-bar-vertical",18),a()),i&2){let o=h();n(),c("scheme",o.performanceChartColorScheme)("results",o.fiftyDayMAChartData)("animations",!0)("xAxis",!0)("yAxis",!0)("showXAxisLabel",!0)("showYAxisLabel",!0)("legend",!1)("rotateXAxisTicks",!0)("yAxisLabel","Price vs 50 Day MA %")("yScaleMin",o.fiftyDayMAChartData[0].value-5)("customColors",p(12,g,o.selectedSymbolColor))}}function me(i,s){if(i&1&&(r(0,"div",12),m(1,"ngx-charts-bar-vertical",18),a()),i&2){let o=h();n(),c("scheme",o.performanceChartColorScheme)("results",o.twoHundredDayMAChartData)("animations",!0)("xAxis",!0)("yAxis",!0)("showXAxisLabel",!0)("showYAxisLabel",!0)("legend",!1)("rotateXAxisTicks",!0)("yAxisLabel","Price vs 200 Day MA %")("yScaleMin",o.twoHundredDayMAChartData[0].value-5)("customColors",p(12,g,o.selectedSymbolColor))}}function he(i,s){if(i&1&&(r(0,"div",12),m(1,"ngx-charts-bar-vertical",19),a()),i&2){let o=h();n(),c("scheme",o.performanceChartColorScheme)("results",o.fiftyTwoWeekChangeChartData)("animations",!0)("xAxis",!0)("yAxis",!0)("showXAxisLabel",!0)("showYAxisLabel",!0)("legend",!1)("rotateXAxisTicks",!0)("yAxisLabel","52 Week Change %")("activeEntries",d(12,Z))("customColors",k(14,te,o.selectedSymbolColor,d(13,ee)))}}function ue(i,s){if(i&1&&(r(0,"div",12),m(1,"ngx-charts-bar-vertical-2d",20),a()),i&2){let o=h();n(),c("results",o.etfPerformanceChartData)("animations",!0)("xAxis",!0)("yAxis",!0)("showXAxisLabel",!0)("showYAxisLabel",!0)("legend",!1)("showDataLabel",!0)("rotateXAxisTicks",!0)("yAxisLabel","ETF Performance %")("customColors",D(14,ae,d(11,ie),d(12,oe),d(13,re)))}}var Ne=(()=>{let s=class s{constructor(l){this.dataService=l,this.sortedStocks=[],this.sortedEtfs=[],this.sp500FiftyTwoWeekChange=0,this.fiftyTwoWeekChangeChartData=[],this.fiftyTwoWeekLowChartData=[],this.fiftyTwoWeekHighChartData=[],this.discountChartData=[],this.fiftyDayMAChartData=[],this.twoHundredDayMAChartData=[],this.etfPerformanceChartData=[],this.sp500="S&P 500",this.selectedPerformanceChart=1,this.selectedSymbol="SCHD",this.selectedSymbolColor={name:"SCHD",value:"teal"},this.performanceChartColorScheme={domain:["slategrey"]},this.fiftyTwoWeekChartColorScheme={domain:["slategrey"]},this.targetPriceChartColorScheme={domain:["slategrey"]}}ngOnInit(){this.sortedStocks=Object.values(this.dataService.portfolioData).filter(e=>e.quoteType==="EQUITY").sort((e,t)=>e["52WeekChange"]-t["52WeekChange"]),this.sortedEtfs=Object.values(this.dataService.portfolioData).filter(e=>e.quoteType==="ETF").sort((e,t)=>e.ytdReturn-t.ytdReturn),this.sp500FiftyTwoWeekChange=this.sortedStocks[0].SandP52WeekChange,this.selectedStock=Object.values(this.dataService.portfolioData).filter(e=>e.symbol===this.selectedSymbol)[0],this.sortedStocks.forEach(e=>{this.fiftyTwoWeekChangeChartData.push({name:e.symbol,value:e["52WeekChange"]*100}),this.fiftyTwoWeekLowChartData.push({name:e.symbol,value:(e.regularMarketPrice-e.fiftyTwoWeekLow)/e.fiftyTwoWeekLow*100}),this.fiftyTwoWeekHighChartData.push({name:e.symbol,value:(e.regularMarketPrice-e.fiftyTwoWeekHigh)/e.fiftyTwoWeekHigh*100}),this.discountChartData.push({name:e.symbol,value:(e.regularMarketPrice-e.targetMeanPrice)/e.targetMeanPrice*100}),this.fiftyDayMAChartData.push({name:e.symbol,value:(e.regularMarketPrice-e.fiftyDayAverage)/e.fiftyDayAverage*100}),this.twoHundredDayMAChartData.push({name:e.symbol,value:(e.regularMarketPrice-e.twoHundredDayAverage)/e.twoHundredDayAverage*100})}),this.fiftyTwoWeekChangeChartData.push({name:this.sp500,value:this.sortedStocks[0].SandP52WeekChange*100}),this.fiftyTwoWeekChangeChartData.sort((e,t)=>e.value-t.value),this.fiftyDayMAChartData.sort((e,t)=>e.value-t.value),this.twoHundredDayMAChartData.sort((e,t)=>e.value-t.value),this.fiftyTwoWeekLowChartData.sort((e,t)=>e.value-t.value),this.fiftyTwoWeekHighChartData.sort((e,t)=>e.value-t.value),this.discountChartData.sort((e,t)=>e.value-t.value);let l={ytd:"Year to Date",oneMonth:"One Month",threeMonth:"Three Month",oneYear:"One Year",threeYear:"Three Year",fiveYear:"Five Year",tenYear:"Ten Year"};Object.keys(l).forEach(e=>{let t={name:l[e],series:[]};this.sortedEtfs.forEach(y=>{t.series.push({name:y.symbol,value:y.fundPerformance.trailingReturns[e]*100})}),this.etfPerformanceChartData.push(t)})}refreshData(){this.dataService.updatePortfolioTechnicalInsights()}changePerformanceChart(l){this.selectedPerformanceChart=l}getLogoSource(l){return`/assets/ticker-logos/${l.symbol}.png`}updateSelectedStock(l){this.selectedSymbol=null,setTimeout(()=>{this.selectedSymbolColor={name:l,value:"chocolate"},this.selectedSymbol=l,this.selectedStock=Object.values(this.dataService.portfolioData).filter(e=>e.symbol===this.selectedSymbol)[0]},50)}};s.\u0275fac=function(e){return new(e||s)(w(N))},s.\u0275cmp=_({type:s,selectors:[["portfolio-price-insights"]],standalone:!0,features:[P],decls:42,vars:49,consts:[[1,"add-border"],[1,"add-flex"],[1,"title"],["mat-button","","extended","","color","primary",1,"refresh-button",3,"click"],[1,"logos-container"],["mat-button","","class","ticker-button",3,"click",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"chart-header"],[3,"ngStyle"],["selected","",3,"click"],[3,"click"],["class","chart-container",4,"ngIf"],[1,"chart-container"],[3,"scheme","results","animations","xAxis","yAxis","showXAxisLabel","showYAxisLabel","legend","rotateXAxisTicks","yAxisLabel","customColors"],[3,"scheme","results","animations","xAxis","yAxis","showXAxisLabel","showYAxisLabel","legend","rotateXAxisTicks","yScaleMin","yAxisLabel","customColors"],["mat-button","",1,"ticker-button",3,"click"],["alt","Logo","width","auto","height","35",3,"src"],[3,"symbol"],[3,"scheme","results","animations","xAxis","yAxis","showXAxisLabel","showYAxisLabel","legend","rotateXAxisTicks","yAxisLabel","yScaleMin","customColors"],[3,"scheme","results","animations","xAxis","yAxis","showXAxisLabel","showYAxisLabel","legend","rotateXAxisTicks","yAxisLabel","activeEntries","customColors"],[3,"results","animations","xAxis","yAxis","showXAxisLabel","showYAxisLabel","legend","showDataLabel","rotateXAxisTicks","yAxisLabel","customColors"]],template:function(e,t){e&1&&(m(0,"stock-price-movement-charts"),r(1,"section",0)(2,"div",1)(3,"div",2),u(4,"Price Insights"),a(),r(5,"button",3),f("click",function(){return t.refreshData()}),r(6,"mat-icon"),u(7,"cloud_sync"),a(),r(8,"span"),u(9,"Refresh Technical Insights"),a()()(),r(10,"div",4),C(11,ne,4,2,"button",5)(12,se,4,2,"button",5),a(),m(13,"mat-divider"),C(14,le,2,1,"div",6),a(),r(15,"section",0)(16,"div",7)(17,"div",2)(18,"span"),u(19,"Performance"),a()(),r(20,"mat-chip-listbox",8)(21,"mat-chip-option",9),f("click",function(){return t.changePerformanceChart(1)}),u(22,"Moving Averages"),a(),r(23,"mat-chip-option",10),f("click",function(){return t.changePerformanceChart(2)}),u(24,"ETFs Performance"),a()()(),r(25,"div",1),C(26,ce,2,14,"div",11)(27,me,2,14,"div",11)(28,he,2,17,"div",11),a(),C(29,ue,2,18,"div",11),a(),r(30,"section",0)(31,"div",7)(32,"div",2)(33,"span"),u(34,"Price vs 52 Week & Analyst Target"),a()()(),r(35,"div",1)(36,"div",12),m(37,"ngx-charts-bar-vertical",13),a(),r(38,"div",12),m(39,"ngx-charts-bar-vertical",13),a(),r(40,"div",12),m(41,"ngx-charts-bar-vertical",14),a()()()),e&2&&(n(11),c("ngForOf",t.sortedStocks),n(),c("ngForOf",t.sortedEtfs),n(2),c("ngIf",t.selectedSymbol),n(6),c("ngStyle",d(42,K)),n(6),c("ngIf",t.selectedPerformanceChart===1),n(),c("ngIf",t.selectedPerformanceChart===1),n(),c("ngIf",t.selectedPerformanceChart===1),n(),c("ngIf",t.selectedPerformanceChart===2),n(8),c("scheme",t.fiftyTwoWeekChartColorScheme)("results",t.fiftyTwoWeekLowChartData)("animations",!0)("xAxis",!0)("yAxis",!0)("showXAxisLabel",!0)("showYAxisLabel",!0)("legend",!1)("rotateXAxisTicks",!0)("yAxisLabel","Price % above 52 week low")("customColors",p(43,g,t.selectedSymbolColor)),n(2),c("scheme",t.fiftyTwoWeekChartColorScheme)("results",t.fiftyTwoWeekHighChartData)("animations",!0)("xAxis",!0)("yAxis",!0)("showXAxisLabel",!0)("showYAxisLabel",!0)("legend",!1)("rotateXAxisTicks",!0)("yAxisLabel","Price % below 52 week high")("customColors",p(45,g,t.selectedSymbolColor)),n(2),c("scheme",t.targetPriceChartColorScheme)("results",t.discountChartData)("animations",!0)("xAxis",!0)("yAxis",!0)("showXAxisLabel",!0)("showYAxisLabel",!0)("legend",!1)("rotateXAxisTicks",!0)("yScaleMin",-5)("yAxisLabel","Price % vs mean target price")("customColors",p(47,g,t.selectedSymbolColor)))},dependencies:[E,T,M,L,J,z,O,H,Y,j,V,I,X,F,W,Q,q,B,R,$,U,G],styles:[".chart-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.logos-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;margin:0 1rem 1rem}.ticker-button[_ngcontent-%COMP%]{align-items:center;height:5rem}.refresh-button[_ngcontent-%COMP%]{margin-right:1rem}"]});let i=s;return i})();export{Ne as a};
