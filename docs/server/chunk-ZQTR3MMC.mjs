import './polyfills.server.mjs';
import{a as ce}from"./chunk-NLAW3IBM.mjs";import{f as ee,g as te,i as ie,m as ne}from"./chunk-RB4SQSSO.mjs";import{a as b}from"./chunk-SIHOXT3Z.mjs";import{a as $,b as z,c as K,d as Z}from"./chunk-BQ7K5W33.mjs";import{a as se,b as le}from"./chunk-AGRCXGH2.mjs";import{a as q,b as Y}from"./chunk-5VKVYCBP.mjs";import{m as J,n as G,o as j,u as x,v as oe,x as re}from"./chunk-PS5NKWHF.mjs";import{Q as U,R as H,T as ae}from"./chunk-BOYX4EOR.mjs";import{$a as r,Bb as A,Db as Q,Eb as I,Fb as V,Gb as M,La as y,Qa as m,T as C,Va as g,Z as _,_ as v,_a as o,ab as h,eb as W,hb as k,hc as F,jb as c,lc as X,mc as B,nc as O,ob as w,pb as S,qb as P,tb as D,ub as l,vb as E,wa as a,wb as T,xa as d,xb as L,zb as f}from"./chunk-IN6CXG4C.mjs";var ue=["miniChartWidget"],me=(()=>{class t{constructor(e){this.tradingviewService=e,this.width="100%",this.height=200,this.range="12M",this.theme="light"}ngAfterViewInit(){this.params={symbol:this.symbol,dateRange:this.range,width:this.width,height:this.height,colorTheme:this.theme,autosize:!0,trendLineColor:"rgba(41, 98, 255, 1)",underLineColor:"rgba(41, 98, 255, 0.3)",underLineBottomColor:"rgba(41, 98, 255, 0)",isTransparent:!0,locale:"en"},this.params=JSON.stringify(this.params);let e=this.tradingviewService.miniChartWidget(this.params);this.miniChartWidget.nativeElement.appendChild(e)}static{this.\u0275fac=function(n){return new(n||t)(d(b))}}static{this.\u0275cmp=C({type:t,selectors:[["tv-mini-chart-widget"]],viewQuery:function(n,i){if(n&1&&w(ue,5),n&2){let s;S(s=P())&&(i.miniChartWidget=s.first)}},inputs:{symbol:"symbol",width:"width",height:"height",range:"range",theme:"theme"},standalone:!0,features:[f],decls:2,vars:0,consts:[["miniChartWidget",""]],template:function(n,i){n&1&&h(0,"div",null,0)},encapsulation:2})}}return t})();var Ce=["marketQuotesWidget"],he=(()=>{class t{constructor(e){this.tradingviewService=e}ngAfterViewInit(){this.params={width:"100%",height:this.height,symbolsGroups:[{name:"Portfolio",symbols:this.stockNames}],showSymbolLogo:!0,isTransparent:!1,colorTheme:"light",locale:"en"},this.params=JSON.stringify(this.params);let e=this.tradingviewService.marketQuotesWidget(this.params);this.marketQuotesWidget.nativeElement.append(e)}static{this.\u0275fac=function(n){return new(n||t)(d(b))}}static{this.\u0275cmp=C({type:t,selectors:[["tv-market-quotes-widget"]],viewQuery:function(n,i){if(n&1&&w(Ce,5),n&2){let s;S(s=P())&&(i.marketQuotesWidget=s.first)}},inputs:{stockNames:"stockNames",height:"height"},standalone:!0,features:[f],decls:2,vars:0,consts:[["marketQuotesWidget",""]],template:function(n,i){n&1&&h(0,"div",null,0)},encapsulation:2})}}return t})();var fe=["tickersWidget"],We=(()=>{class t{constructor(e){this.tradingviewService=e,this.theme="light",this.displayMode="adaptive"}ngAfterViewInit(){this.symbols||(this.symbols=[{title:"S&P 500 Index",proName:"FOREXCOM:SPXUSD"},{title:"Nasdaq 100",proName:"NASDAQ:NDX"},{title:"Dow Jones Industrial",proName:"DJI"},{title:"Bitcoin",proName:"BITSTAMP:BTCUSD"},{title:"Ethereum",proName:"BITSTAMP:ETHUSD"},{title:"Dogecoin",proName:"BINANCE:DOGEUSD"},{title:"USD/RMB",proName:"FX:USDCNH"},{title:"USD/JPY",proName:"FX:USDJPY"},{title:"EUR/USD",proName:"FX:EURUSD"}]),this.params={symbols:this.symbols,displayMode:this.displayMode,colorTheme:this.theme,isTransparent:!1,showSymbolLogo:!0,locale:"en"},this.params=JSON.stringify(this.params);let e=this.tradingviewService.tickersWidget(this.params,this.tape);this.tickersWidget.nativeElement.appendChild(e);try{let n=this.tickersWidget.nativeElement.children[1];this.tickersWidget.nativeElement.removeChild(n)}catch{}}static{this.\u0275fac=function(n){return new(n||t)(d(b))}}static{this.\u0275cmp=C({type:t,selectors:[["tv-tickers-widget"]],viewQuery:function(n,i){if(n&1&&w(fe,5),n&2){let s;S(s=P())&&(i.tickersWidget=s.first)}},inputs:{symbols:"symbols",tape:"tape",theme:"theme",displayMode:"displayMode"},standalone:!0,features:[f],decls:2,vars:0,consts:[["tickersWidget",""]],template:function(n,i){n&1&&h(0,"div",null,0)},encapsulation:2})}}return t})();var R=t=>({color:t});function xe(t,p){if(t&1){let e=W();o(0,"div",6)(1,"mat-chip-listbox")(2,"mat-chip-option",7),k("click",function(){_(e);let i=c();return v(i.displayChart(1))}),l(3,"Price Changes"),r(),o(4,"mat-chip-option",8),k("click",function(){_(e);let i=c();return v(i.displayChart(2))}),l(5,"Beta"),r(),o(6,"mat-chip-option",8),k("click",function(){_(e);let i=c();return v(i.displayChart(3))}),l(7,"VIX"),r()()()}}function _e(t,p){if(t&1&&(o(0,"div",6)(1,"span"),l(2,"Regular Market "),r(),o(3,"mat-icon"),l(4,"schedule"),r(),o(5,"span",10),l(6),Q(7,"currency"),r(),o(8,"span",10),l(9),Q(10,"percent"),r()()),t&2){let e=c(3);a(5),m("ngStyle",A(9,R,e.getDayPriceChangeColor())),a(),T(" ",I(7,4,e.priceChange)," "),a(2),m("ngStyle",A(11,R,e.getDayPriceChangeColor())),a(),T(" (",V(10,6,e.priceChange/e.portfolioMarketValue,".4"),") ")}}function ve(t,p){if(t&1&&(o(0,"div",6)(1,"span"),l(2),r(),o(3,"mat-icon"),l(4),r(),o(5,"span",10),l(6),Q(7,"currency"),r(),o(8,"span",10),l(9),Q(10,"percent"),r()()),t&2){let e=c(3);a(2),E(e.prePostHourText),a(2),E(e.prePostHourIcon),a(),m("ngStyle",A(11,R,e.getPrePostPriceChangeColor())),a(),T(" ",I(7,6,e.prePostPriceChange)," "),a(2),m("ngStyle",A(13,R,e.getPrePostPriceChangeColor())),a(),T(" (",V(10,8,e.prePostPriceChange/e.portfolioMarketValue,".4"),") ")}}function ye(t,p){if(t&1){let e=W();o(0,"mat-slide-toggle",11),k("toggleChange",function(){_(e);let i=c(3);return v(i.changeChart())}),o(1,"span"),l(2),r()()}if(t&2){let e=c(3);a(2),E(e.chartConfigs.preMarket.toggleText)}}function ke(t,p){if(t&1){let e=W();o(0,"mat-slide-toggle",11),k("toggleChange",function(){_(e);let i=c(3);return v(i.changeChart())}),o(1,"span"),l(2),r()()}if(t&2){let e=c(3);a(2),E(e.chartConfigs.postMarket.toggleText)}}function we(t,p){if(t&1&&(o(0,"div",9),y(1,_e,11,13,"div",6)(2,ve,11,15,"div",6)(3,ye,3,1,"mat-slide-toggle")(4,ke,3,1,"mat-slide-toggle"),r()),t&2){let e=c(2);a(),g(e.prefix.startsWith("pre")?-1:1),a(),g(e.prefix.startsWith("regular")?-1:2),a(),g(e.prefix.startsWith("pre")?3:-1),a(),g(e.prefix.startsWith("post")?4:-1)}}function Se(t,p){if(t&1&&y(0,we,5,4,"div",9),t&2){let e=c();g(e.marketState!=="CLOSED"?0:-1)}}function Pe(t,p){if(t&1&&(h(0,"tv-mini-chart-widget",18)(1,"mat-divider",19),o(2,"span"),l(3),r(),o(4,"span"),l(5),r()),t&2){let e=p.model,n=c(3);m("symbol",e.name)("theme","dark"),a(3),L("",n.chartConfigs[n.prefix].text," : ",e.name," "),a(2),T("",e.value.toFixed(2),"%")}}function Te(t,p){if(t&1&&(o(0,"div",6)(1,"div",15)(2,"ngx-charts-bar-vertical",16),y(3,Pe,6,5,"ng-template",null,4,M),r()(),o(5,"div",15),h(6,"ngx-charts-bar-vertical-stacked",17),r()()),t&2){let e=c(2);a(2),m("results",e.priceChangeChartData)("xAxis",!0)("yAxis",!0)("showXAxisLabel",!0)("showYAxisLabel",!0)("rotateXAxisTicks",!0)("animations",!0)("showDataLabel",!0)("yAxisLabel","Price Change %")("customColors",e.getPriceChangeChartColor)("roundEdges",!1),a(4),m("scheme",e.priceRangeColorScheme)("results",e.priceRangeChartData)("xAxis",!0)("yAxis",!0)("showXAxisLabel",!0)("showYAxisLabel",!0)("rotateXAxisTicks",!0)("animations",!0)("yAxisLabel","Market Day Price Range $")}}function Me(t,p){if(t&1&&(o(0,"div",6)(1,"div",15),h(2,"ngx-charts-bar-vertical",20),r()()),t&2){let e=c(2);a(2),m("results",e.betaChartData)("xAxis",!0)("yAxis",!0)("showXAxisLabel",!0)("showYAxisLabel",!0)("rotateXAxisTicks",!0)("animations",!0)("yAxisLabel","Beta")("roundEdges",!1)("customColors",e.getBetaColor)}}function be(t,p){t&1&&h(0,"tv-symbol-overview-widget",12),t&2&&m("company","VIX Volatility")("symbol","VANTAGE:VIX")("timeFrame","1m")}function De(t,p){if(t&1&&(y(0,Te,7,20,"div",6)(1,Me,3,10,"div",6)(2,be,1,3,"tv-symbol-overview-widget",12),o(3,"mat-expansion-panel",13)(4,"mat-expansion-panel-header")(5,"mat-panel-title")(6,"mat-icon"),l(7,"price_change"),r(),o(8,"span"),l(9,"Quotes"),r()()(),h(10,"tv-market-quotes-widget",14),r()),t&2){let e=c();g(e.selectedChart===1?0:-1),a(),g(e.selectedChart===2?1:-1),a(),g(e.selectedChart===3?2:-1),a(),m("expanded",e.expandWidget),a(7),m("stockNames",e.stockNames)("height",e.stockNames.length*35+100)}}function Ee(t,p){t&1&&(o(0,"div",21)(1,"a",22)(2,"span",23),l(3,"Track all markets on TradingView"),r()()())}var at=(()=>{class t{constructor(e,n){this.dataService=e,this.helper=n,this.showTickers=!0,this.priceChange=0,this.prePostPriceChange=0,this.priceChangeChartData=[],this.priceRangeChartData=[],this.betaChartData=[],this.stockNames=[],this.priceRangeColorScheme={domain:["steelblue","skyblue"]},this.betaColorScheme={domain:["slategrey"]},this.scaleType=ee,this.selectedChart=1,this.toggleChecked=!1,this.portfolioMarketValue=0,this.chartConfigs={preMarket:{text:"Pre Market",toggleText:"Pre Market Chart",priceChange:"preMarketChange",priceChangePercent:"preMarketChangePercent"},postMarket:{text:"Post Market",toggleText:"Post Market Chart",priceChange:"postMarketChange",priceChangePercent:"postMarketChangePercent"},regularMarket:{text:"Regular Market"}},this.marketState="",this.getPriceChangeChartColor=i=>{let s=this.toggleChecked?this.chartConfigs[this.prefix]?.priceChangePercent:"regularMarketChangePercent";return this.dataService.getTickerData(i)[s].raw>0?x.Gain:x.Lost},this.getBetaColor=i=>(this.dataService.getTickerData(i).beta?.raw||0)>1?"chocolate":"slategrey"}ngOnInit(){this.marketState=this.dataService.marketState,this.prefix=this.helper.getPriceKeyPrefix(),this.portfolioMarketValue=this.dataService.portfolioHoldings.marketValue,this.prePostHourIcon=this.prefix.startsWith("pre")?"sunny":"bedtime",this.prePostHourText=this.prefix.startsWith("pre")?"Pre Market ":"Post Market ",this.dataService.portfolioSymbols.forEach(e=>{let n=this.dataService.getTickerHolding(e),i=this.dataService.getTickerData(e);if(this.stockNames.push({name:i.symbol,displayName:`${i.symbol} - ${i.longName}`}),this.priceChange+=i.regularMarketChange.raw*n.shares,this.priceChangeChartData.push({name:i.symbol,value:i.regularMarketChangePercent.raw*100}),this.priceChangeChartData.sort((s,u)=>s.value-u.value),this.priceRangeChartData.push({name:i.symbol,series:[{name:"Price -> Day Low Range",value:i.regularMarketPrice.raw-i.regularMarketDayLow.raw},{name:"Price -> Day High Range",value:i.regularMarketDayHigh.raw-i.regularMarketPrice.raw}]}),this.priceRangeChartData.sort((s,u)=>s.series[0].value+s.series[1].value-(u.series[0].value+u.series[1].value)),!this.prefix.startsWith("regular")){let s=this.chartConfigs[this.prefix].priceChange;i[s]&&(this.prePostPriceChange+=i[s].raw*n.shares)}i.quoteType==="EQUITY"&&i.beta.raw&&this.betaChartData.push({name:i.symbol,value:i.beta.raw||0})}),this.stockNames.sort((e,n)=>{let i=this.dataService.portfolioData[e.name].regularMarketChangePercent.raw,s=this.dataService.portfolioData[n.name].regularMarketChangePercent.raw;return i-s}),this.betaChartData.sort((e,n)=>e.value-n.value)}getDayPriceChangeColor(){return this.priceChange>0?x.Gain:x.Lost}getPrePostPriceChangeColor(){return this.prePostPriceChange>0?x.Gain:x.Lost}displayChart(e){this.selectedChart=e}changeChart(){this.toggleChecked=!this.toggleChecked;let e=this.toggleChecked?this.prefix+"ChangePercent":"regularMarketChangePercent";this.priceChangeChartData=[],this.dataService.portfolioSymbols?.forEach(n=>{let i=this.dataService.getTickerData(n);i[e].raw&&this.priceChangeChartData.push({name:i.symbol,value:i[e].raw*100})}),this.priceChangeChartData.sort((n,i)=>n.value-i.value)}static{this.\u0275fac=function(n){return new(n||t)(d(ae),d(oe))}}static{this.\u0275cmp=C({type:t,selectors:[["portfolio-quotes"]],inputs:{showTickers:"showTickers",expandWidget:"expandWidget"},standalone:!0,features:[f],decls:9,vars:4,consts:[["titleContentRef",""],["subtitleContentRef",""],["ValueChangeRef",""],["quotesFooterRef",""],["tooltipTemplate",""],["title","Portfolio Quotes",3,"titleContentRef","subtitleContentRef","mainContentRef","footerContentRef"],[1,"add-flex"],["selected","",3,"click"],[3,"click"],[1,"subcontent-wrapper"],[3,"ngStyle"],[3,"toggleChange"],[3,"company","symbol","timeFrame"],[3,"expanded"],[3,"stockNames","height"],[1,"chart-container"],[3,"results","xAxis","yAxis","showXAxisLabel","showYAxisLabel","rotateXAxisTicks","animations","showDataLabel","yAxisLabel","customColors","roundEdges"],[3,"scheme","results","xAxis","yAxis","showXAxisLabel","showYAxisLabel","rotateXAxisTicks","animations","yAxisLabel"],[3,"symbol","theme"],[2,"margin","none","border-top-color","slategrey"],[3,"results","xAxis","yAxis","showXAxisLabel","showYAxisLabel","rotateXAxisTicks","animations","yAxisLabel","roundEdges","customColors"],[1,"tradingview-widget-copyright"],["href","https://www.tradingview.com/markets/#indices","rel","noopener nofollow","target","_blank"],[1,"blue-text"]],template:function(n,i){if(n&1&&(y(0,xe,8,0,"ng-template",null,0,M)(2,Se,1,1,"ng-template",null,1,M)(4,De,11,6,"ng-template",null,2,M)(6,Ee,4,0,"ng-template",null,3,M),h(8,"container-card",5)),n&2){let s=D(1),u=D(3),de=D(5),ge=D(7);a(8),m("titleContentRef",s)("subtitleContentRef",u)("mainContentRef",de)("footerContentRef",i.expandWidget||i.selectedChart===3?ge:void 0)}},dependencies:[O,F,X,B,re,j,G,J,H,U,Z,$,z,K,Y,q,le,se,ne,te,ie,he,me,ce],styles:[".subcontent-wrapper[_ngcontent-%COMP%]{display:flex;align-content:center!important;align-items:center;margin-top:.5rem;font-size:1.25rem}.subcontent-wrapper[_ngcontent-%COMP%]   .add-flex[_ngcontent-%COMP%]{margin-right:1rem}  .mat-expansion-panel{margin-top:1rem!important}  .mat-expansion-panel-body{padding:0!important}"]})}}return t})();export{We as a,at as b};
