import './polyfills.server.mjs';
import{A as ue,a as O,b as ee,c as te,d as R,e as ie,f as oe,h as ne,i as re,k as ae,l as de,n as le,o as se,q as ce,s as me,t as pe}from"./chunk-74BPTCHK.mjs";import{a as U,c as M}from"./chunk-JCKFE25Y.mjs";import{i as K,k as Z}from"./chunk-4U2W2J3I.mjs";import{g as G,m as W}from"./chunk-PUHVCV6S.mjs";import{a as k}from"./chunk-WH26ZMPB.mjs";import{b as J}from"./chunk-NHRQIPYS.mjs";import{f as z}from"./chunk-4SLHYVSE.mjs";import{b as X}from"./chunk-M4WS6G5C.mjs";import{$b as H,Ab as j,Bb as _,Cb as C,Db as l,Eb as c,Fb as f,Jb as y,Mb as x,Ob as a,Tb as P,Ub as I,Vb as A,Yb as $,Za as d,Zb as g,Zc as q,_a as D,_b as Y,cc as T,ec as Q,fa as w,kc as L,na as v,oa as h,rb as u,tb as m,ua as B,ub as N,yb as b,zb as E}from"./chunk-TD7VU5IN.mjs";import{a as F,b as V}from"./chunk-5XUXGTUW.mjs";function Ce(i,n){if(i&1){let o=y();l(0,"button",2),x("click",function(){let e=v(o).$implicit,r=a();return h(r.emitSelectedTicker(e.symbol))}),l(1,"div"),g(2),c()()}if(i&2){let o=n.$implicit;d(2),Y(o.symbol)}}function ye(i,n){if(i&1){let o=y();l(0,"button",2),x("click",function(){let e=v(o).$implicit,r=a(2);return h(r.emitSelectedTicker(e.symbol))}),l(1,"div"),g(2),c()()}if(i&2){let o=n.$implicit;d(2),Y(o.symbol)}}function xe(i,n){if(i&1&&_(0,ye,3,1,"button",1,E),i&2){let o=a();C(o.sortedEtfs)}}var fe=(()=>{let n=class n{constructor(t,e){this.dataService=t,this.helperService=e,this.showETF=!0,this.selectedTicker=new B,this.sortedStocks=[],this.sortedEtfs=[]}ngOnInit(){this.sortedStocks=Object.values(this.dataService.portfolioData).filter(t=>t.quoteType==="EQUITY").sort((t,e)=>t["52WeekChange"].raw-e["52WeekChange"].raw),this.sortedEtfs=Object.values(this.dataService.portfolioData).filter(t=>t.quoteType==="ETF").sort((t,e)=>t.ytdReturn.raw-e.ytdReturn.raw)}emitSelectedTicker(t){this.selectedTicker.emit(t)}};n.\u0275fac=function(e){return new(e||n)(D(k),D(K))},n.\u0275cmp=w({type:n,selectors:[["stock-ticker-buttons"]],inputs:{showETF:"showETF"},outputs:{selectedTicker:"selectedTicker"},standalone:!0,features:[T],decls:4,vars:1,consts:[[1,"logos-container"],["mat-button","",1,"ticker-button"],["mat-button","",1,"ticker-button",3,"click"]],template:function(e,r){e&1&&(l(0,"div",0),_(1,Ce,3,1,"button",1,E),u(3,xe,2,0),c()),e&2&&(d(),C(r.sortedStocks),d(2),b(r.showETF?3:-1))},dependencies:[M,U],styles:[".logos-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;margin:0 0rem 1rem}.ticker-button[_ngcontent-%COMP%]{align-items:center;height:2rem;border:1px solid ghostwhite}.ticker-button[_ngcontent-%COMP%]:hover{border:1px solid slategrey;border-left:.3rem solid slategrey}"]});let i=n;return i})();var ge=(i,n)=>n.value,De=i=>({color:i});function be(i,n){if(i&1&&f(0,"info-card",5),i&2){let o=n.$implicit;m("value",o.value)("valueType",o.valueType)("subtitle",o.subtitle)("color",o.color)}}function Se(i,n){if(i&1&&(l(0,"section",2),_(1,be,1,4,"info-card",5,ge),c()),i&2){let o=a();d(),C(o.infoCards)}}function we(i,n){if(i&1){let o=y();l(0,"div",6)(1,"stock-ticker-buttons",7),x("selectedTicker",function(e){v(o);let r=a();return h(r.onSelect(e))}),c(),l(2,"div",8),f(3,"ngx-charts-area-chart",9),c()()}if(i&2){let o=a();N("flex-direction","column"),d(3),m("scheme",o.dividendChartColorScheme)("results",o.dividendLineChartData)("xAxisLabel",o.selectedSymbolLabel)("yAxisLabel","Dividend Rate")("showXAxisLabel",!0)("showYAxisLabel",!0)("xAxis",!0)("yAxis",!0)("autoScale",!0)("animations",!0)("gradient",!0)("yScaleMin",0)}}function Te(i,n){if(i&1&&(l(0,"th",16),g(1),c()),i&2){let o=a().$index,t=a(2);d(),H(" ",t.headers[o]," ")}}function Me(i,n){if(i&1&&(l(0,"div",18),f(1,"stock-name-card",20),c()),i&2){let o=a().$implicit;d(),m("stock",o)}}function ke(i,n){if(i&1){let o=y();l(0,"span",21),x("click",function(){v(o);let e=a().$implicit,r=a(3);return h(r.updateChart(e.symbol))}),g(1),c()}if(i&2){let o=a().$implicit,t=a().$index,e=a(2);m("ngStyle",Q(2,De,e.getCellColor(o,t))),d(),H(" ",e.cells[t](o)," ")}}function Oe(i,n){if(i&1&&(l(0,"td",17),u(1,Me,2,1,"div",18)(2,ke,2,4,"span",19),c()),i&2){let o=a().$index;d(),b(o===0?1:2)}}function Re(i,n){if(i&1&&(l(0,"div",11),u(1,Te,2,1,"th",14)(2,Oe,3,1,"td",15),c()),i&2){let o=n.$implicit;m("matColumnDef",o)}}function Fe(i,n){i&1&&f(0,"tr",22)}function Ee(i,n){i&1&&f(0,"tr",23)}function Pe(i,n){if(i&1&&(l(0,"table",10),_(1,Re,3,1,"div",11,j),u(3,Fe,1,0,"tr",12)(4,Ee,1,0,"tr",13),c()),i&2){let o=a();m("dataSource",o.dataSource),d(),C(o.columnDefs),d(2),m("matHeaderRowDef",o.columnDefs)("matHeaderRowDefSticky",!0),d(),m("matRowDefColumns",o.columnDefs)}}var rt=(()=>{let n=class n{constructor(t){this.dataService=t,this.monthStrings=["January","February","March","April","May","June","July","August","September","October","November","December"],this.browser="",this.todayDate=new Date,this.dividendIncome=0,this.portfolioYieldOnCost=0,this.selectedSymbolLabel="",this.infoCards=[],this.dividendLineChartData=[],this.dividendChartColorScheme={domain:["steelblue"]},this.currentMonth=new Date().getMonth(),this.pieChartData=[],this.echartUpdateOptions={yAxis:{},xAxis:{data:[]},series:[{data:[]}]},this.dataSource=new pe,this.headers=["Symbol","Dividend Income","Yield on Cost","Dividend Rate","Dividend Rate (TTM)","Dividend Yield","Dividend Yield (TTM)","5Y Avg. Yield","Payout Ratio","FCF Payout Ratio","Last Dividend Paid","Ex-dividend Date","Dividend Date"],this.columnDefs=["symbol","dividendIncome","yieldOnCost","dividendRate","trailingAnnualDividendRate","dividendYield","trailingAnnualDividendYield","fiveYearAvgDividendYield","payoutRatio","freeCashflowPayoutRatio","lastDividendValue","exDividendDate","dividendDate"],this.cells=[e=>"",e=>`$${e.dividendIncome.toFixed(2)}`,e=>`${(e.yieldOnCost*100).toFixed(2)}%`,e=>"$"+(e.dividendRate?.fmt||e.dividendRate.toFixed(2)),e=>e.trailingAnnualDividendRate?.fmt||"--",e=>e.dividendYield?.fmt||(e.dividendYield*100).toFixed(2)+"%",e=>e.trailingAnnualDividendYield?.fmt||"--",e=>e.fiveYearAvgDividendYield?.fmt||"--",e=>e.payoutRatio.toFixed(2)+"%",e=>e.quoteType==="EQUITY"&&e.freeCashflowPayoutRatio!==0?`${(e.freeCashflowPayoutRatio*100).toFixed(2)}%`:"--",e=>e.lastDividendValue?.fmt||"--",e=>{let r=e.calendarEvents?.exDividendDate;return r&&r.raw*1e3>=this.todayDate.valueOf()?new Date(r.fmt).toDateString():"--"},e=>{let r=e.calendarEvents?.dividendDate;return r&&r.raw*1e3>=this.todayDate.valueOf()?new Date(r.fmt).toDateString():"--"}]}ngOnInit(){this.portfolioHoldings=this.dataService.portfolioHoldings,this.portfolioData=this.dataService.portfolioData,this.dataSource.data=this.dataService.portfolioDataArray.filter(t=>t.dividendYield?.raw>0||t.dividendYield>0).map(t=>V(F(F({},this.portfolioHoldings[t.symbol]),t),{payoutRatio:t.payoutRatio?.raw*100||0})),this.selectedSymbol=this.dataSource.data[0].symbol,this.dataSource.data.forEach(t=>{this.pieChartData.push({name:t.symbol,value:t.dividendIncome})}),this.dividendIncome=this.portfolioHoldings.dividendIncome,this.portfolioYieldOnCost=this.portfolioHoldings.yieldOnCost,this.browser=this.getBrowserName(),this.setInfoCards(),this.updateChart(this.selectedSymbol,!1)}ngAfterViewInit(){this.dataSource.sort=this.sort}getBrowserName(){let t=window?.navigator.userAgent.toLowerCase();return t.indexOf("edge")>-1?"Microsoft Edge":t.indexOf("edg")>-1?"Chromium-based Edge":t.indexOf("opr")>-1?"Opera":t.indexOf("chrome")>-1?"Chrome":t.indexOf("trident")>-1?"Internet Explorer":t.indexOf("firefox")>-1?"Firefox":t.indexOf("safari")>-1?"Safari":"other"}setInfoCards(){this.infoCards=[{value:this.dividendIncome.toFixed(4),valueType:"currency",subtitle:"Projected Annual Income",color:null},{value:(this.dividendIncome/4).toFixed(4),valueType:"currency",subtitle:"Average Quarterly Income",color:null},{value:(this.dividendIncome/12).toFixed(4),valueType:"currency",subtitle:"Average Monthly Income",color:"teal"},{value:(this.dividendIncome/365).toFixed(4),valueType:"currency",subtitle:"Average Daily Income",color:null},{value:this.portfolioYieldOnCost.toFixed(4),valueType:"percentage",subtitle:"Portfolio YOC",color:"teal"}]}updateChart(t,e=!0){let r={title:{text:""},legend:{data:["Dividend $"]},tooltip:{},xAxis:{data:[],splitLine:{show:!1}},yAxis:{},series:[{name:"Dividend $",type:"bar",data:[],emphasis:{focus:"series"},animationDelay:function(p){return p*10}}],animationEasing:"elasticOut",animationDelayUpdate:function(p){return p*5}},s=this.dataSource.data.filter(p=>p.symbol===t)[0],S={name:`${s.symbol} | ${s.shortName}`,series:[]},ve=this.dataService.portfolioDividendHistory[s.symbol];Object.entries(ve).forEach(p=>{S.series.push({name:new Date(p[0].split("-").join(" ")),value:+p[1]}),r.xAxis.data.push(p[0].split("-").join(" ")),r.series[0].data.push(+p[1])}),this.echartOptions=r,this.dividendLineChartData=[S],this.selectedSymbol=s.symbol,this.selectedSymbolLabel=`
      ${s.symbol} | 
      ${s.longName} | 
      ${s.profile?.sector||"ETF"} |
      ${s.profile?.industry||"ETF"}
    `}onSelect(t){this.updateChart(t)}getCellColor(t,e){switch(e){case 8:return t.payoutRatio<80?"teal":"chocolate";case 9:return t.freeCashflowPayoutRatio>0&&t.freeCashflowPayoutRatio<1?"teal":"chocolate";default:return"black"}}};n.\u0275fac=function(e){return new(e||n)(D(k))},n.\u0275cmp=w({type:n,selectors:[["portfolio-dividend"]],viewQuery:function(e,r){if(e&1&&(P(R,5),P(O,5)),e&2){let s;I(s=A())&&(r.table=s.first),I(s=A())&&(r.sort=s.first)}},standalone:!0,features:[T],decls:7,vars:3,consts:[["dividendHistoryRef",""],["dividendTableRef",""],[1,"dividend-cards-container"],["title","Dividend History",3,"mainContentRef"],["title","Dividend Details",3,"mainContentRef"],[3,"value","valueType","subtitle","color"],[1,"add-flex"],[3,"selectedTicker"],[1,"chart-container","dividend-chart"],[3,"scheme","results","xAxisLabel","yAxisLabel","showXAxisLabel","showYAxisLabel","xAxis","yAxis","autoScale","animations","gradient","yScaleMin"],["mat-table","","matSort","","matSortActive","yieldOnCost","matSortDirection","desc",3,"dataSource"],[3,"matColumnDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[1,"table-col-0"],[3,"ngStyle"],[3,"stock"],[3,"click","ngStyle"],["mat-header-row",""],["mat-row",""]],template:function(e,r){if(e&1&&(u(0,Se,3,0,"section",2)(1,we,4,14,"ng-template",null,0,L),f(3,"container-card",3),u(4,Pe,5,4,"ng-template",null,1,L),f(6,"container-card",4)),e&2){let s=$(2),S=$(5);b(r.infoCards?0:-1),d(3),m("mainContentRef",s),d(3),m("mainContentRef",S)}},dependencies:[z,Z,M,X,J,te,O,ee,me,R,oe,de,ne,ie,le,re,ae,se,ce,W,q,G,ue,fe],styles:["echarts-vertical-bar-chart[_ngcontent-%COMP%]{width:100%}.dividend-cards-container[_ngcontent-%COMP%]{display:flex;align-items:center;flex-wrap:wrap;margin-top:.5rem;margin-bottom:1rem}.safari-charts-container[_ngcontent-%COMP%]{display:flex;align-items:center}.table-col-0[_ngcontent-%COMP%]{display:flex;align-items:center;align-content:center;margin:0;padding:0}td.mat-mdc-cell[_ngcontent-%COMP%]:first-of-type   td.mat-mdc-footer-cell[_ngcontent-%COMP%]:first-of-type{padding-left:0}.mdc-data-table__header-cell[_ngcontent-%COMP%], .mdc-data-table__cell[_ngcontent-%COMP%]{padding:0}.dividend-chart[_ngcontent-%COMP%]{width:100%}.chart-flex[_ngcontent-%COMP%]{display:flex}"]});let i=n;return i})();export{fe as a,rt as b};
