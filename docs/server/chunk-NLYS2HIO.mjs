import './polyfills.server.mjs';
import{a as h,b as I,c as A,d as x,e as q,f as B,h as z,i as V,k as N,l as j,n as J,o as K,q as L,s as U,t as W,y as X}from"./chunk-NJNTDEBH.mjs";import{x as Q}from"./chunk-PS5NKWHF.mjs";import{R as G,T as O}from"./chunk-BOYX4EOR.mjs";import{$a as s,Bb as b,Db as Y,Eb as k,Gb as E,La as p,Qa as m,T as F,Va as f,Xa as P,Ya as R,Za as w,_a as c,ab as d,hc as $,jb as o,mc as H,ob as y,pb as v,qb as M,tb as S,ub as _,vb as u,wa as l,xa as T,zb as D}from"./chunk-IN6CXG4C.mjs";import{a as C,b as g}from"./chunk-5XUXGTUW.mjs";var ee=t=>({color:t});function te(t,a){if(t&1&&(c(0,"th",10)(1,"span"),_(2),s()()),t&2){let n=o().$index,r=o(2);l(2),u(r.headers[n])}}function ne(t,a){if(t&1&&(c(0,"div",12),d(1,"stock-name-card",14),s()),t&2){let n=o().$implicit;l(),m("stock",n)}}function re(t,a){if(t&1&&(c(0,"span",13),_(1),s()),t&2){let n=o().$implicit,r=o(),e=r.$implicit,i=r.$index,Z=o(2);m("ngStyle",b(2,ee,Z.getCellColor(i,n))),l(),u(n[e])}}function ae(t,a){if(t&1&&(c(0,"td",11),p(1,ne,2,1,"div",12)(2,re,2,4,"span",13),s()),t&2){let n=o().$index;l(),f(n===0?1:2)}}function ie(t,a){if(t&1&&(c(0,"div",5),p(1,te,3,1,"th",8)(2,ae,3,1,"td",9),s()),t&2){let n=a.$implicit;m("matColumnDef",n)}}function oe(t,a){t&1&&d(0,"tr",15)}function le(t,a){t&1&&d(0,"tr",16)}function me(t,a){if(t&1&&(c(0,"table",4),R(1,ie,3,1,"div",5,P),p(3,oe,1,0,"tr",6)(4,le,1,0,"tr",7),s()),t&2){let n=o();m("dataSource",n.dataSource),l(),w(n.columnDefs),l(2),m("matHeaderRowDef",n.columnDefs)("matHeaderRowDefSticky",!0),l(),m("matRowDefColumns",n.columnDefs)}}function ce(t,a){if(t&1&&(c(0,"th",19)(1,"span"),_(2),s()()),t&2){let n=o().$index,r=o(2);l(2),u(r.etfHeaders[n])}}function se(t,a){if(t&1&&(c(0,"div",12),d(1,"stock-name-card",14),s()),t&2){let n=o().$implicit;l(),m("stock",n)}}function pe(t,a){if(t&1&&(c(0,"span"),_(1),s()),t&2){let n=o(2).$implicit,r=o().$implicit;l(),u(n[r])}}function de(t,a){if(t&1&&(c(0,"span"),_(1),Y(2,"currency"),s()),t&2){let n=o(2).$implicit,r=o().$implicit;l(),u(k(2,1,n[r]))}}function fe(t,a){if(t&1&&p(0,pe,2,1,"span")(1,de,3,3,"span"),t&2){let n=o(2).$index;f(n<13?0:-1),l(),f(n===13?1:-1)}}function _e(t,a){if(t&1&&(c(0,"td",11),p(1,se,2,1,"div",12)(2,fe,2,2),s()),t&2){let n=o().$index;l(),f(n===0?1:2)}}function ue(t,a){if(t&1&&(c(0,"div",5),p(1,ce,3,1,"th",18)(2,_e,3,1,"td",9),s()),t&2){let n=a.$implicit;m("matColumnDef",n)}}function Ce(t,a){t&1&&d(0,"tr",15)}function he(t,a){t&1&&d(0,"tr",16)}function xe(t,a){if(t&1&&(c(0,"table",17),R(1,ue,3,1,"div",5,P),p(3,Ce,1,0,"tr",6)(4,he,1,0,"tr",7),s()),t&2){let n=o();m("dataSource",n.sortedEtfs),l(),w(n.etfColumnDefs),l(2),m("matHeaderRowDef",n.etfColumnDefs)("matHeaderRowDefSticky",!0),l(),m("matRowDefColumns",n.etfColumnDefs)}}function ge(t,a){if(t&1&&d(0,"container-card",3),t&2){o();let n=S(4);m("mainContentRef",n)}}var De=(()=>{class t{constructor(n){this.dataService=n,this.dataSource=new W,this.sortedEtfs=[],this.headers=["Symbol","Debt To Equity (MRQ)","Current Ratio (MRQ)","Earnings Growth (QOQ) %","Quarterly Revenue Growth (YOY) %","Profit Margins %","Forward PE","Forward EPS","PEG Ratio","Total Cash / Share","Revenue / Share","FCF Yield","FCF / Share","Return On Assets %","Return On Equity %","EV / EBITDA","EV / Revenue"],this.columnDefs=["symbol","debtToEquity","currentRatio","earningsGrowth","revenueGrowth","profitMargins","forwardPE","forwardEps","pegRatio","totalCashPerShare","revenuePerShare","freeCashflowYield","freeCashflowPerShare","returnOnAssets","returnOnEquity","enterpriseToEbitda","enterpriseToRevenue"],this.etfHeaders=["Symbol","Expense Ratio","Nav Price","Trailing PE","YTD Return","1 Month Return","3 month Return","1 Year Return","3 Year Return","5 year Return","10 Year return","3Y Beta","Total Assets"],this.etfColumnDefs=["symbol","annualReportExpenseRatio","navPrice","trailingPE","ytdReturn","1monthReturn","3monthReturn","1YearReturn","threeYearReturn","fiveYearReturn","tenYearReturn","beta3Year","totalAssets"]}ngOnInit(){let n=this.dataService.portfolioStocks,r=this.dataService.portfolioEtfs;this.dataSource.data=n.map(e=>{let i=this.dataService.portfolioHoldings[e.symbol];return g(C(C({},e),i),{symbol:e.symbol,debtToEquity:(e.debtToEquity.raw/100).toFixed(2)||0,currentRatio:e.currentRatio.fmt||0,earningsGrowth:+e.earningsQuarterlyGrowth.fmt?.replace("%","")||0,revenueGrowth:+e.revenueGrowth.fmt?.replace("%","")||0,profitMargins:+e.profitMargins.fmt?.replace("%","")||0,forwardPE:e.forwardPE.fmt||0,forwardEps:e.forwardEps.fmt||0,pegRatio:e.pegRatio.fmt||0,totalCashPerShare:e.totalCashPerShare.fmt||0,revenuePerShare:e.revenuePerShare.fmt||0,freeCashflowYield:+(e.freeCashflowYield*100).toFixed(2)||0,freeCashflowPerShare:+e.freeCashflowPerShare.toFixed(2)||0,returnOnAssets:+e.returnOnAssets.fmt?.replace("%","")||0,returnOnEquity:+e.returnOnEquity.fmt?.replace("%","")||0,enterpriseToEbitda:e.enterpriseToEbitda.fmt||0,enterpriseToRevenue:e.enterpriseToRevenue.fmt||0,regularMarketPrice:e.regularMarketPrice?.raw,regularMarketChange:e.regularMarketChange?.raw,regularMarketChangePercent:e.regularMarketChangePercent?.raw,preMarketPrice:e.preMarketPrice?.raw,preMarketChangePercent:e.preMarketChangePercent?.raw||0,postMarketPrice:e.postMarketPrice?.raw,postMarketChangePercent:e.postMarketChangePercent?.raw||0})}).sort((e,i)=>e.unrealizedGainPercent-i.unrealizedGainPercent),this.sortedEtfs=r.map(e=>{let i=this.dataService.portfolioHoldings[e.symbol];return g(C(C({},e),i),{symbol:e.symbol,annualReportExpenseRatio:e.profile.feesExpensesInvestment.annualReportExpenseRatio.fmt,navPrice:e.navPrice.fmt,trailingPE:e.trailingPE.fmt,ytdReturn:e.fundPerformance.trailingReturns.ytd.fmt,"1monthReturn":e.fundPerformance.trailingReturns.oneMonth.fmt,"3monthReturn":e.fundPerformance.trailingReturns.threeMonth.fmt,"1YearReturn":e.fundPerformance.trailingReturns.oneYear.fmt,threeYearReturn:e.fundPerformance.trailingReturns.threeYear.fmt,fiveYearReturn:e.fundPerformance.trailingReturns.fiveYear.fmt,tenYearReturn:e.fundPerformance.trailingReturns.tenYear.fmt,beta3Year:e.beta3Year.raw,totalAssets:e.totalAssets.fmt,regularMarketPrice:e.regularMarketPrice?.raw,regularMarketChange:e.regularMarketChange?.raw,regularMarketChangePercent:e.regularMarketChangePercent?.raw,preMarketPrice:e.preMarketPrice?.raw,preMarketChangePercent:e.preMarketChangePercent?.raw||0,postMarketPrice:e.postMarketPrice?.raw,postMarketChangePercent:e.postMarketChangePercent?.raw||0})}).sort((e,i)=>e.unrealizedGainPercent-i.unrealizedGainPercent)}ngAfterViewInit(){this.dataSource.sort=this.sort}getCellColor(n,r){let e=this.columnDefs[n],i=r[e];return i<0||i[0]==="-"||i[1]==="-"?"chocolate":""}static{this.\u0275fac=function(r){return new(r||t)(T(O))}}static{this.\u0275cmp=F({type:t,selectors:[["portfolio-financials"]],viewQuery:function(r,e){if(r&1&&(y(x,5),y(h,5)),r&2){let i;v(i=M())&&(e.table=i.first),v(i=M())&&(e.sort=i.first)}},standalone:!0,features:[D],decls:6,vars:2,consts:[["stocksRef",""],["etfsRef",""],["title","Stocks",3,"mainContentRef"],["title","Exchange Traded Funds",3,"mainContentRef"],["mat-table","","matSort","","matSortActive","earningsQuarterlyGrowth","matSortDirection","asc",3,"dataSource"],[3,"matColumnDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[1,"table-col-0"],[3,"ngStyle"],[3,"stock"],["mat-header-row",""],["mat-row",""],["mat-table","",3,"dataSource"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-header-cell",""]],template:function(r,e){if(r&1&&(p(0,me,5,4,"ng-template",null,0,E),d(2,"container-card",2),p(3,xe,5,4,"ng-template",null,1,E)(5,ge,1,1,"container-card",3)),r&2){let i=S(1);l(2),m("mainContentRef",i),l(3),f(e.sortedEtfs.length>0?5:-1)}},dependencies:[Q,H,G,A,h,I,U,x,B,j,z,q,J,V,N,K,L,$,X],styles:[".table-col-0[_ngcontent-%COMP%]{display:flex;align-items:center;align-content:center;margin:0;padding:0}.mdc-data-table__header-cell[_ngcontent-%COMP%], .mdc-data-table__cell[_ngcontent-%COMP%]{padding:0}"]})}}return t})();export{De as a};
