import './polyfills.server.mjs';
import{d as J}from"./chunk-PLJUUSHW.mjs";import{a as oe,b as se,c as le,d as F,e as O,g as de}from"./chunk-ORMFBVSB.mjs";import{d as K}from"./chunk-WG4TQSQD.mjs";import{a as me}from"./chunk-Y3NUDTOI.mjs";import{a as Z,c as ee,d as te,g as ie}from"./chunk-BGGCTIGO.mjs";import{c as G}from"./chunk-5PF5DFZM.mjs";import{j as ne,k as re,l as ae,m as W}from"./chunk-XSTRXIDY.mjs";import{b as ce}from"./chunk-QORZC6KR.mjs";import{d as q}from"./chunk-SNNKAGQA.mjs";import{a as z,b as E}from"./chunk-DX3IOXMX.mjs";import{a as $}from"./chunk-D6W32L62.mjs";import{O as U,P as L}from"./chunk-UAFWBIYL.mjs";import{m as k,n as I,p as B,t as N,u as S}from"./chunk-PBYHKXXW.mjs";import{$b as D,Hb as s,Ib as o,Jb as d,Kb as R,Lb as j,Sb as b,Ub as p,Zb as w,_b as A,ba as T,bb as a,bc as m,cb as v,cc as f,dc as g,gc as P,hc as y,ib as X,ic as x,ja as M,kc as Q,lc as C,mc as _,oc as Y,q as H,wb as u,yb as c}from"./chunk-EVR6KDPA.mjs";var ve=["startThumb"],ye=["endThumb"],xe=["line"];function Ce(n,l){n&1&&d(0,"div",6,7)}function _e(n,l){n&1&&d(0,"div",6,8)}var ue=(()=>{let l=class l{constructor(i){this.renderer=i,this.showThumbs=!0,this.tooltip=""}ngOnInit(){this.tooltip=`Day range: $${this.lowThumbValue} - $${this.highThumbValue}`}ngAfterViewInit(){if(this.showThumbs){let i=(this.lowThumbValue-this.min)/(this.max-this.min)*this.line.nativeElement.offsetWidth;i=Math.round(i*100)/100,this.renderer.setStyle(this.startThumb.nativeElement,"left",`${i-8}px`);let e=(this.highThumbValue-this.min)/(this.max-this.min)*this.line.nativeElement.offsetWidth;e=Math.round(e*100)/100,this.renderer.setStyle(this.endThumb.nativeElement,"left",`${e-8}px`)}this.updateSliderGradient()}updateSliderGradient(){let i=(this.lowThumbValue-this.min)/(this.max-this.min)*100,e=(this.highThumbValue-this.min)/(this.max-this.min)*100,t=`linear-gradient(
      to right,
      lightgrey 0% ${i}%,
      orangered ${i}% ${e}%, 
      lightgrey ${e}% 100%
    )`;this.renderer.setStyle(this.line.nativeElement,"background",t)}};l.\u0275fac=function(e){return new(e||l)(v(X))},l.\u0275cmp=T({type:l,selectors:[["stock-day-price-range"]],viewQuery:function(e,t){if(e&1&&(w(ve,5,M),w(ye,5,M),w(xe,5,M)),e&2){let h;A(h=D())&&(t.startThumb=h.first),A(h=D())&&(t.endThumb=h.first),A(h=D())&&(t.line=h.first)}},inputs:{min:"min",max:"max",lowThumbValue:"lowThumbValue",highThumbValue:"highThumbValue",showThumbs:"showThumbs"},standalone:!0,features:[P],decls:13,vars:5,consts:[[1,"light-color"],[1,"line-container"],["matTooltipPosition","above",1,"line",3,"matTooltip"],["line",""],["class","dot",4,"ngIf"],[1,"label-wrapper"],[1,"dot"],["startThumb",""],["endThumb",""]],template:function(e,t){e&1&&(s(0,"div")(1,"span",0),m(2,"Day Range vs 52w Range"),o(),s(3,"div",1),d(4,"div",2,3),u(6,Ce,2,0,"div",4)(7,_e,2,0,"div",4),o(),s(8,"div",5)(9,"span"),m(10),o(),s(11,"span"),m(12),o()()()),e&2&&(a(4),c("matTooltip",t.tooltip),a(2),c("ngIf",t.showThumbs),a(),c("ngIf",t.showThumbs),a(3),g("$",t.min,""),a(2),g("$",t.max,""))},dependencies:[S,k,O,F],styles:[".line-container[_ngcontent-%COMP%]{position:relative;display:flex;width:100%;height:1rem;align-items:center}.line[_ngcontent-%COMP%]{width:100%;height:1rem;border:none;border-radius:5%;background:navy}.dot[_ngcontent-%COMP%]{position:absolute;width:.5rem;height:1rem;background-color:#2e8b57;border-radius:10%;z-index:1}.label-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.light-color[_ngcontent-%COMP%]{color:#fff}"]});let n=l;return n})();function be(n,l){if(n&1&&(s(0,"div")(1,"mat-icon"),m(2,"vertical_align_bottom"),o(),s(3,"span"),m(4),C(5,"currency"),o()()),n&2){let r=p().ngIf;a(4),f(_(5,1,r.instrumentInfo.keyTechnicals.support))}}function Pe(n,l){if(n&1&&(s(0,"div")(1,"mat-icon"),m(2,"vertical_align_top"),o(),s(3,"span"),m(4),C(5,"currency"),o()()),n&2){let r=p().ngIf;a(4),f(_(5,1,r.instrumentInfo.keyTechnicals.resistance))}}var V=n=>({color:n});function ke(n,l){if(n&1&&(s(0,"div")(1,"mat-icon"),m(2,"thumbs_up_down"),o(),s(3,"span",3),m(4),o()()),n&2){let r=p().ngIf,i=p();a(3),c("ngStyle",x(2,V,i.getValuationColor(r.instrumentInfo.valuation.description))),a(),f(r.instrumentInfo.valuation.description)}}function Se(n,l){if(n&1&&(s(0,"div")(1,"mat-icon"),m(2,"discount"),o(),s(3,"span",3),m(4),o()()),n&2){let r=p().ngIf,i=p();a(3),c("ngStyle",x(2,V,i.getDiscountColor(r.instrumentInfo.valuation.discount))),a(),f(r.instrumentInfo.valuation.discount)}}function Me(n,l){if(n&1&&(s(0,"div",8),u(1,be,6,3,"div",7)(2,Pe,6,3,"div",7),s(3,"div")(4,"mat-icon"),m(5,"dangerous"),o(),s(6,"span"),m(7),C(8,"currency"),o()(),u(9,ke,5,4,"div",7)(10,Se,5,4,"div",7),o()),n&2){let r=l.ngIf;a(),c("ngIf",r.instrumentInfo.keyTechnicals.support!==void 0),a(),c("ngIf",r.instrumentInfo.keyTechnicals.resistance!==void 0),a(5),f(_(8,5,r.instrumentInfo.keyTechnicals.stopLoss)),a(2),c("ngIf",r.instrumentInfo.valuation.description!==void 0),a(),c("ngIf",r.instrumentInfo.valuation.discount!==void 0)}}function we(n,l){if(n&1&&(R(0),s(1,"div",9),m(2),o(),s(3,"mat-slider",10),d(4,"input",11),o(),s(5,"div",12)(6,"span",9),m(7),C(8,"currency"),o(),s(9,"span",9),m(10),C(11,"currency"),o()(),j()),n&2){let r=p();a(2),g("Target Price: $",r.stock.targetMeanPrice||0,""),a(),c("min",r.stock.targetLowPrice)("max",r.stock.targetHighPrice)("color",r.getTargetPriceRangeColor(r.stock)),a(),c("value",r.stock.targetMeanPrice)("matTooltip",r.getTooltip()),a(3),f(_(8,8,r.stock.targetLowPrice||0)),a(3),f(_(11,10,r.stock.targetHighPrice||0))}}var fe=(()=>{let l=class l{constructor(i,e){this.router=i,this.dataService=e}ngOnInit(){this.technicalInsights$=this.dataService.getTechnicalInsights(this.stock.symbol).pipe(H(i=>i[this.stock.symbol]))}getTargetPriceRangeColor(i){return i.regularMarketPrice>i.targetMeanPrice?"primary":"accent"}getTooltip(){let i=this.stock.regularMarketPrice,e=this.stock.targetMeanPrice,t="";return this.getTargetPriceRangeColor(this.stock)==="primary"?t=`Price $${i} is above mean target $${e} by $${(i-e).toFixed(2)}.`:t=`Price $${i} is below mean target $${e} by $${(e-i).toFixed(2)}.`,t}openInfoSheet(){this.router.navigate(["stock/"+this.stock.symbol])}getDiscountColor(i){return i.includes("-")?"orangered":"seagreen"}getValuationColor(i){switch(i){case"Overvalued":return"orangered";case"Undervalued":return"seagreen";default:return"navy"}}get50DMAColor(i){return i.fiftyDayAverage<i.regularMarketPrice?"seagreen":"orangered"}get200DMAColor(i){return i.twoHundredDayAverage<i.regularMarketPrice?"seagreen":"orangered"}get50DMATrendIcon(i){return i.fiftyDayAverage<i.regularMarketPrice?"trending_up":"trending_down"}get200DMATrendIcon(i){return i.twoHundredDayAverage<i.regularMarketPrice?"trending_up":"trending_down"}};l.\u0275fac=function(e){return new(e||l)(v(q),v($))},l.\u0275cmp=T({type:l,selectors:[["stock-price-info-card"]],inputs:{stock:"stock"},standalone:!0,features:[P],decls:17,vars:18,consts:[[1,"price-info"],[3,"stock","click"],[1,"trend-container"],[3,"ngStyle"],["class","icon-span",4,"ngIf"],[1,"day-price-range",3,"min","max","lowThumbValue","highThumbValue","showThumbs"],[1,"target-price-range"],[4,"ngIf"],[1,"icon-span"],[1,"dark-color"],["thumbSize","10",3,"min","max","color"],["matSliderThumb","","matTooltipPosition","above",3,"value","matTooltip"],[1,"label-wrapper"]],template:function(e,t){e&1&&(s(0,"div",0)(1,"stock-static-ticker-card",1),b("click",function(){return t.openInfoSheet()}),o(),s(2,"div",2)(3,"div")(4,"span"),m(5,"50DMA:"),o(),s(6,"mat-icon",3),m(7),o(),s(8,"span"),m(9,"200DMA:"),o(),s(10,"mat-icon",3),m(11),o()(),u(12,Me,11,7,"div",4),C(13,"async"),o(),d(14,"stock-day-price-range",5),s(15,"div",6),u(16,we,12,12,"ng-container",7),o()()),e&2&&(a(),c("stock",t.stock),a(5),c("ngStyle",x(14,V,t.get50DMAColor(t.stock))),a(),f(t.get50DMATrendIcon(t.stock)),a(3),c("ngStyle",x(16,V,t.get200DMAColor(t.stock))),a(),f(t.get200DMATrendIcon(t.stock)),a(),c("ngIf",_(13,12,t.technicalInsights$)),a(2),c("min",t.stock.fiftyTwoWeekLow)("max",t.stock.fiftyTwoWeekHigh)("lowThumbValue",t.stock.regularMarketDayLow)("highThumbValue",t.stock.regularMarketDayHigh)("showThumbs",!1),a(2),c("ngIf",t.stock.quoteType==="EQUITY"))},dependencies:[B,S,k,I,N,W,E,L,U,le,oe,se,O,F,ue,me],styles:["stock-static-ticker-card[_ngcontent-%COMP%]{margin-right:10px;margin-left:5px}mat-slider[_ngcontent-%COMP%]{width:100%;height:8px;padding-top:5px;padding-bottom:5px}  mat-slider-visual-thumb.mdc-slider__thumb{height:0px!important}  div.mdc-slider__thumb-knob{height:5px!important;width:5px!important;border-width:5px!important}  span.mat-mdc-chip-action-label{display:flex;align-items:center;align-content:center}mat-icon[_ngcontent-%COMP%]{margin-left:5px;font-size:1rem;height:15px;width:15px}.mat-mdc-slider[_ngcontent-%COMP%]{margin:0}.price-info[_ngcontent-%COMP%]{display:flex;padding:5px;border-radius:.5rem;flex-direction:column;margin:2px}.label-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:space-between;color:#fff}.day-price-range[_ngcontent-%COMP%], .target-price-range[_ngcontent-%COMP%], stock-moving-trends[_ngcontent-%COMP%]{margin-bottom:5px}.light-color[_ngcontent-%COMP%]{color:#fff}.trend-container[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:10px}.trend-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:flex;align-items:center}.icon-span[_ngcontent-%COMP%]{display:flex;padding-left:5px;align-items:center}"]});let n=l;return n})();function Ae(n,l){if(n&1&&(d(0,"stock-price-info-card",12)(1,"mat-divider",13),s(2,"span"),m(3),o(),s(4,"span"),m(5),o()),n&2){let r=l.model,i=p(2);c("stock",i.getTooltipData(r.name)),a(3),g("",r.name,": "),a(2),g("",r.value.toFixed(2),"%")}}function De(n,l){if(n&1&&(s(0,"div",8)(1,"ngx-charts-bar-vertical",10),u(2,Ae,6,3,"ng-template",null,11,Y),o()()),n&2){let r=p();a(),c("scheme",r.performanceChartColorScheme)("animations",!0)("results",r.fiftyDayMAChartData)("xAxis",!0)("yAxis",!0)("showXAxisLabel",!0)("showYAxisLabel",!0)("legend",!1)("yAxisLabel","Price vs 50 Day MA %")("rotateXAxisTicks",!0)("yScaleMin",r.fiftyDayMAChartData[0].value-5)}}function Ie(n,l){if(n&1&&(s(0,"div",8),d(1,"ngx-charts-bar-vertical",10),o()),n&2){let r=p();a(),c("scheme","air")("scheme",r.performanceChartColorScheme)("animations",!0)("results",r.twoHundredDayMAChartData)("xAxis",!0)("yAxis",!0)("showXAxisLabel",!0)("showYAxisLabel",!0)("legend",!1)("yAxisLabel","Price vs 200 Day MA %")("rotateXAxisTicks",!0)("yScaleMin",r.twoHundredDayMAChartData[0].value-5)}}function Ee(n,l){if(n&1&&d(0,"stock-price-info-card",12),n&2){let r=p().model,i=p(2);c("stock",i.getTooltipData(r.name))}}function Le(n,l){n&1&&d(0,"mat-divider",13)}function We(n,l){if(n&1&&(u(0,Ee,1,1,"stock-price-info-card",16)(1,Le,1,0,"mat-divider",17),s(2,"span"),m(3),o(),s(4,"span"),m(5),o()),n&2){let r=l.model;c("ngIf",r.name!=="S&P 500"),a(),c("ngIf",r.name!=="S&P 500"),a(2),g("",r.name,": "),a(2),g("",r.value.toFixed(2),"%")}}var Fe=()=>["S&P 500"],Oe=()=>({name:"S&P 500",value:"gold"}),$e=n=>[n];function Ve(n,l){if(n&1&&(s(0,"div",8)(1,"ngx-charts-bar-vertical",14),u(2,We,6,4,"ng-template",15,11,Y),o()()),n&2){let r=p();a(),c("scheme",r.performanceChartColorScheme)("animations",!0)("results",r.fiftyTwoWeekChangeChartData)("xAxis",!0)("yAxis",!0)("showXAxisLabel",!0)("showYAxisLabel",!0)("legend",!1)("yAxisLabel","52 Week Change %")("rotateXAxisTicks",!0)("activeEntries",y(12,Fe))("customColors",x(14,$e,y(13,Oe)))}}var Ye=()=>({name:"SCHD",value:"deepskyblue"}),He=()=>({name:"VYM",value:"maroon"}),Xe=()=>({name:"JEPI",value:"dodgerblue"}),Re=(n,l,r)=>[n,l,r];function je(n,l){if(n&1&&(s(0,"div",8),d(1,"ngx-charts-bar-vertical-2d",18),o()),n&2){let r=p();a(),c("animations",!0)("results",r.etfPerformanceChartData)("xAxis",!0)("yAxis",!0)("showXAxisLabel",!0)("showYAxisLabel",!0)("legend",!1)("yAxisLabel","ETF Performance %")("showDataLabel",!0)("rotateXAxisTicks",!0)("customColors",Q(14,Re,y(11,Ye),y(12,He),y(13,Xe)))}}var Qe=()=>({padding:"20px"}),Rt=(()=>{let l=class l{constructor(i){this.dataService=i,this.sortedStocks=[],this.sortedEtfs=[],this.fiftyTwoWeekChangeChartData=[],this.fiftyTwoWeekLowChartData=[],this.fiftyTwoWeekHighChartData=[],this.fiftyDayMAChartData=[],this.twoHundredDayMAChartData=[],this.discountChartData=[],this.displayTradingviewWidgets=!1,this.sp500FiftyTwoWeekChange=0,this.etfPerformanceChartData=[],this.sp500="S&P 500",this.activeSymbol=[{name:this.sp500}],this.customColor=[{name:this.sp500,value:"orangered"}],this.selectedPerformanceChart=1,this.selectedVSChart=1,this.scaleType=Z,this.performanceChartColorScheme={domain:["slategrey"]},this.fiftyTwoWeekChartColorScheme={domain:["slategrey"]},this.targetPriceChartColorScheme={domain:["slategrey"]}}ngOnInit(){this.sortedStocks=Object.values(this.dataService.portfolioData).filter(e=>e.quoteType==="EQUITY").sort((e,t)=>e["52WeekChange"]-t["52WeekChange"]),this.sortedEtfs=Object.values(this.dataService.portfolioData).filter(e=>e.quoteType==="ETF").sort((e,t)=>e.ytdReturn-t.ytdReturn),this.sp500FiftyTwoWeekChange=this.sortedStocks[0].SandP52WeekChange,this.sortedStocks.forEach(e=>{this.fiftyTwoWeekChangeChartData.push({name:e.symbol,value:e["52WeekChange"]*100}),this.fiftyTwoWeekLowChartData.push({name:e.symbol,value:(e.regularMarketPrice-e.fiftyTwoWeekLow)/e.fiftyTwoWeekLow*100}),this.fiftyTwoWeekHighChartData.push({name:e.symbol,value:(e.regularMarketPrice-e.fiftyTwoWeekHigh)/e.fiftyTwoWeekHigh*100}),this.discountChartData.push({name:e.symbol,value:(e.regularMarketPrice-e.targetMeanPrice)/e.targetMeanPrice*100}),this.fiftyDayMAChartData.push({name:e.symbol,value:(e.regularMarketPrice-e.fiftyDayAverage)/e.fiftyDayAverage*100}),this.twoHundredDayMAChartData.push({name:e.symbol,value:(e.regularMarketPrice-e.twoHundredDayAverage)/e.twoHundredDayAverage*100})}),this.fiftyTwoWeekChangeChartData.push({name:this.sp500,value:this.sortedStocks[0].SandP52WeekChange*100}),this.fiftyTwoWeekChangeChartData.sort((e,t)=>e.value-t.value),this.fiftyDayMAChartData.sort((e,t)=>e.value-t.value),this.twoHundredDayMAChartData.sort((e,t)=>e.value-t.value),this.fiftyTwoWeekLowChartData.sort((e,t)=>e.value-t.value),this.fiftyTwoWeekHighChartData.sort((e,t)=>e.value-t.value),this.discountChartData.sort((e,t)=>e.value-t.value);let i={ytd:"Year to Date",oneMonth:"One Month",threeMonth:"Three Month",oneYear:"One Year",threeYear:"Three Year",fiveYear:"Five Year",tenYear:"Ten Year"};Object.keys(i).forEach(e=>{if(i[e]){let t={name:i[e],series:[]};this.sortedEtfs.forEach(h=>{t.series.push({name:h.symbol,value:h.fundPerformance.trailingReturns[e]*100})}),this.etfPerformanceChartData.push(t)}})}getSP500ChangeColor(i){return this.sp500FiftyTwoWeekChange>0?"seagreen":"orangered"}getTooltipData(i){return Object.values(this.dataService.portfolioData).filter(e=>e.symbol===i)[0]}changePerformanceChart(i){this.selectedPerformanceChart=i}changeVSCharts(i){this.selectedVSChart=i}};l.\u0275fac=function(e){return new(e||l)(v($))},l.\u0275cmp=T({type:l,selectors:[["portfolio-price-trends"]],standalone:!0,features:[P],decls:30,vars:37,consts:[[1,"add-border"],[1,"chart-header"],[1,"title"],[3,"ngStyle"],["selected","",3,"click"],[3,"click"],[1,"charts-flex"],["class","chart-container",4,"ngIf"],[1,"chart-container"],[3,"scheme","animations","results","xAxis","yAxis","showXAxisLabel","showYAxisLabel","legend","yAxisLabel","rotateXAxisTicks"],[3,"scheme","animations","results","xAxis","yAxis","showXAxisLabel","showYAxisLabel","legend","yAxisLabel","rotateXAxisTicks","yScaleMin"],["tooltipTemplate",""],[3,"stock"],[2,"margin","none"],[3,"scheme","animations","results","xAxis","yAxis","showXAxisLabel","showYAxisLabel","legend","yAxisLabel","rotateXAxisTicks","activeEntries","customColors"],["class","dark"],[3,"stock",4,"ngIf"],["style","margin: none;",4,"ngIf"],[3,"animations","results","xAxis","yAxis","showXAxisLabel","showYAxisLabel","legend","yAxisLabel","showDataLabel","rotateXAxisTicks","customColors"]],template:function(e,t){e&1&&(d(0,"price-movement-charts"),s(1,"section",0)(2,"div",1)(3,"div",2)(4,"span"),m(5,"Price Performance"),o()(),s(6,"mat-chip-listbox",3)(7,"mat-chip-option",4),b("click",function(){return t.changePerformanceChart(1)}),m(8,"Moving Averages"),o(),s(9,"mat-chip-option",5),b("click",function(){return t.changePerformanceChart(2)}),m(10,"Stocks 52 Week Change"),o(),s(11,"mat-chip-option",5),b("click",function(){return t.changePerformanceChart(3)}),m(12,"ETF Past Performance"),o()()(),s(13,"div",6),u(14,De,4,11,"div",7)(15,Ie,2,12,"div",7),o(),u(16,Ve,4,16,"div",7)(17,je,2,18,"div",7),o(),s(18,"section",0)(19,"div",1)(20,"div",2)(21,"span"),m(22,"Current Price vs 52 Week & Target Price"),o()()(),s(23,"div",6)(24,"div",8),d(25,"ngx-charts-bar-vertical",9),o(),s(26,"div",8),d(27,"ngx-charts-bar-vertical",9),o(),s(28,"div",8),d(29,"ngx-charts-bar-vertical",10),o()()()),e&2&&(a(6),c("ngStyle",y(36,Qe)),a(8),c("ngIf",t.selectedPerformanceChart===1),a(),c("ngIf",t.selectedPerformanceChart===1),a(),c("ngIf",t.selectedPerformanceChart===2),a(),c("ngIf",t.selectedPerformanceChart===3),a(8),c("scheme",t.fiftyTwoWeekChartColorScheme)("animations",!0)("results",t.fiftyTwoWeekLowChartData)("xAxis",!0)("yAxis",!0)("showXAxisLabel",!0)("showYAxisLabel",!0)("legend",!1)("yAxisLabel","Current price vs 52 week low %")("rotateXAxisTicks",!0),a(2),c("scheme",t.fiftyTwoWeekChartColorScheme)("animations",!0)("results",t.fiftyTwoWeekHighChartData)("xAxis",!0)("yAxis",!0)("showXAxisLabel",!0)("showYAxisLabel",!0)("legend",!1)("yAxisLabel","Current price vs 52 week High %")("rotateXAxisTicks",!0),a(2),c("scheme",t.targetPriceChartColorScheme)("animations",!0)("results",t.discountChartData)("xAxis",!0)("yAxis",!0)("showXAxisLabel",!0)("showYAxisLabel",!0)("legend",!1)("yAxisLabel","Current price vs target price %")("rotateXAxisTicks",!0)("yScaleMin",-5))},dependencies:[S,k,I,G,W,ae,re,E,z,K,ne,L,ce,J,ie,ee,te,de,fe],styles:[".chart-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}"]});let n=l;return n})();export{Rt as a};
