import './polyfills.server.mjs';
import{A as ce,a as O,b as z,c as K,d as A,e as Z,f as ee,h as te,i as ie,k as ne,l as oe,n as re,o as ae,q as de,s as le,t as se}from"./chunk-TJ75PENB.mjs";import{a as j,c as M}from"./chunk-IA3GWIKY.mjs";import{i as W}from"./chunk-LNNIMXHA.mjs";import{k as G}from"./chunk-3MT32Q4K.mjs";import{c as U,i as J}from"./chunk-TNL2ZN2F.mjs";import{a as k}from"./chunk-NBWMD5I7.mjs";import{b as Q}from"./chunk-KX35ANUQ.mjs";import{f as X}from"./chunk-WFMV577X.mjs";import{b as q}from"./chunk-SNU2TC3P.mjs";import{Ab as h,Bb as C,Cb as l,Db as c,Eb as u,Ib as x,Lb as y,Nb as a,Sb as R,Tb as I,Ub as P,Xb as $,Ya as d,Yb as g,Za as D,Zb as Y,_b as H,bc as w,fa as T,jc as N,na as v,oa as _,qb as f,sb as p,tb as V,ua as L,xb as b,yb as F,zb as B}from"./chunk-6LZGNP3H.mjs";import{a as E}from"./chunk-5XUXGTUW.mjs";function ve(t,o){if(t&1){let n=x();l(0,"button",2),y("click",function(){let e=v(n).$implicit,r=a();return _(r.emitSelectedTicker(e.symbol))}),l(1,"div"),g(2),c()()}if(t&2){let n=o.$implicit;d(2),Y(n.symbol)}}function _e(t,o){if(t&1){let n=x();l(0,"button",2),y("click",function(){let e=v(n).$implicit,r=a(2);return _(r.emitSelectedTicker(e.symbol))}),l(1,"div"),g(2),c()()}if(t&2){let n=o.$implicit;d(2),Y(n.symbol)}}function he(t,o){if(t&1&&h(0,_e,3,1,"button",1,F),t&2){let n=a();C(n.sortedEtfs)}}var me=(()=>{let o=class o{constructor(i,e){this.dataService=i,this.helperService=e,this.showETF=!0,this.selectedTicker=new L,this.sortedStocks=[],this.sortedEtfs=[]}ngOnInit(){this.sortedStocks=Object.values(this.dataService.portfolioData).filter(i=>i.quoteType==="EQUITY").sort((i,e)=>i["52WeekChange"].raw-e["52WeekChange"].raw),this.sortedEtfs=Object.values(this.dataService.portfolioData).filter(i=>i.quoteType==="ETF").sort((i,e)=>i.ytdReturn.raw-e.ytdReturn.raw)}emitSelectedTicker(i){this.selectedTicker.emit(i)}};o.\u0275fac=function(e){return new(e||o)(D(k),D(G))},o.\u0275cmp=T({type:o,selectors:[["stock-ticker-buttons"]],inputs:{showETF:"showETF"},outputs:{selectedTicker:"selectedTicker"},standalone:!0,features:[w],decls:4,vars:1,consts:[[1,"logos-container"],["mat-button","",1,"ticker-button"],["mat-button","",1,"ticker-button",3,"click"]],template:function(e,r){e&1&&(l(0,"div",0),h(1,ve,3,1,"button",1,F),f(3,he,2,0),c()),e&2&&(d(),C(r.sortedStocks),d(2),b(r.showETF?3:-1))},dependencies:[M,j],styles:[".logos-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;margin:0 0rem 1rem}.ticker-button[_ngcontent-%COMP%]{align-items:center;height:2rem;border:1px solid ghostwhite}.ticker-button[_ngcontent-%COMP%]:hover{border:1px solid slategrey;border-left:.3rem solid slategrey}"]});let t=o;return t})();var Ce=(t,o)=>o.value;function xe(t,o){if(t&1&&u(0,"info-card",5),t&2){let n=o.$implicit;p("value",n.value)("valueType",n.valueType)("subtitle",n.subtitle)("color",n.color)}}function ye(t,o){if(t&1&&(l(0,"section",2),h(1,xe,1,4,"info-card",5,Ce),c()),t&2){let n=a();d(),C(n.infoCards)}}function ge(t,o){if(t&1){let n=x();l(0,"div",6)(1,"stock-ticker-buttons",7),y("selectedTicker",function(e){v(n);let r=a();return _(r.onSelect(e))}),c(),l(2,"div",8),u(3,"ngx-charts-area-chart",9),c()()}if(t&2){let n=a();V("flex-direction","column"),d(3),p("scheme",n.dividendChartColorScheme)("results",n.dividendLineChartData)("xAxisLabel",n.selectedSymbolLabel)("yAxisLabel","Dividend Rate")("showXAxisLabel",!0)("showYAxisLabel",!0)("xAxis",!0)("yAxis",!0)("autoScale",!0)("animations",!0)("gradient",!0)("yScaleMin",0)}}function De(t,o){if(t&1&&(l(0,"th",16),g(1),c()),t&2){let n=a().$index,i=a(2);d(),H(" ",i.headers[n]," ")}}function be(t,o){if(t&1&&(l(0,"div",18),u(1,"stock-name-card",19),c()),t&2){let n=a().$implicit;d(),p("stock",n)}}function Se(t,o){if(t&1){let n=x();l(0,"span",20),y("click",function(){v(n);let e=a().$implicit,r=a(3);return _(r.updateChart(e.symbol))}),g(1),c()}if(t&2){let n=a().$implicit,i=a().$index,e=a(2);d(),H(" ",e.cells[i](n)," ")}}function Te(t,o){if(t&1&&(l(0,"td",17),f(1,be,2,1,"div",18)(2,Se,2,1,"span"),c()),t&2){let n=a().$index;d(),b(n===0?1:2)}}function we(t,o){if(t&1&&(l(0,"div",11),f(1,De,2,1,"th",14)(2,Te,3,1,"td",15),c()),t&2){let n=o.$implicit;p("matColumnDef",n)}}function Me(t,o){t&1&&u(0,"tr",21)}function ke(t,o){t&1&&u(0,"tr",22)}function Oe(t,o){if(t&1&&(l(0,"table",10),h(1,we,3,1,"div",11,B),f(3,Me,1,0,"tr",12)(4,ke,1,0,"tr",13),c()),t&2){let n=a();p("dataSource",n.dataSource),d(),C(n.columnDefs),d(2),p("matHeaderRowDef",n.columnDefs)("matHeaderRowDefSticky",!0),d(),p("matRowDefColumns",n.columnDefs)}}var et=(()=>{let o=class o{constructor(i){this.dataService=i,this.monthStrings=["January","February","March","April","May","June","July","August","September","October","November","December"],this.browser="",this.dividendIncome=0,this.portfolioYieldOnCost=0,this.selectedSymbolLabel="",this.infoCards=[],this.dividendLineChartData=[],this.dividendChartColorScheme={domain:["steelblue"]},this.currentMonth=new Date().getMonth(),this.pieChartData=[],this.echartUpdateOptions={yAxis:{},xAxis:{data:[]},series:[{data:[]}]},this.dataSource=new se,this.headers=["Symbol","Dividend Income","Yield on Cost","Dividend Rate","Dividend Rate (TTM)","Dividend Yield","Dividend Yield (TTM)","5Y Avg. Yield","Payout Ratio","FCF Payout Ratio","Last Dividend Paid","Ex-dividend Date","Dividend Date"],this.columnDefs=["symbol","dividendIncome","yieldOnCost","dividendRate","trailingAnnualDividendRate","dividendYield","trailingAnnualDividendYield","fiveYearAvgDividendYield","payoutRatio","freeCashflowPayoutRatio","lastDividendValue","exDividendDate","dividendDate"],this.cells=[e=>"",e=>`$${e.dividendIncome.toFixed(2)}`,e=>`${(e.yieldOnCost*100).toFixed(2)}%`,e=>"$"+(e.dividendRate?.fmt||e.dividendRate.toFixed(2)),e=>e.trailingAnnualDividendRate?.fmt||"N/A",e=>e.dividendYield?.fmt||(e.dividendYield*100).toFixed(2)+"%",e=>e.trailingAnnualDividendYield?.fmt||"N/A",e=>e.fiveYearAvgDividendYield?.fmt||"N/A",e=>e.payoutRatio?.fmt||"N/A",e=>e.quoteType==="EQUITY"&&e.freeCashflowPayoutRatio!==0?`${(e.freeCashflowPayoutRatio*100).toFixed(2)}%`:"N/A",e=>e.lastDividendValue?.fmt||"N/A",e=>e.calendarEvents?.exDividendDate?new Date(e.calendarEvents.exDividendDate?.fmt).toDateString():"N/A",e=>e.calendarEvents?.dividendDate?new Date(e.calendarEvents.dividendDate?.fmt).toDateString():"N/A"]}ngOnInit(){this.portfolioHoldings=this.dataService.portfolioHoldings,this.portfolioData=this.dataService.portfolioData,this.dataSource.data=this.dataService.portfolioDataArray.filter(i=>i.dividendYield?.raw>0||i.dividendYield>0).map(i=>E(E({},this.portfolioHoldings[i.symbol]),i)),this.selectedSymbol=this.dataSource.data[0].symbol,this.dataSource.data.forEach(i=>{this.pieChartData.push({name:i.symbol,value:i.dividendIncome})}),this.dividendIncome=this.portfolioHoldings.dividendIncome,this.portfolioYieldOnCost=this.portfolioHoldings.yieldOnCost,this.browser=this.getBrowserName(),this.setInfoCards(),this.updateChart(this.selectedSymbol,!1)}ngAfterViewInit(){this.dataSource.sort=this.sort}getBrowserName(){let i=window?.navigator.userAgent.toLowerCase();return i.indexOf("edge")>-1?"Microsoft Edge":i.indexOf("edg")>-1?"Chromium-based Edge":i.indexOf("opr")>-1?"Opera":i.indexOf("chrome")>-1?"Chrome":i.indexOf("trident")>-1?"Internet Explorer":i.indexOf("firefox")>-1?"Firefox":i.indexOf("safari")>-1?"Safari":"other"}setInfoCards(){this.infoCards=[{value:this.dividendIncome.toFixed(4),valueType:"currency",subtitle:"Projected Annual Income",color:null},{value:(this.dividendIncome/4).toFixed(4),valueType:"currency",subtitle:"Average Quarterly Income",color:null},{value:(this.dividendIncome/12).toFixed(4),valueType:"currency",subtitle:"Average Monthly Income",color:"teal"},{value:(this.dividendIncome/365).toFixed(4),valueType:"currency",subtitle:"Average Daily Income",color:null},{value:this.portfolioYieldOnCost.toFixed(4),valueType:"percentage",subtitle:"Portfolio YOC",color:"teal"}]}updateChart(i,e=!0){let r={title:{text:""},legend:{data:["Dividend $"]},tooltip:{},xAxis:{data:[],splitLine:{show:!1}},yAxis:{},series:[{name:"Dividend $",type:"bar",data:[],emphasis:{focus:"series"},animationDelay:function(m){return m*10}}],animationEasing:"elasticOut",animationDelayUpdate:function(m){return m*5}},s=this.dataSource.data.filter(m=>m.symbol===i)[0],S={name:`${s.symbol} | ${s.shortName}`,series:[]},pe=this.dataService.portfolioDividendHistory[s.symbol];Object.entries(pe).forEach(m=>{S.series.push({name:new Date(m[0].split("-").join(" ")),value:+m[1]}),r.xAxis.data.push(m[0].split("-").join(" ")),r.series[0].data.push(+m[1])}),this.echartOptions=r,this.dividendLineChartData=[S],this.selectedSymbol=s.symbol,this.selectedSymbolLabel=`
      ${s.symbol} | 
      ${s.longName} | 
      ${s.profile?.sector||"ETF"} |
      ${s.profile?.industry||"ETF"}
    `}onSelect(i){this.updateChart(i)}};o.\u0275fac=function(e){return new(e||o)(D(k))},o.\u0275cmp=T({type:o,selectors:[["portfolio-dividend"]],viewQuery:function(e,r){if(e&1&&(R(A,5),R(O,5)),e&2){let s;I(s=P())&&(r.table=s.first),I(s=P())&&(r.sort=s.first)}},standalone:!0,features:[w],decls:7,vars:3,consts:[["dividendHistoryRef",""],["dividendTableRef",""],[1,"dividend-cards-container"],["title","Dividend History",3,"mainContentRef"],["title","Dividend Details",3,"mainContentRef"],[3,"value","valueType","subtitle","color"],[1,"add-flex"],[3,"selectedTicker"],[1,"chart-container","dividend-chart"],[3,"scheme","results","xAxisLabel","yAxisLabel","showXAxisLabel","showYAxisLabel","xAxis","yAxis","autoScale","animations","gradient","yScaleMin"],["mat-table","","matSort","","matSortActive","yieldOnCost","matSortDirection","desc",3,"dataSource"],[3,"matColumnDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[1,"table-col-0"],[3,"stock"],[3,"click"],["mat-header-row",""],["mat-row",""]],template:function(e,r){if(e&1&&(f(0,ye,3,0,"section",2)(1,ge,4,14,"ng-template",null,0,N),u(3,"container-card",3),f(4,Oe,5,4,"ng-template",null,1,N),u(6,"container-card",4)),e&2){let s=$(2),S=$(5);b(r.infoCards?0:-1),d(3),p("mainContentRef",s),d(3),p("mainContentRef",S)}},dependencies:[X,W,M,q,Q,K,O,z,le,A,ee,oe,te,Z,re,ie,ne,ae,de,J,U,ce,me],styles:["echarts-vertical-bar-chart[_ngcontent-%COMP%]{width:100%}.dividend-cards-container[_ngcontent-%COMP%]{display:flex;align-items:center;flex-wrap:wrap;margin-top:.5rem;margin-bottom:1rem}.safari-charts-container[_ngcontent-%COMP%]{display:flex;align-items:center}.table-col-0[_ngcontent-%COMP%]{display:flex;align-items:center;align-content:center;margin:0;padding:0}td.mat-mdc-cell[_ngcontent-%COMP%]:first-of-type   td.mat-mdc-footer-cell[_ngcontent-%COMP%]:first-of-type{padding-left:0}.mdc-data-table__header-cell[_ngcontent-%COMP%], .mdc-data-table__cell[_ngcontent-%COMP%]{padding:0}.dividend-chart[_ngcontent-%COMP%]{width:100%}.chart-flex[_ngcontent-%COMP%]{display:flex}"]});let t=o;return t})();export{me as a,et as b};
