import './polyfills.server.mjs';
import{d as j}from"./chunk-EGKULMH7.mjs";import{f as te,h as ie}from"./chunk-JXWXNR5G.mjs";import{d as N}from"./chunk-EWYRINQU.mjs";import{a as B,c as $,d as q,g as U}from"./chunk-LDUYCJ5N.mjs";import{a as R,c as V}from"./chunk-53HVJOPX.mjs";import{j as z,k as J,l as Q,m as G,x as ee}from"./chunk-CFXSS2ZD.mjs";import{g as K}from"./chunk-QHD6GJ7J.mjs";import{a as Y,b as O}from"./chunk-RTSQ3GE6.mjs";import{a as Z}from"./chunk-KUHTMXSH.mjs";import{P as H}from"./chunk-MA3PBPVZ.mjs";import{l as E,m as W,n as I,o as F,v as X}from"./chunk-FCMVA44A.mjs";import{Ab as c,Jb as l,Kb as s,Lb as p,Ob as k,Pb as w,Ub as x,Wb as d,Ya as P,ba as _,bb as n,cb as v,dc as m,ec as D,fa as T,fc as u,ga as b,ib as A,ic as M,jc as g,kc as y,mc as L,nb as S,qc as C,yb as h}from"./chunk-NLLPQ6HJ.mjs";function re(t,o){if(t&1){let i=w();l(0,"button",14),x("click",function(){let r=T(i).$implicit,f=d();return b(f.updateWidget(r.symbol))}),p(1,"img",15),l(2,"div"),m(3),s()()}if(t&2){let i=o.$implicit,a=d();n(),c("src",a.getLogoSource(i),P),n(2),D(i.symbol)}}function ae(t,o){t&1&&k(0)}var oe=t=>({symbol:t});function ne(t,o){if(t&1&&(l(0,"div",16),h(1,ae,1,0,"ng-container",17),p(2,"stock-price-info-card",18),s()),t&2){let i=d();n(),c("ngComponentOutlet",i.getWidget.widget)("ngComponentOutletInputs",y(3,oe,i.selectedSymbol)),n(),c("stock",i.getStock())}}function se(t,o){if(t&1&&(p(0,"stock-price-info-card",18)(1,"mat-divider",20),l(2,"span"),m(3),s(),l(4,"span"),m(5),s()),t&2){let i=o.model,a=d(2);c("stock",a.getTooltipData(i.name)),n(3),u("",i.name,": "),n(2),u("",i.value.toFixed(2),"%")}}function le(t,o){if(t&1&&(l(0,"div",11)(1,"ngx-charts-bar-vertical",13),h(2,se,6,3,"ng-template",null,19,C),s()()),t&2){let i=d();n(),c("scheme",i.performanceChartColorScheme)("animations",!0)("results",i.fiftyDayMAChartData)("xAxis",!0)("yAxis",!0)("showXAxisLabel",!0)("showYAxisLabel",!0)("legend",!1)("yAxisLabel","Price vs 50 Day MA %")("rotateXAxisTicks",!0)("yScaleMin",i.fiftyDayMAChartData[0].value-5)}}function ce(t,o){if(t&1&&(p(0,"stock-price-info-card",18)(1,"mat-divider",20),l(2,"span"),m(3),s(),l(4,"span"),m(5),s()),t&2){let i=o.model,a=d(2);c("stock",a.getTooltipData(i.name)),n(3),u("",i.name,": "),n(2),u("",i.value.toFixed(2),"%")}}function me(t,o){if(t&1&&(l(0,"div",11)(1,"ngx-charts-bar-vertical",13),h(2,ce,6,3,"ng-template",21,19,C),s()()),t&2){let i=d();n(),c("scheme","air")("scheme",i.performanceChartColorScheme)("animations",!0)("results",i.twoHundredDayMAChartData)("xAxis",!0)("yAxis",!0)("showXAxisLabel",!0)("showYAxisLabel",!0)("legend",!1)("yAxisLabel","Price vs 200 Day MA %")("rotateXAxisTicks",!0)("yScaleMin",i.twoHundredDayMAChartData[0].value-5)}}function de(t,o){if(t&1&&p(0,"stock-price-info-card",18),t&2){let i=d().model,a=d(2);c("stock",a.getTooltipData(i.name))}}function pe(t,o){t&1&&p(0,"mat-divider",20)}function he(t,o){if(t&1&&(h(0,de,1,1,"stock-price-info-card",23)(1,pe,1,0,"mat-divider",24),l(2,"span"),m(3),s(),l(4,"span"),m(5),s()),t&2){let i=o.model;c("ngIf",i.name!=="S&P 500"),n(),c("ngIf",i.name!=="S&P 500"),n(2),u("",i.name,": "),n(2),u("",i.value.toFixed(2),"%")}}var fe=()=>["S&P 500"],ue=()=>({name:"S&P 500",value:"gold"}),ge=t=>[t];function xe(t,o){if(t&1&&(l(0,"div",11)(1,"ngx-charts-bar-vertical",22),h(2,he,6,4,"ng-template",21,19,C),s()()),t&2){let i=d();n(),c("scheme",i.performanceChartColorScheme)("animations",!0)("results",i.fiftyTwoWeekChangeChartData)("xAxis",!0)("yAxis",!0)("showXAxisLabel",!0)("showYAxisLabel",!0)("legend",!1)("yAxisLabel","52 Week Change %")("rotateXAxisTicks",!0)("activeEntries",g(12,fe))("customColors",y(14,ge,g(13,ue)))}}function Ce(t,o){if(t&1&&p(0,"stock-price-info-card",18),t&2){let i=o.model,a=d(2);c("stock",a.getTooltipData(i.name))}}var ve=()=>({name:"SCHD",value:"deepskyblue"}),ye=()=>({name:"VYM",value:"maroon"}),_e=()=>({name:"JEPI",value:"dodgerblue"}),Te=(t,o,i)=>[t,o,i];function be(t,o){if(t&1&&(l(0,"div",11)(1,"ngx-charts-bar-vertical-2d",25),h(2,Ce,1,1,"ng-template",21,19,C),s()()),t&2){let i=d();n(),c("animations",!0)("results",i.etfPerformanceChartData)("xAxis",!0)("yAxis",!0)("showXAxisLabel",!0)("showYAxisLabel",!0)("legend",!1)("yAxisLabel","ETF Performance %")("showDataLabel",!0)("rotateXAxisTicks",!0)("customColors",L(14,Te,g(11,ve),g(12,ye),g(13,_e)))}}var Pe=()=>({padding:"20px"}),tt=(()=>{let o=class o{constructor(a,e,r){this.dataService=a,this.renderer=e,this.cdr=r,this.sortedStocks=[],this.sortedEtfs=[],this.fiftyTwoWeekChangeChartData=[],this.fiftyTwoWeekLowChartData=[],this.fiftyTwoWeekHighChartData=[],this.fiftyDayMAChartData=[],this.twoHundredDayMAChartData=[],this.discountChartData=[],this.displayTradingviewWidgets=!1,this.sp500FiftyTwoWeekChange=0,this.etfPerformanceChartData=[],this.sp500="S&P 500",this.activeSymbol=[{name:this.sp500}],this.customColor=[{name:this.sp500,value:"orangered"}],this.selectedPerformanceChart=1,this.selectedVSChart=1,this.scaleType=B,this.selectedSymbol="SCHD",this.performanceChartColorScheme={domain:["slategrey"]},this.fiftyTwoWeekChartColorScheme={domain:["slategrey"]},this.targetPriceChartColorScheme={domain:["slategrey"]}}ngOnInit(){this.sortedStocks=Object.values(this.dataService.portfolioData).filter(e=>e.quoteType==="EQUITY").sort((e,r)=>e["52WeekChange"]-r["52WeekChange"]),this.sortedEtfs=Object.values(this.dataService.portfolioData).filter(e=>e.quoteType==="ETF").sort((e,r)=>e.ytdReturn-r.ytdReturn),this.sp500FiftyTwoWeekChange=this.sortedStocks[0].SandP52WeekChange,this.sortedStocks.forEach(e=>{this.fiftyTwoWeekChangeChartData.push({name:e.symbol,value:e["52WeekChange"]*100}),this.fiftyTwoWeekLowChartData.push({name:e.symbol,value:(e.regularMarketPrice-e.fiftyTwoWeekLow)/e.fiftyTwoWeekLow*100}),this.fiftyTwoWeekHighChartData.push({name:e.symbol,value:(e.regularMarketPrice-e.fiftyTwoWeekHigh)/e.fiftyTwoWeekHigh*100}),this.discountChartData.push({name:e.symbol,value:(e.regularMarketPrice-e.targetMeanPrice)/e.targetMeanPrice*100}),this.fiftyDayMAChartData.push({name:e.symbol,value:(e.regularMarketPrice-e.fiftyDayAverage)/e.fiftyDayAverage*100}),this.twoHundredDayMAChartData.push({name:e.symbol,value:(e.regularMarketPrice-e.twoHundredDayAverage)/e.twoHundredDayAverage*100})}),this.fiftyTwoWeekChangeChartData.push({name:this.sp500,value:this.sortedStocks[0].SandP52WeekChange*100}),this.fiftyTwoWeekChangeChartData.sort((e,r)=>e.value-r.value),this.fiftyDayMAChartData.sort((e,r)=>e.value-r.value),this.twoHundredDayMAChartData.sort((e,r)=>e.value-r.value),this.fiftyTwoWeekLowChartData.sort((e,r)=>e.value-r.value),this.fiftyTwoWeekHighChartData.sort((e,r)=>e.value-r.value),this.discountChartData.sort((e,r)=>e.value-r.value);let a={ytd:"Year to Date",oneMonth:"One Month",threeMonth:"Three Month",oneYear:"One Year",threeYear:"Three Year",fiveYear:"Five Year",tenYear:"Ten Year"};Object.keys(a).forEach(e=>{if(a[e]){let r={name:a[e],series:[]};this.sortedEtfs.forEach(f=>{r.series.push({name:f.symbol,value:f.fundPerformance.trailingReturns[e]*100})}),this.etfPerformanceChartData.push(r)}})}getSP500ChangeColor(a){return this.sp500FiftyTwoWeekChange>0?"seagreen":"orangered"}getTooltipData(a){return Object.values(this.dataService.portfolioData).filter(e=>e.symbol===a)[0]}changePerformanceChart(a){this.selectedPerformanceChart=a}changeVSCharts(a){this.selectedVSChart=a}getLogoSource(a){return`/assets/ticker-logos/${a.symbol}.png`}updateWidget(a){this.selectedSymbol="",setTimeout(()=>this.selectedSymbol=a,100)}get getWidget(){return{widget:ee,inputs:{symbol:this.selectedSymbol}}}getStock(){return this.sortedStocks.filter(a=>a.symbol===this.selectedSymbol)[0]}};o.\u0275fac=function(e){return new(e||o)(v(Z),v(A),v(S))},o.\u0275cmp=_({type:o,selectors:[["portfolio-price-trends"]],standalone:!0,features:[M],decls:36,vars:39,consts:[[1,"add-border"],[1,"title"],[1,"logos-container"],["mat-button","","class","ticker-button",3,"click",4,"ngFor","ngForOf"],["class","",4,"ngIf"],[1,"chart-header"],[3,"ngStyle"],["selected","",3,"click"],[3,"click"],[1,"charts-flex"],["class","chart-container",4,"ngIf"],[1,"chart-container"],[3,"scheme","animations","results","xAxis","yAxis","showXAxisLabel","showYAxisLabel","legend","yAxisLabel","rotateXAxisTicks"],[3,"scheme","animations","results","xAxis","yAxis","showXAxisLabel","showYAxisLabel","legend","yAxisLabel","rotateXAxisTicks","yScaleMin"],["mat-button","",1,"ticker-button",3,"click"],["alt","Logo","width","auto","height","35",1,"stock-logo",3,"src"],[1,""],[4,"ngComponentOutlet","ngComponentOutletInputs"],[3,"stock"],["tooltipTemplate",""],[2,"margin","none"],["class","dark"],[3,"scheme","animations","results","xAxis","yAxis","showXAxisLabel","showYAxisLabel","legend","yAxisLabel","rotateXAxisTicks","activeEntries","customColors"],[3,"stock",4,"ngIf"],["style","margin: none;",4,"ngIf"],[3,"animations","results","xAxis","yAxis","showXAxisLabel","showYAxisLabel","legend","yAxisLabel","showDataLabel","rotateXAxisTicks","customColors"]],template:function(e,r){e&1&&(p(0,"price-movement-charts"),l(1,"section",0)(2,"div",1),m(3,"Price Insights"),s(),l(4,"div",2),h(5,re,4,2,"button",3),s(),h(6,ne,3,5,"div",4),s(),l(7,"section",0)(8,"div",5)(9,"div",1)(10,"span"),m(11,"Performance"),s()(),l(12,"mat-chip-listbox",6)(13,"mat-chip-option",7),x("click",function(){return r.changePerformanceChart(1)}),m(14,"Moving Averages"),s(),l(15,"mat-chip-option",8),x("click",function(){return r.changePerformanceChart(2)}),m(16,"52 Week vs S&P500"),s(),l(17,"mat-chip-option",8),x("click",function(){return r.changePerformanceChart(3)}),m(18,"ETFs Performance"),s()()(),l(19,"div",9),h(20,le,4,11,"div",10)(21,me,4,12,"div",10),s(),h(22,xe,4,16,"div",10)(23,be,4,18,"div",10),s(),l(24,"section",0)(25,"div",5)(26,"div",1)(27,"span"),m(28,"Current Price vs 52 Week & Target Price"),s()()(),l(29,"div",9)(30,"div",11),p(31,"ngx-charts-bar-vertical",12),s(),l(32,"div",11),p(33,"ngx-charts-bar-vertical",12),s(),l(34,"div",11),p(35,"ngx-charts-bar-vertical",13),s()()()),e&2&&(n(5),c("ngForOf",r.sortedStocks),n(),c("ngIf",r.selectedSymbol),n(6),c("ngStyle",g(38,Pe)),n(8),c("ngIf",r.selectedPerformanceChart===1),n(),c("ngIf",r.selectedPerformanceChart===1),n(),c("ngIf",r.selectedPerformanceChart===2),n(),c("ngIf",r.selectedPerformanceChart===3),n(8),c("scheme",r.fiftyTwoWeekChartColorScheme)("animations",!0)("results",r.fiftyTwoWeekLowChartData)("xAxis",!0)("yAxis",!0)("showXAxisLabel",!0)("showYAxisLabel",!0)("legend",!1)("yAxisLabel","Current price vs 52 week low %")("rotateXAxisTicks",!0),n(2),c("scheme",r.fiftyTwoWeekChartColorScheme)("animations",!0)("results",r.fiftyTwoWeekHighChartData)("xAxis",!0)("yAxis",!0)("showXAxisLabel",!0)("showYAxisLabel",!0)("legend",!1)("yAxisLabel","Current price vs 52 week High %")("rotateXAxisTicks",!0),n(2),c("scheme",r.targetPriceChartColorScheme)("animations",!0)("results",r.discountChartData)("xAxis",!0)("yAxis",!0)("showXAxisLabel",!0)("showYAxisLabel",!0)("legend",!1)("yAxisLabel","Current price vs target price %")("rotateXAxisTicks",!0)("yScaleMin",-5))},dependencies:[X,E,W,I,F,V,R,G,Q,J,O,Y,N,z,H,K,j,U,$,q,ie,te],styles:[".chart-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.logos-container[_ngcontent-%COMP%]{margin:0 1rem 1rem}.ticker-button[_ngcontent-%COMP%]{align-items:center;height:5rem}.stock-logo[_ngcontent-%COMP%]{border-radius:50%;border:1px solid slategrey}"]});let t=o;return t})();export{tt as a};
