import './polyfills.server.mjs';
import{b as ie}from"./chunk-BQZ2A7M7.mjs";import{d as J}from"./chunk-YERJLX2M.mjs";import{d as U}from"./chunk-7KAN5H44.mjs";import{A as te,a as Q,b as D}from"./chunk-XTPRNWS5.mjs";import{f as V,h as H,i as O,j as B,m as N,n as z,r as G,t as Z}from"./chunk-CJQEX7QP.mjs";import{a as P}from"./chunk-KC5OOQG4.mjs";import{b as ee}from"./chunk-4JXJGIPA.mjs";import{h as $}from"./chunk-LOK34OJP.mjs";import{a as j,b as q,h as K}from"./chunk-4OWJMABH.mjs";import{$b as w,$c as R,Ab as E,Bb as s,Cb as c,Db as h,Hb as y,Jb as f,Kb as m,Ub as S,Vb as g,Wb as F,Ya as n,Za as C,_b as A,ac as _,bc as I,cc as X,fa as k,gc as T,na as u,oa as d,pb as p,rb as l,sc as Y,ua as W,wb as x,xb as M,zb as L}from"./chunk-ARX2IPHX.mjs";function ce(i,o){if(i&1){let t=y();s(0,"button",2),f("click",function(){let e=u(t).$implicit,a=m();return d(a.emitSelectedTicker(e.symbol))}),s(1,"div"),g(2),c()()}if(i&2){let t=o.$implicit;n(2),F(t.symbol)}}function le(i,o){if(i&1){let t=y();s(0,"button",2),f("click",function(){let e=u(t).$implicit,a=m(2);return d(a.emitSelectedTicker(e.symbol))}),s(1,"div"),g(2),c()()}if(i&2){let t=o.$implicit;n(2),F(t.symbol)}}function me(i,o){if(i&1&&L(0,le,3,1,"button",1,M),i&2){let t=m();E(t.sortedEtfs)}}var re=(()=>{let o=class o{constructor(r,e){this.dataService=r,this.helperService=e,this.showETF=!0,this.selectedTicker=new W,this.sortedStocks=[],this.sortedEtfs=[]}ngOnInit(){this.sortedStocks=Object.values(this.dataService.portfolioData).filter(r=>r.quoteType==="EQUITY").sort((r,e)=>r["52WeekChange"].raw-e["52WeekChange"].raw),this.sortedEtfs=Object.values(this.dataService.portfolioData).filter(r=>r.quoteType==="ETF").sort((r,e)=>r.ytdReturn.raw-e.ytdReturn.raw)}emitSelectedTicker(r){this.selectedTicker.emit(r)}};o.\u0275fac=function(e){return new(e||o)(C(P),C(Z))},o.\u0275cmp=k({type:o,selectors:[["stock-ticker-buttons"]],inputs:{showETF:"showETF"},outputs:{selectedTicker:"selectedTicker"},standalone:!0,features:[A],decls:4,vars:1,consts:[[1,"logos-container"],["mat-button","",1,"ticker-button"],["mat-button","",1,"ticker-button",3,"click"]],template:function(e,a){e&1&&(s(0,"div",0),L(1,ce,3,1,"button",1,M),p(3,me,2,0),c()),e&2&&(n(),E(a.sortedStocks),n(2),x(a.showETF?3:-1))},dependencies:[D,Q],styles:[".logos-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;margin:0 0rem 1rem}.ticker-button[_ngcontent-%COMP%]{align-items:center;height:2rem;border:1px solid ghostwhite}.ticker-button[_ngcontent-%COMP%]:hover{border-left:.3rem solid slategrey}"]});let i=o;return i})();var v=i=>[i],he=()=>["S&P 500"],ue=()=>({name:"S&P 500",value:"gold"}),de=(i,o)=>[i,o],pe=()=>({name:"SCHD",value:"deepskyblue"}),fe=()=>({name:"VYM",value:"maroon"}),Ce=()=>({name:"JEPI",value:"dodgerblue"}),xe=(i,o,t)=>[i,o,t];function ye(i,o){if(i&1&&h(0,"stock-price-insight",7),i&2){let t=m(2);l("symbol",t.selectedSymbol)}}function ge(i,o){if(i&1){let t=y();s(0,"stock-ticker-buttons",6),f("selectedTicker",function(e){u(t);let a=m();return d(a.updateSelectedStock(e))}),c(),h(1,"mat-divider"),p(2,ye,1,1,"stock-price-insight",7)}if(i&2){let t=m();n(2),x(t.selectedSymbol?2:-1)}}function we(i,o){if(i&1&&(s(0,"div",9)(1,"div",8),h(2,"ngx-charts-bar-vertical",10),c(),s(3,"div",8),h(4,"ngx-charts-bar-vertical",10),c()(),s(5,"div",9)(6,"div",8),h(7,"ngx-charts-bar-vertical",11),c(),s(8,"div",8),h(9,"ngx-charts-bar-vertical",11),c()(),s(10,"div",9)(11,"div",8),h(12,"ngx-charts-bar-vertical",12),c(),s(13,"div",8),h(14,"ngx-charts-bar-vertical",13),c()()),i&2){let t=m(2);n(2),l("scheme",t.performanceChartColorScheme)("results",t.fiftyDayMAChartData)("animations",!0)("xAxis",!0)("yAxis",!0)("showXAxisLabel",!0)("showYAxisLabel",!0)("legend",!1)("rotateXAxisTicks",!0)("yAxisLabel","Price vs 50 Day MA %")("yScaleMin",t.fiftyDayMAChartData[0].value-5)("customColors",_(70,v,t.selectedSymbolColor)),n(2),l("scheme",t.performanceChartColorScheme)("results",t.twoHundredDayMAChartData)("animations",!0)("xAxis",!0)("yAxis",!0)("showXAxisLabel",!0)("showYAxisLabel",!0)("legend",!1)("rotateXAxisTicks",!0)("yAxisLabel","Price vs 200 Day MA %")("yScaleMin",t.twoHundredDayMAChartData[0].value-5)("customColors",_(72,v,t.selectedSymbolColor)),n(3),l("scheme",t.fiftyTwoWeekChartColorScheme)("results",t.fiftyTwoWeekLowChartData)("animations",!0)("xAxis",!0)("yAxis",!0)("showXAxisLabel",!0)("showYAxisLabel",!0)("legend",!1)("rotateXAxisTicks",!0)("yAxisLabel","Price % above 52 week low")("customColors",_(74,v,t.selectedSymbolColor)),n(2),l("scheme",t.fiftyTwoWeekChartColorScheme)("results",t.fiftyTwoWeekHighChartData)("animations",!0)("xAxis",!0)("yAxis",!0)("showXAxisLabel",!0)("showYAxisLabel",!0)("legend",!1)("rotateXAxisTicks",!0)("yAxisLabel","Price % below 52 week high")("customColors",_(76,v,t.selectedSymbolColor)),n(3),l("scheme",t.performanceChartColorScheme)("results",t.fiftyTwoWeekChangeChartData)("animations",!0)("xAxis",!0)("yAxis",!0)("showXAxisLabel",!0)("showYAxisLabel",!0)("legend",!1)("rotateXAxisTicks",!0)("yAxisLabel","52 Week Change %")("activeEntries",w(78,he))("customColors",I(80,de,t.selectedSymbolColor,w(79,ue))),n(2),l("scheme",t.targetPriceChartColorScheme)("results",t.discountChartData)("animations",!0)("xAxis",!0)("yAxis",!0)("showXAxisLabel",!0)("showYAxisLabel",!0)("legend",!1)("rotateXAxisTicks",!0)("yScaleMin",-5)("yAxisLabel","Price % vs mean target price")("customColors",_(83,v,t.selectedSymbolColor))}}function _e(i,o){if(i&1&&(s(0,"div",8),h(1,"ngx-charts-bar-vertical-2d",14),c()),i&2){let t=m(2);n(),l("results",t.etfPerformanceChartData)("animations",!0)("xAxis",!0)("yAxis",!0)("showXAxisLabel",!0)("showYAxisLabel",!0)("legend",!1)("showDataLabel",!0)("rotateXAxisTicks",!0)("yAxisLabel","ETF Performance %")("customColors",X(14,xe,w(11,pe),w(12,fe),w(13,Ce)))}}function ve(i,o){if(i&1&&p(0,we,15,85)(1,_e,2,18,"div",8),i&2){let t=m();x(t.selectedPerformanceChart===1?0:-1),n(),x(t.selectedPerformanceChart===2?1:-1)}}function be(i,o){if(i&1){let t=y();s(0,"mat-chip-listbox")(1,"mat-chip-option",15),f("click",function(){u(t);let e=m();return d(e.changePerformanceChart(1))}),g(2," Stocks "),c(),s(3,"mat-chip-option",15),f("click",function(){u(t);let e=m();return d(e.changePerformanceChart(2))}),g(4," ETFs "),c()()}if(i&2){let t=m();n(),l("selected",t.selectedPerformanceChart===1),n(2),l("selected",t.selectedPerformanceChart===2)}}var at=(()=>{let o=class o{constructor(r,e){this.dataService=r,this.cdr=e,this.sortedStocks=[],this.sortedEtfs=[],this.sp500FiftyTwoWeekChange=0,this.fiftyTwoWeekChangeChartData=[],this.fiftyTwoWeekLowChartData=[],this.fiftyTwoWeekHighChartData=[],this.discountChartData=[],this.fiftyDayMAChartData=[],this.twoHundredDayMAChartData=[],this.etfPerformanceChartData=[],this.sp500="S&P 500",this.selectedPerformanceChart=1,this.selectedSymbol="AAPL",this.selectedSymbolColor={name:"AAPL",value:"chocolate"},this.performanceChartColorScheme={domain:["slategrey"]},this.fiftyTwoWeekChartColorScheme={domain:["slategrey"]},this.targetPriceChartColorScheme={domain:["slategrey"]}}ngOnInit(){this.sortedStocks=Object.values(this.dataService.portfolioData).filter(e=>e.quoteType==="EQUITY").sort((e,a)=>e["52WeekChange"].raw-a["52WeekChange"].raw),this.sortedEtfs=Object.values(this.dataService.portfolioData).filter(e=>e.quoteType==="ETF").sort((e,a)=>e.ytdReturn.raw-a.ytdReturn.raw),this.sp500FiftyTwoWeekChange=this.sortedStocks[0].SandP52WeekChange.raw,this.selectedStock=this.dataService.portfolioData[this.selectedSymbol],console.dir(this.sortedStocks),console.log(this.sortedStocks),this.sortedStocks.forEach(e=>{this.fiftyDayMAChartData.push({name:e.symbol,value:(e.regularMarketPrice.raw-e.fiftyDayAverage.raw)/e.fiftyDayAverage.raw*100}),this.twoHundredDayMAChartData.push({name:e.symbol,value:(e.regularMarketPrice.raw-e.twoHundredDayAverage.raw)/e.twoHundredDayAverage.raw*100}),this.fiftyTwoWeekChangeChartData.push({name:e.symbol,value:e["52WeekChange"].raw*100}),this.fiftyTwoWeekLowChartData.push({name:e.symbol,value:(e.regularMarketPrice.raw-e.fiftyTwoWeekLow.raw)/e.fiftyTwoWeekLow.raw*100}),this.fiftyTwoWeekHighChartData.push({name:e.symbol,value:(e.regularMarketPrice.raw-e.fiftyTwoWeekHigh.raw)/e.fiftyTwoWeekHigh.raw*100}),e.targetMeanPrice.raw&&this.discountChartData.push({name:e.symbol,value:(e.regularMarketPrice.raw-e.targetMeanPrice.raw)/e.targetMeanPrice.raw*100})}),this.fiftyTwoWeekChangeChartData.push({name:this.sp500,value:this.sortedStocks[0].SandP52WeekChange.raw*100}),this.fiftyDayMAChartData.sort((e,a)=>e.value-a.value),this.twoHundredDayMAChartData.sort((e,a)=>e.value-a.value),this.fiftyTwoWeekChangeChartData.sort((e,a)=>e.value-a.value),this.fiftyTwoWeekLowChartData.sort((e,a)=>e.value-a.value),this.fiftyTwoWeekHighChartData.sort((e,a)=>e.value-a.value),this.discountChartData.sort((e,a)=>e.value-a.value);let r={ytd:"Year to Date",oneMonth:"One Month",threeMonth:"Three Month",oneYear:"One Year",threeYear:"Three Year",fiveYear:"Five Year",tenYear:"Ten Year"};Object.keys(r).forEach(e=>{let a={name:r[e],series:[]};this.sortedEtfs.forEach(b=>{a.series.push({name:b.symbol,value:b.fundPerformance.trailingReturns[e].raw*100})}),this.etfPerformanceChartData.push(a)})}changePerformanceChart(r){this.selectedPerformanceChart=r}updateSelectedStock(r){this.selectedSymbol=null,this.cdr.detectChanges(),this.selectedSymbol=r,this.selectedSymbolColor={name:r,value:"chocolate"},this.selectedStock=[this.dataService.portfolioData[r]],this.selectedStock[0].quoteType==="ETF"?this.changePerformanceChart(2):this.changePerformanceChart(1)}};o.\u0275fac=function(e){return new(e||o)(C(P),C(Y))},o.\u0275cmp=k({type:o,selectors:[["portfolio-price-insights"]],standalone:!0,features:[A],decls:9,vars:4,consts:[["priceInsightsRef",""],["performanceChartsRef",""],["performanceChartsTitleRef",""],[3,"expandWidget"],["title","Price Insights",3,"mainContentRef"],["title","Performace Charts",3,"mainContentRef","titleContentRef"],[3,"selectedTicker"],[3,"symbol"],[1,"chart-container"],[1,"add-flex"],[3,"scheme","results","animations","xAxis","yAxis","showXAxisLabel","showYAxisLabel","legend","rotateXAxisTicks","yAxisLabel","yScaleMin","customColors"],[3,"scheme","results","animations","xAxis","yAxis","showXAxisLabel","showYAxisLabel","legend","rotateXAxisTicks","yAxisLabel","customColors"],[3,"scheme","results","animations","xAxis","yAxis","showXAxisLabel","showYAxisLabel","legend","rotateXAxisTicks","yAxisLabel","activeEntries","customColors"],[3,"scheme","results","animations","xAxis","yAxis","showXAxisLabel","showYAxisLabel","legend","rotateXAxisTicks","yScaleMin","yAxisLabel","customColors"],[3,"results","animations","xAxis","yAxis","showXAxisLabel","showYAxisLabel","legend","showDataLabel","rotateXAxisTicks","yAxisLabel","customColors"],[3,"click","selected"]],template:function(e,a){if(e&1&&(h(0,"stock-price-movement-charts",3),p(1,ge,3,1,"ng-template",null,0,T),h(3,"container-card",4),p(4,ve,2,2,"ng-template",null,1,T)(6,be,5,2,"ng-template",null,2,T),h(8,"container-card",5)),e&2){let b=S(2),oe=S(5),ae=S(7);l("expandWidget",!1),n(3),l("mainContentRef",b),n(5),l("mainContentRef",oe)("titleContentRef",ae)}},dependencies:[R,K,D,B,O,H,q,j,J,V,$,ee,U,G,N,z,te,ie,re],styles:[".chart-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}"]});let i=o;return i})();export{at as a};
