import './polyfills.server.mjs';
import{a as w}from"./chunk-DBK27LC2.mjs";import{a as le,b as ce}from"./chunk-5E6T7AGC.mjs";import{a as te,c as ie,e as ae,h as ne}from"./chunk-RTBQMOZY.mjs";import{h as _,i as se}from"./chunk-TOPSXTHC.mjs";import{g as G,h as J,i as $}from"./chunk-CXBYSPLP.mjs";import{a as K,b as z,c as Z,d as ee}from"./chunk-SVGEU7K3.mjs";import{a as O,b as q,c as re}from"./chunk-XXXBHDGF.mjs";import{f as oe}from"./chunk-WTBYBICK.mjs";import{Q as Y,R as j}from"./chunk-BD6CSYZT.mjs";import{$b as X,Cb as s,Db as c,Eb as d,Ib as I,Lb as b,Nb as m,Sb as y,Tb as k,Ub as P,Xb as R,Ya as o,Yb as p,Yc as F,Za as g,Zb as D,_b as S,ad as B,bc as f,bd as U,cd as H,dc as E,fa as u,gc as A,hc as L,ic as N,jc as Q,na as M,oa as T,qb as v,sb as h,xb as C}from"./chunk-QYGPEMDX.mjs";var ge=["miniChartWidget"],me=(()=>{let n=class n{constructor(a){this.tradingviewService=a,this.width="100%",this.height=200,this.range="12M",this.theme="light"}ngAfterViewInit(){let a=this.tradingviewService.miniChartWidget(this.symbol,this.width,this.height,this.range,this.theme);this.miniChartWidget.nativeElement.appendChild(a)}};n.\u0275fac=function(i){return new(i||n)(g(w))},n.\u0275cmp=u({type:n,selectors:[["tv-mini-chart-widget"]],viewQuery:function(i,r){if(i&1&&y(ge,5),i&2){let l;k(l=P())&&(r.miniChartWidget=l.first)}},inputs:{symbol:"symbol",width:"width",height:"height",range:"range",theme:"theme"},standalone:!0,features:[f],decls:2,vars:0,consts:[["miniChartWidget",""]],template:function(i,r){i&1&&d(0,"div",null,0)},encapsulation:2});let e=n;return e})();var ue=["marketQuotesWidget"],he=(()=>{let n=class n{constructor(a){this.tradingviewService=a}ngOnInit(){this.params={width:"100%",height:this.height,symbolsGroups:[{name:"Portfolio",symbols:this.stockNames}],showSymbolLogo:!0,isTransparent:!1,colorTheme:"light",locale:"en"},this.params=JSON.stringify(this.params)}ngAfterViewInit(){let a=this.tradingviewService.marketQuotesWidget(this.params);this.marketQuotesWidget.nativeElement.append(a)}};n.\u0275fac=function(i){return new(i||n)(g(w))},n.\u0275cmp=u({type:n,selectors:[["tv-market-quotes-widget"]],viewQuery:function(i,r){if(i&1&&y(ue,5),i&2){let l;k(l=P())&&(r.marketQuotesWidget=l.first)}},inputs:{stockNames:"stockNames",height:"height"},standalone:!0,features:[f],decls:2,vars:0,consts:[["marketQuotesWidget",""]],template:function(i,r){i&1&&d(0,"div",null,0)},encapsulation:2});let e=n;return e})();var Ce=["tickersWidget"],Ee=(()=>{let n=class n{constructor(a){this.tradingviewService=a,this.symbols=`[
    {
      "title": "S&P 500 Index",
      "proName": "FOREXCOM:SPXUSD"
    },
    {
      "title": "Nasdaq 100",
      "proName": "NASDAQ:NDX"
    },
    {
      "title": "Dow Jones Industrial",
      "proName": "DJI"
    },
    {
      "title": "Bitcoin",
      "proName": "BITSTAMP:BTCUSD"
    },
    {
      "title": "Ethereum",
      "proName": "BITSTAMP:ETHUSD"
    },
    {
      "title": "Dogecoin",
      "proName": "BINANCE:DOGEUSD"
    },
    {
      "title": "USD/RMB",
      "proName": "FX:USDCNH"
    },
    {
      "title": "USD/JPY",
      "proName": "FX:USDJPY"
    },
    {
      "title": "EUR/USD",
      "proName": "FX:EURUSD"
    }
  ]`,this.theme="light",this.displayMode="adaptive"}ngAfterViewInit(){let a=this.tradingviewService.tickersWidget(this.symbols,this.tape,this.displayMode,this.theme);this.tickersWidget.nativeElement.appendChild(a);try{let i=this.tickersWidget.nativeElement.children[1];this.tickersWidget.nativeElement.removeChild(i)}catch{}}};n.\u0275fac=function(i){return new(i||n)(g(w))},n.\u0275cmp=u({type:n,selectors:[["tv-tickers-widget"]],viewQuery:function(i,r){if(i&1&&y(Ce,5),i&2){let l;k(l=P())&&(r.tickersWidget=l.first)}},inputs:{symbols:"symbols",tape:"tape",theme:"theme",displayMode:"displayMode"},standalone:!0,features:[f],decls:2,vars:0,consts:[["tickersWidget",""]],template:function(i,r){i&1&&d(0,"div",null,0)},encapsulation:2});let e=n;return e})();var W=e=>({color:e});function fe(e,n){if(e&1){let t=I();s(0,"div",5)(1,"mat-chip-listbox")(2,"mat-chip-option",6),b("click",function(){M(t);let i=m();return T(i.displayChart(1))}),p(3,"Price Changes"),c(),s(4,"mat-chip-option",7),b("click",function(){M(t);let i=m();return T(i.displayChart(2))}),p(5,"Beta"),c()()()}}function xe(e,n){if(e&1&&(s(0,"div",5)(1,"span"),p(2,"Regular Market "),c(),s(3,"mat-icon"),p(4,"schedule"),c(),s(5,"span",9),p(6),A(7,"currency"),c(),s(8,"span",9),p(9),A(10,"percent"),c()()),e&2){let t=m(3);o(5),h("ngStyle",E(9,W,t.getDayPriceChangeColor())),o(),S(" ",L(7,4,t.priceChange)," "),o(2),h("ngStyle",E(11,W,t.getDayPriceChangeColor())),o(),S(" (",N(10,6,t.priceChange/t.portfolioMarketValue,".4"),") ")}}function _e(e,n){if(e&1&&(s(0,"div",5)(1,"span"),p(2),c(),s(3,"mat-icon"),p(4),c(),s(5,"span",9),p(6),A(7,"currency"),c(),s(8,"span",9),p(9),A(10,"percent"),c()()),e&2){let t=m(3);o(2),D(t.prePostHourText),o(2),D(t.prePostHourIcon),o(),h("ngStyle",E(11,W,t.getPrePostPriceChangeColor())),o(),S(" ",L(7,6,t.prePostPriceChange)," "),o(2),h("ngStyle",E(13,W,t.getPrePostPriceChangeColor())),o(),S(" (",N(10,8,t.prePostPriceChange/t.portfolioMarketValue,".4"),") ")}}function ve(e,n){if(e&1){let t=I();s(0,"mat-slide-toggle",10),b("toggleChange",function(){M(t);let i=m(3);return T(i.changeChart())}),s(1,"span"),p(2),c()()}if(e&2){let t=m(3);o(2),D(t.chartConfigs.preMarket.toggleText)}}function ye(e,n){if(e&1){let t=I();s(0,"mat-slide-toggle",10),b("toggleChange",function(){M(t);let i=m(3);return T(i.changeChart())}),s(1,"span"),p(2),c()()}if(e&2){let t=m(3);o(2),D(t.chartConfigs.postMarket.toggleText)}}function ke(e,n){if(e&1&&(s(0,"div",8),v(1,xe,11,13,"div",5)(2,_e,11,15,"div",5)(3,ve,3,1,"mat-slide-toggle")(4,ye,3,1,"mat-slide-toggle"),c()),e&2){let t=m(2);o(),C(t.prefix.startsWith("pre")?-1:1),o(),C(t.prefix.startsWith("regular")?-1:2),o(),C(t.prefix.startsWith("pre")?3:-1),o(),C(t.prefix.startsWith("post")?4:-1)}}function Pe(e,n){if(e&1&&v(0,ke,5,4,"div",8),e&2){let t=m();C(t.marketState!=="CLOSED"?0:-1)}}function Se(e,n){if(e&1&&(d(0,"tv-mini-chart-widget",16)(1,"mat-divider",17),s(2,"span"),p(3),c(),s(4,"span"),p(5),c()),e&2){let t=n.model,a=m(3);h("symbol",t.name)("theme","dark"),o(3),X("",a.chartConfigs[a.prefix].text," : ",t.name," "),o(2),S("",t.value.toFixed(2),"%")}}function we(e,n){if(e&1&&(s(0,"div",5)(1,"div",13)(2,"ngx-charts-bar-vertical",14),v(3,Se,6,5,"ng-template",null,3,Q),c()(),s(5,"div",13),d(6,"ngx-charts-bar-vertical-stacked",15),c()()),e&2){let t=m(2);o(2),h("results",t.priceChangeChartData)("xAxis",!0)("yAxis",!0)("showXAxisLabel",!0)("showYAxisLabel",!0)("rotateXAxisTicks",!0)("animations",!0)("showDataLabel",!0)("yAxisLabel","Price Change %")("customColors",t.getPriceChangeChartColor),o(4),h("scheme",t.priceRangeColorScheme)("results",t.priceRangeChartData)("xAxis",!0)("yAxis",!0)("showXAxisLabel",!0)("showYAxisLabel",!0)("rotateXAxisTicks",!0)("animations",!0)("yAxisLabel","Market Day Price Range $")}}function Me(e,n){if(e&1&&(s(0,"div",5)(1,"div",13),d(2,"ngx-charts-bar-vertical",18),c()()),e&2){let t=m(2);o(2),h("scheme",t.betaColorScheme)("schemeType",t.scaleType.Linear)("results",t.betaChartData)("xAxis",!0)("yAxis",!0)("showXAxisLabel",!0)("showYAxisLabel",!0)("rotateXAxisTicks",!0)("animations",!0)("yAxisLabel","Beta")}}function Te(e,n){if(e&1&&(v(0,we,7,19,"div",5)(1,Me,3,10,"div",5),s(2,"mat-expansion-panel",11)(3,"mat-expansion-panel-header")(4,"mat-panel-title")(5,"mat-icon"),p(6,"price_change"),c(),s(7,"span"),p(8,"Quotes"),c()()(),d(9,"tv-market-quotes-widget",12),c()),e&2){let t=m();C(t.selectedChart===1?0:-1),o(),C(t.selectedChart===2?1:-1),o(),h("expanded",t.expandWidget),o(7),h("stockNames",t.stockNames)("height",410)}}var et=(()=>{let n=class n{constructor(a,i){this.dataService=a,this.helper=i,this.showTickers=!0,this.priceChange=0,this.prePostPriceChange=0,this.priceChangeChartData=[],this.priceRangeChartData=[],this.betaChartData=[],this.stockNames=[],this.priceRangeColorScheme={domain:["steelblue","skyblue"]},this.betaColorScheme={domain:["slategrey"]},this.scaleType=te,this.selectedChart=1,this.toggleChecked=!1,this.portfolioMarketValue=0,this.chartConfigs={preMarket:{text:"Pre Market",toggleText:"Pre Market Chart",priceChange:"preMarketChange",priceChangePercent:"preMarketChangePercent"},postMarket:{text:"Post Market",toggleText:"Post Market Chart",priceChange:"postMarketChange",priceChangePercent:"postMarketChangePercent"},regularMarket:{text:"Regular Market"}},this.marketState="",this.getPriceChangeChartColor=r=>{let l=this.toggleChecked?this.chartConfigs[this.prefix]?.priceChangePercent:"regularMarketChangePercent";return this.dataService.portfolioData[r][l].raw>0?_.Gain:_.Lost}}ngOnInit(){this.marketState=this.dataService.marketState,this.prefix=this.helper.getPriceKeyPrefix(),this.portfolioMarketValue=this.dataService.portfolioHoldings.marketValue,this.prePostHourIcon=this.prefix.startsWith("pre")?"sunny":"bedtime",this.prePostHourText=this.prefix.startsWith("pre")?"Pre Market ":"Post Market ",this.dataService.portfolioSymbols.forEach(a=>{let i=this.dataService.portfolioHoldings[a],r=this.dataService.portfolioData[a];if(this.stockNames.push({name:r.symbol,displayName:`${r.longName} - ${r.profile.sector||r.quoteType} - ${r.symbol}`}),this.priceChange+=r.regularMarketChange.raw*i.shares,this.priceChangeChartData.push({name:r.symbol,value:r.regularMarketChangePercent.raw*100}),this.priceChangeChartData.sort((l,x)=>l.value-x.value),this.priceRangeChartData.push({name:r.symbol,series:[{name:"Price -> Day Low Range",value:r.regularMarketPrice.raw-r.regularMarketDayLow.raw},{name:"Price -> Day High Range",value:r.regularMarketDayHigh.raw-r.regularMarketPrice.raw}]}),this.priceRangeChartData.sort((l,x)=>l.series[0].value+l.series[1].value-(x.series[0].value+x.series[1].value)),!this.prefix.startsWith("regular")){let l=this.chartConfigs[this.prefix].priceChange;r[l]&&(this.prePostPriceChange+=r[l].raw*i.shares)}r.quoteType==="EQUITY"&&r.beta.raw&&this.betaChartData.push({name:r.symbol,value:r.beta.raw||0})}),this.stockNames.sort((a,i)=>{let r=this.dataService.portfolioData[a.name].regularMarketChangePercent.raw,l=this.dataService.portfolioData[i.name].regularMarketChangePercent.raw;return r-l}),this.betaChartData.sort((a,i)=>a.value-i.value)}getDayPriceChangeColor(){return this.priceChange>0?_.Gain:_.Lost}getPrePostPriceChangeColor(){return this.prePostPriceChange>0?_.Gain:_.Lost}displayChart(a){this.selectedChart=a}changeChart(){this.toggleChecked=!this.toggleChecked;let a=this.toggleChecked?this.prefix+"ChangePercent":"regularMarketChangePercent";this.priceChangeChartData=[],this.dataService.portfolioSymbols?.forEach(i=>{let r=this.dataService.portfolioData[i];r[a].raw&&this.priceChangeChartData.push({name:r.symbol,value:r[a].raw*100})}),this.priceChangeChartData.sort((i,r)=>i.value-r.value)}};n.\u0275fac=function(i){return new(i||n)(g(re),g(se))},n.\u0275cmp=u({type:n,selectors:[["portfolio-quotes"]],inputs:{showTickers:"showTickers",expandWidget:"expandWidget"},standalone:!0,features:[f],decls:7,vars:3,consts:[["titleContentRef",""],["subContentRef",""],["ValueChangeRef",""],["tooltipTemplate",""],["title","Portfolio Quotes",3,"titleContentRef","subContentRef","mainContentRef"],[1,"add-flex"],["selected","",3,"click"],[3,"click"],[1,"subcontent-wrapper"],[3,"ngStyle"],[3,"toggleChange"],[3,"expanded"],[3,"stockNames","height"],[1,"chart-container"],[3,"results","xAxis","yAxis","showXAxisLabel","showYAxisLabel","rotateXAxisTicks","animations","showDataLabel","yAxisLabel","customColors"],[3,"scheme","results","xAxis","yAxis","showXAxisLabel","showYAxisLabel","rotateXAxisTicks","animations","yAxisLabel"],[3,"symbol","theme"],[2,"margin","none","border-top-color","slategrey"],[3,"scheme","schemeType","results","xAxis","yAxis","showXAxisLabel","showYAxisLabel","rotateXAxisTicks","animations","yAxisLabel"]],template:function(i,r){if(i&1&&(v(0,fe,6,0,"ng-template",null,0,Q)(2,Pe,1,1,"ng-template",null,1,Q)(4,Te,10,5,"ng-template",null,2,Q),d(6,"container-card",4)),i&2){let l=R(1),x=R(3),de=R(5);o(6),h("titleContentRef",l)("subContentRef",x)("mainContentRef",de)}},dependencies:[H,F,B,U,oe,$,J,G,j,Y,ee,K,z,Z,q,O,ce,le,ne,ie,ae,he,me],styles:[".subcontent-wrapper[_ngcontent-%COMP%]{display:flex;align-content:center!important;align-items:center;margin-top:.5rem;font-size:1.25rem}.subcontent-wrapper[_ngcontent-%COMP%]   .add-flex[_ngcontent-%COMP%]{margin-right:1rem}  .mat-expansion-panel-body{padding:0!important}"]});let e=n;return e})();export{Ee as a,et as b};
