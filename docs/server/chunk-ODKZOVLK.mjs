import './polyfills.server.mjs';
import"./chunk-D5ZEWWL7.mjs";import"./chunk-VLC7UD3X.mjs";import"./chunk-PSCBY3ZV.mjs";import{z as te}from"./chunk-WK3YIIZN.mjs";import{a as V,c as P}from"./chunk-XIEHA2CQ.mjs";import{f as Q}from"./chunk-GRLW46S7.mjs";import{b as ee}from"./chunk-CJKRK5KJ.mjs";import"./chunk-NUCLBE42.mjs";import"./chunk-6RGQT6YZ.mjs";import"./chunk-XOMLLSLV.mjs";import{b as K}from"./chunk-IKLCSOS6.mjs";import"./chunk-3TKZGD4Y.mjs";import"./chunk-ZF2FOA2B.mjs";import{e as O,g as j,h as q,i as $,k as Z}from"./chunk-FALGKQPL.mjs";import{d as J,e as N,i as z}from"./chunk-P5ZXI3BA.mjs";import"./chunk-AVV43XVT.mjs";import{d as U}from"./chunk-ON7TDIZI.mjs";import{b as H}from"./chunk-EN2ASLBS.mjs";import"./chunk-YG54OGXN.mjs";import{a as D}from"./chunk-GMF6TEPD.mjs";import{f as G}from"./chunk-A5GLH26F.mjs";import{b as B}from"./chunk-ADBMVI5A.mjs";import"./chunk-XASZ3SUR.mjs";import"./chunk-TGSQJEM2.mjs";import"./chunk-C7QHNKL3.mjs";import{Ab as L,Bb as E,Cb as s,Db as c,Eb as h,Ib as C,Lb as x,Nb as l,Xb as S,Ya as n,Yb as _,Za as y,Zb as F,bc as T,cc as g,cd as R,dc as w,ec as I,fa as k,fc as X,jc as A,na as p,oa as f,qb as u,sb as m,ua as W,vc as Y,xb as d,yb as M}from"./chunk-Y7GFRNBX.mjs";import"./chunk-5XUXGTUW.mjs";function se(i,r){if(i&1){let t=C();s(0,"button",2),x("click",function(){let e=p(t).$implicit,a=l();return f(a.emitSelectedTicker(e.symbol))}),s(1,"div"),_(2),c()()}if(i&2){let t=r.$implicit;n(2),F(t.symbol)}}function ce(i,r){if(i&1){let t=C();s(0,"button",2),x("click",function(){let e=p(t).$implicit,a=l(2);return f(a.emitSelectedTicker(e.symbol))}),s(1,"div"),_(2),c()()}if(i&2){let t=r.$implicit;n(2),F(t.symbol)}}function le(i,r){if(i&1&&L(0,ce,3,1,"button",1,M),i&2){let t=l();E(t.sortedEtfs)}}var ie=(()=>{let r=class r{constructor(o,e){this.dataService=o,this.helperService=e,this.showETF=!0,this.selectedTicker=new W,this.sortedStocks=[],this.sortedEtfs=[]}ngOnInit(){this.sortedStocks=Object.values(this.dataService.portfolioData).filter(o=>o.quoteType==="EQUITY").sort((o,e)=>o["52WeekChange"].raw-e["52WeekChange"].raw),this.sortedEtfs=Object.values(this.dataService.portfolioData).filter(o=>o.quoteType==="ETF").sort((o,e)=>o.ytdReturn.raw-e.ytdReturn.raw)}emitSelectedTicker(o){this.selectedTicker.emit(o)}};r.\u0275fac=function(e){return new(e||r)(y(D),y(Z))},r.\u0275cmp=k({type:r,selectors:[["stock-ticker-buttons"]],inputs:{showETF:"showETF"},outputs:{selectedTicker:"selectedTicker"},standalone:!0,features:[T],decls:4,vars:1,consts:[[1,"logos-container"],["mat-button","",1,"ticker-button"],["mat-button","",1,"ticker-button",3,"click"]],template:function(e,a){e&1&&(s(0,"div",0),L(1,se,3,1,"button",1,M),u(3,le,2,0),c()),e&2&&(n(),E(a.sortedStocks),n(2),d(a.showETF?3:-1))},dependencies:[P,V],styles:[".logos-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;margin:0 0rem 1rem}.ticker-button[_ngcontent-%COMP%]{align-items:center;height:2rem;border:1px solid ghostwhite}.ticker-button[_ngcontent-%COMP%]:hover{border:1px solid slategrey;border-left:.3rem solid slategrey}"]});let i=r;return i})();var v=i=>[i],me=()=>["S&P 500"],he=()=>({name:"S&P 500",value:"gold"}),ue=(i,r)=>[i,r],de=()=>({name:"SCHD",value:"deepskyblue"}),pe=()=>({name:"VYM",value:"maroon"}),fe=()=>({name:"JEPI",value:"dodgerblue"}),Ce=(i,r,t)=>[i,r,t];function xe(i,r){if(i&1&&h(0,"stock-price-insight",7),i&2){let t=l(2);m("symbol",t.selectedSymbol)}}function ye(i,r){if(i&1){let t=C();s(0,"stock-ticker-buttons",6),x("selectedTicker",function(e){p(t);let a=l();return f(a.updateSelectedStock(e))}),c(),u(1,xe,1,1,"stock-price-insight",7)}if(i&2){let t=l();n(),d(t.selectedSymbol?1:-1)}}function _e(i,r){if(i&1&&(s(0,"div",9)(1,"div",8),h(2,"ngx-charts-bar-vertical",10),c(),s(3,"div",8),h(4,"ngx-charts-bar-vertical",10),c()(),s(5,"div",9)(6,"div",8),h(7,"ngx-charts-bar-vertical",11),c(),s(8,"div",8),h(9,"ngx-charts-bar-vertical",11),c()(),s(10,"div",9)(11,"div",8),h(12,"ngx-charts-bar-vertical",12),c(),s(13,"div",8),h(14,"ngx-charts-bar-vertical",13),c()()),i&2){let t=l(2);n(2),m("scheme",t.performanceChartColorScheme)("results",t.fiftyDayMAChartData)("animations",!0)("xAxis",!0)("yAxis",!0)("showXAxisLabel",!0)("showYAxisLabel",!0)("legend",!1)("rotateXAxisTicks",!0)("yAxisLabel","Price vs 50 Day MA %")("yScaleMin",t.fiftyDayMAChartData[0].value-5)("customColors",w(70,v,t.selectedSymbolColor)),n(2),m("scheme",t.performanceChartColorScheme)("results",t.twoHundredDayMAChartData)("animations",!0)("xAxis",!0)("yAxis",!0)("showXAxisLabel",!0)("showYAxisLabel",!0)("legend",!1)("rotateXAxisTicks",!0)("yAxisLabel","Price vs 200 Day MA %")("yScaleMin",t.twoHundredDayMAChartData[0].value-5)("customColors",w(72,v,t.selectedSymbolColor)),n(3),m("scheme",t.fiftyTwoWeekChartColorScheme)("results",t.fiftyTwoWeekLowChartData)("animations",!0)("xAxis",!0)("yAxis",!0)("showXAxisLabel",!0)("showYAxisLabel",!0)("legend",!1)("rotateXAxisTicks",!0)("yAxisLabel","Price % above 52 week low")("customColors",w(74,v,t.selectedSymbolColor)),n(2),m("scheme",t.fiftyTwoWeekChartColorScheme)("results",t.fiftyTwoWeekHighChartData)("animations",!0)("xAxis",!0)("yAxis",!0)("showXAxisLabel",!0)("showYAxisLabel",!0)("legend",!1)("rotateXAxisTicks",!0)("yAxisLabel","Price % below 52 week high")("customColors",w(76,v,t.selectedSymbolColor)),n(3),m("scheme",t.performanceChartColorScheme)("results",t.fiftyTwoWeekChangeChartData)("animations",!0)("xAxis",!0)("yAxis",!0)("showXAxisLabel",!0)("showYAxisLabel",!0)("legend",!1)("rotateXAxisTicks",!0)("yAxisLabel","52 Week Change %")("activeEntries",g(78,me))("customColors",I(80,ue,t.selectedSymbolColor,g(79,he))),n(2),m("scheme",t.targetPriceChartColorScheme)("results",t.discountChartData)("animations",!0)("xAxis",!0)("yAxis",!0)("showXAxisLabel",!0)("showYAxisLabel",!0)("legend",!1)("rotateXAxisTicks",!0)("yScaleMin",-5)("yAxisLabel","Price % vs mean target price")("customColors",w(83,v,t.selectedSymbolColor))}}function ge(i,r){if(i&1&&(s(0,"div",8),h(1,"ngx-charts-bar-vertical-2d",14),c()),i&2){let t=l(2);n(),m("results",t.etfPerformanceChartData)("animations",!0)("xAxis",!0)("yAxis",!0)("showXAxisLabel",!0)("showYAxisLabel",!0)("legend",!1)("showDataLabel",!0)("rotateXAxisTicks",!0)("yAxisLabel","ETF Performance %")("customColors",X(14,Ce,g(11,de),g(12,pe),g(13,fe)))}}function we(i,r){if(i&1&&u(0,_e,15,85)(1,ge,2,18,"div",8),i&2){let t=l();d(t.selectedPerformanceChart===1?0:-1),n(),d(t.selectedPerformanceChart===2?1:-1)}}function ve(i,r){if(i&1){let t=C();s(0,"mat-chip-option",16),x("click",function(){p(t);let e=l(2);return f(e.changePerformanceChart(1))}),_(1," Stocks "),c()}if(i&2){let t=l(2);m("selected",t.selectedPerformanceChart===1)}}function be(i,r){if(i&1){let t=C();s(0,"mat-chip-option",16),x("click",function(){p(t);let e=l(2);return f(e.changePerformanceChart(2))}),_(1," ETFs "),c()}if(i&2){let t=l(2);m("selected",t.selectedPerformanceChart===2)}}function ke(i,r){if(i&1&&(s(0,"mat-chip-listbox"),u(1,ve,2,1,"mat-chip-option",15)(2,be,2,1,"mat-chip-option",15),c()),i&2){let t=l();n(),d(t.sortedStocks.length>0?1:-1),n(),d(t.sortedEtfs.length>0?2:-1)}}var at=(()=>{let r=class r{constructor(o,e){this.dataService=o,this.cdr=e,this.sortedStocks=[],this.sortedEtfs=[],this.sp500FiftyTwoWeekChange=0,this.fiftyTwoWeekChangeChartData=[],this.fiftyTwoWeekLowChartData=[],this.fiftyTwoWeekHighChartData=[],this.discountChartData=[],this.fiftyDayMAChartData=[],this.twoHundredDayMAChartData=[],this.etfPerformanceChartData=[],this.sp500="S&P 500",this.selectedPerformanceChart=1,this.performanceChartColorScheme={domain:["slategrey"]},this.fiftyTwoWeekChartColorScheme={domain:["slategrey"]},this.targetPriceChartColorScheme={domain:["slategrey"]}}ngOnInit(){this.sortedStocks=this.dataService.portfolioDataArray.filter(e=>e.quoteType==="EQUITY").sort((e,a)=>e["52WeekChange"].raw-a["52WeekChange"].raw),this.sortedEtfs=this.dataService.portfolioDataArray.filter(e=>e.quoteType==="ETF").sort((e,a)=>e.ytdReturn.raw-a.ytdReturn.raw),this.sp500FiftyTwoWeekChange=this.sortedStocks[0].SandP52WeekChange.raw,this.selectedSymbol=this.sortedStocks[0].symbol||this.sortedEtfs[0].symbol,this.selectedStock=this.dataService.portfolioData[this.selectedSymbol],this.selectedSymbolColor={name:this.selectedSymbol,value:"chocolate"},this.sortedStocks.forEach(e=>{this.fiftyDayMAChartData.push({name:e.symbol,value:(e.regularMarketPrice.raw-e.fiftyDayAverage.raw)/e.fiftyDayAverage.raw*100}),this.twoHundredDayMAChartData.push({name:e.symbol,value:(e.regularMarketPrice.raw-e.twoHundredDayAverage.raw)/e.twoHundredDayAverage.raw*100}),this.fiftyTwoWeekChangeChartData.push({name:e.symbol,value:e["52WeekChange"].raw*100}),this.fiftyTwoWeekLowChartData.push({name:e.symbol,value:(e.regularMarketPrice.raw-e.fiftyTwoWeekLow.raw)/e.fiftyTwoWeekLow.raw*100}),this.fiftyTwoWeekHighChartData.push({name:e.symbol,value:(e.regularMarketPrice.raw-e.fiftyTwoWeekHigh.raw)/e.fiftyTwoWeekHigh.raw*100}),e.targetMeanPrice.raw&&this.discountChartData.push({name:e.symbol,value:(e.regularMarketPrice.raw-e.targetMeanPrice.raw)/e.targetMeanPrice.raw*100})}),this.fiftyTwoWeekChangeChartData.push({name:this.sp500,value:this.sortedStocks[0].SandP52WeekChange.raw*100}),this.fiftyDayMAChartData.sort((e,a)=>e.value-a.value),this.twoHundredDayMAChartData.sort((e,a)=>e.value-a.value),this.fiftyTwoWeekChangeChartData.sort((e,a)=>e.value-a.value),this.fiftyTwoWeekLowChartData.sort((e,a)=>e.value-a.value),this.fiftyTwoWeekHighChartData.sort((e,a)=>e.value-a.value),this.discountChartData.sort((e,a)=>e.value-a.value);let o={ytd:"Year to Date",oneMonth:"One Month",threeMonth:"Three Month",oneYear:"One Year",threeYear:"Three Year",fiveYear:"Five Year",tenYear:"Ten Year"};Object.keys(o).forEach(e=>{let a={name:o[e],series:[]};this.sortedEtfs.forEach(b=>{a.series.push({name:b.symbol,value:b.fundPerformance.trailingReturns[e].raw*100})}),this.etfPerformanceChartData.push(a)})}changePerformanceChart(o){this.selectedPerformanceChart=o}updateSelectedStock(o){this.selectedSymbol=null,this.cdr.detectChanges(),this.selectedSymbol=o,this.selectedSymbolColor={name:o,value:"chocolate"},this.selectedStock=[this.dataService.portfolioData[o]],this.selectedStock[0].quoteType==="ETF"?this.changePerformanceChart(2):this.changePerformanceChart(1)}};r.\u0275fac=function(e){return new(e||r)(y(D),y(Y))},r.\u0275cmp=k({type:r,selectors:[["portfolio-price-insights"]],standalone:!0,features:[T],decls:9,vars:4,consts:[["priceInsightsRef",""],["performanceChartsRef",""],["performanceChartsTitleRef",""],[3,"expandWidget"],["title","Price Insights",3,"mainContentRef"],["title","Performance Charts",3,"mainContentRef","titleContentRef"],[3,"selectedTicker"],[3,"symbol"],[1,"chart-container"],[1,"add-flex"],[3,"scheme","results","animations","xAxis","yAxis","showXAxisLabel","showYAxisLabel","legend","rotateXAxisTicks","yAxisLabel","yScaleMin","customColors"],[3,"scheme","results","animations","xAxis","yAxis","showXAxisLabel","showYAxisLabel","legend","rotateXAxisTicks","yAxisLabel","customColors"],[3,"scheme","results","animations","xAxis","yAxis","showXAxisLabel","showYAxisLabel","legend","rotateXAxisTicks","yAxisLabel","activeEntries","customColors"],[3,"scheme","results","animations","xAxis","yAxis","showXAxisLabel","showYAxisLabel","legend","rotateXAxisTicks","yScaleMin","yAxisLabel","customColors"],[3,"results","animations","xAxis","yAxis","showXAxisLabel","showYAxisLabel","legend","showDataLabel","rotateXAxisTicks","yAxisLabel","customColors"],[3,"selected"],[3,"click","selected"]],template:function(e,a){if(e&1&&(h(0,"stock-price-movement-charts",3),u(1,ye,2,1,"ng-template",null,0,A),h(3,"container-card",4),u(4,we,2,2,"ng-template",null,1,A)(6,ke,3,2,"ng-template",null,2,A),h(8,"container-card",5)),e&2){let b=S(2),oe=S(5),re=S(7);m("expandWidget",!1),n(3),m("mainContentRef",b),n(5),m("mainContentRef",oe)("titleContentRef",re)}},dependencies:[R,G,P,$,q,j,B,U,O,H,K,Q,z,J,N,te,ee,ie],styles:[".chart-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}"]});let i=r;return i})();export{at as PortfolioPriceInsightsComponent};
