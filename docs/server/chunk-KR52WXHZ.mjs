import './polyfills.server.mjs';
import{a as me}from"./chunk-SZSO6RRK.mjs";import{f as ee,g as te,i as ie,m as ae}from"./chunk-RB4SQSSO.mjs";import{a as b}from"./chunk-LIXPJYNF.mjs";import{a as K,b as $,c as z,d as Z}from"./chunk-BQ7K5W33.mjs";import{a as se,b as le}from"./chunk-AGRCXGH2.mjs";import{a as G,b as H}from"./chunk-5VKVYCBP.mjs";import{m as q,n as J,o as j,u as x,v as oe,x as re}from"./chunk-PS5NKWHF.mjs";import{Q as U,R as Y,T as ne}from"./chunk-BOYX4EOR.mjs";import{$a as r,Bb as N,Db as A,Eb as R,Fb as V,Gb as M,La as y,Qa as c,T as C,Va as g,Z as _,_ as v,_a as o,ab as p,eb as I,hb as k,hc as L,jb as m,lc as X,mc as O,nc as F,ob as S,pb as w,qb as T,tb as E,ub as l,vb as D,wa as n,wb as P,xa as h,xb as B,zb as f}from"./chunk-IN6CXG4C.mjs";var ue=["miniChartWidget"],pe=(()=>{class t{constructor(e){this.tradingviewService=e,this.width="100%",this.height=200,this.range="12M",this.theme="light"}ngAfterViewInit(){this.params={symbol:this.symbol,dateRange:this.range,width:this.width,height:this.height,colorTheme:this.theme,autosize:!0,trendLineColor:"rgba(41, 98, 255, 1)",underLineColor:"rgba(41, 98, 255, 0.3)",underLineBottomColor:"rgba(41, 98, 255, 0)",isTransparent:!0,locale:"en"},this.params=JSON.stringify(this.params);let e=this.tradingviewService.miniChartWidget(this.params);this.miniChartWidget.nativeElement.appendChild(e)}static{this.\u0275fac=function(i){return new(i||t)(h(b))}}static{this.\u0275cmp=C({type:t,selectors:[["tv-mini-chart-widget"]],viewQuery:function(i,a){if(i&1&&S(ue,5),i&2){let s;w(s=T())&&(a.miniChartWidget=s.first)}},inputs:{symbol:"symbol",width:"width",height:"height",range:"range",theme:"theme"},standalone:!0,features:[f],decls:2,vars:0,consts:[["miniChartWidget",""]],template:function(i,a){i&1&&p(0,"div",null,0)},encapsulation:2})}}return t})();var Ce=["marketQuotesWidget"],de=(()=>{class t{constructor(e){this.tradingviewService=e}ngAfterViewInit(){let e;this.stockNames?e=[{name:"Portfolio",symbols:this.stockNames}]:e=[{name:"Indices",originalName:"Indices",symbols:[{name:"FOREXCOM:SPXUSD",displayName:"S&P 500 Index"},{name:"NASDAQ:NDX",displayName:"NADAQ 100"},{name:"FOREXCOM:DJI",displayName:"Dow Jones Industrial Average Index"},{name:"INDEX:NKY",displayName:"Nikkei 225"},{name:"FOREXCOM:UKXGBP",displayName:"FTSE 100 Index"}]},{name:"Futures",originalName:"Futures",symbols:[{name:"CME_MINI:ES1!",displayName:"S&P 500"},{name:"CME:6E1!",displayName:"Euro"},{name:"CME:BTC1!",displayName:"Bitcoin"},{name:"COMEX:GC1!",displayName:"Gold"},{name:"NYMEX:CL1!",displayName:"WTI Crude Oil"},{name:"NYMEX:NG1!",displayName:"Gas"},{name:"CBOT:ZC1!",displayName:"Corn"}]},{name:"Bonds",originalName:"Bonds",symbols:[{name:"CBOT:ZB1!",displayName:"T-Bond"},{name:"CBOT:UB1!",displayName:"Ultra T-Bond"},{name:"TVC:US01Y",displayName:"US GOV Bonds 1Year Yield"},{name:"TVC:US02Y",displayName:"US GOV Bonds 2Year Yield"},{name:"TVC:US05Y",displayName:"US GOV Bonds 5Year Yield"},{name:"TVC:US10Y",displayName:"US GOV Bonds 10Year Yield"}]}],this.params={width:"100%",height:this.height||21*35+100,symbolsGroups:e,showSymbolLogo:!0,isTransparent:!1,colorTheme:"light",locale:"en"},this.params=JSON.stringify(this.params);let i=this.tradingviewService.marketQuotesWidget(this.params);this.marketQuotesWidget.nativeElement.append(i)}static{this.\u0275fac=function(i){return new(i||t)(h(b))}}static{this.\u0275cmp=C({type:t,selectors:[["tv-market-quotes-widget"]],viewQuery:function(i,a){if(i&1&&S(Ce,5),i&2){let s;w(s=T())&&(a.marketQuotesWidget=s.first)}},inputs:{stockNames:"stockNames",height:"height"},standalone:!0,features:[f],decls:2,vars:0,consts:[["marketQuotesWidget",""]],template:function(i,a){i&1&&p(0,"div",null,0)},encapsulation:2})}}return t})();var fe=["tickersWidget"],Ie=(()=>{class t{constructor(e){this.tradingviewService=e,this.theme="light",this.displayMode="adaptive"}ngAfterViewInit(){this.symbols||(this.symbols=[{title:"S&P 500 Index",proName:"FOREXCOM:SPXUSD"},{title:"Nasdaq 100",proName:"NASDAQ:NDX"},{title:"Dow Jones Industrial",proName:"DJI"},{title:"Bitcoin",proName:"BITSTAMP:BTCUSD"},{title:"Ethereum",proName:"BITSTAMP:ETHUSD"},{title:"Dogecoin",proName:"BINANCE:DOGEUSD"},{title:"USD/RMB",proName:"FX:USDCNH"},{title:"USD/JPY",proName:"FX:USDJPY"},{title:"EUR/USD",proName:"FX:EURUSD"}]),this.params={symbols:this.symbols,displayMode:this.displayMode,colorTheme:this.theme,isTransparent:!1,showSymbolLogo:!0,locale:"en"},this.params=JSON.stringify(this.params);let e=this.tradingviewService.tickersWidget(this.params,this.tape);this.tickersWidget.nativeElement.appendChild(e);try{let i=this.tickersWidget.nativeElement.children[1];this.tickersWidget.nativeElement.removeChild(i)}catch{}}static{this.\u0275fac=function(i){return new(i||t)(h(b))}}static{this.\u0275cmp=C({type:t,selectors:[["tv-tickers-widget"]],viewQuery:function(i,a){if(i&1&&S(fe,5),i&2){let s;w(s=T())&&(a.tickersWidget=s.first)}},inputs:{symbols:"symbols",tape:"tape",theme:"theme",displayMode:"displayMode"},standalone:!0,features:[f],decls:2,vars:0,consts:[["tickersWidget",""]],template:function(i,a){i&1&&p(0,"div",null,0)},encapsulation:2})}}return t})();var Q=t=>({color:t});function xe(t,d){if(t&1){let e=I();o(0,"div",6)(1,"mat-chip-listbox")(2,"mat-chip-option",7),k("click",function(){_(e);let a=m();return v(a.displayChart(1))}),l(3,"Price Changes"),r(),o(4,"mat-chip-option",8),k("click",function(){_(e);let a=m();return v(a.displayChart(2))}),l(5,"Beta"),r(),o(6,"mat-chip-option",8),k("click",function(){_(e);let a=m();return v(a.displayChart(3))}),l(7,"VIX"),r()()()}}function _e(t,d){if(t&1&&(o(0,"div",6)(1,"span"),l(2,"Regular Market "),r(),o(3,"mat-icon"),l(4,"schedule"),r(),o(5,"span",10),l(6),A(7,"currency"),r(),o(8,"span",10),l(9),A(10,"percent"),r()()),t&2){let e=m(3);n(5),c("ngStyle",N(9,Q,e.getDayPriceChangeColor())),n(),P(" ",R(7,4,e.priceChange)," "),n(2),c("ngStyle",N(11,Q,e.getDayPriceChangeColor())),n(),P(" (",V(10,6,e.priceChange/e.portfolioMarketValue,".4"),") ")}}function ve(t,d){if(t&1&&(o(0,"div",6)(1,"span"),l(2),r(),o(3,"mat-icon"),l(4),r(),o(5,"span",10),l(6),A(7,"currency"),r(),o(8,"span",10),l(9),A(10,"percent"),r()()),t&2){let e=m(3);n(2),D(e.prePostHourText),n(2),D(e.prePostHourIcon),n(),c("ngStyle",N(11,Q,e.getPrePostPriceChangeColor())),n(),P(" ",R(7,6,e.prePostPriceChange)," "),n(2),c("ngStyle",N(13,Q,e.getPrePostPriceChangeColor())),n(),P(" (",V(10,8,e.prePostPriceChange/e.portfolioMarketValue,".4"),") ")}}function ye(t,d){if(t&1){let e=I();o(0,"mat-slide-toggle",11),k("toggleChange",function(){_(e);let a=m(3);return v(a.changeChart())}),o(1,"span"),l(2),r()()}if(t&2){let e=m(3);n(2),D(e.chartConfigs.preMarket.toggleText)}}function ke(t,d){if(t&1){let e=I();o(0,"mat-slide-toggle",11),k("toggleChange",function(){_(e);let a=m(3);return v(a.changeChart())}),o(1,"span"),l(2),r()()}if(t&2){let e=m(3);n(2),D(e.chartConfigs.postMarket.toggleText)}}function Se(t,d){if(t&1&&(o(0,"div",9),y(1,_e,11,13,"div",6)(2,ve,11,15,"div",6)(3,ye,3,1,"mat-slide-toggle")(4,ke,3,1,"mat-slide-toggle"),r()),t&2){let e=m(2);n(),g(e.prefix.startsWith("pre")?-1:1),n(),g(e.prefix.startsWith("regular")?-1:2),n(),g(e.prefix.startsWith("pre")?3:-1),n(),g(e.prefix.startsWith("post")?4:-1)}}function we(t,d){if(t&1&&y(0,Se,5,4,"div",9),t&2){let e=m();g(e.marketState!=="CLOSED"?0:-1)}}function Te(t,d){if(t&1&&(p(0,"tv-mini-chart-widget",18)(1,"mat-divider",19),o(2,"span"),l(3),r(),o(4,"span"),l(5),r()),t&2){let e=d.model,i=m(3);c("symbol",e.name)("theme","dark"),n(3),B("",i.chartConfigs[i.prefix].text," : ",e.name," "),n(2),P("",e.value.toFixed(2),"%")}}function Pe(t,d){if(t&1&&(o(0,"div",6)(1,"div",15)(2,"ngx-charts-bar-vertical",16),y(3,Te,6,5,"ng-template",null,4,M),r()(),o(5,"div",15),p(6,"ngx-charts-bar-vertical-stacked",17),r()()),t&2){let e=m(2);n(2),c("results",e.priceChangeChartData)("xAxis",!0)("yAxis",!0)("showXAxisLabel",!0)("showYAxisLabel",!0)("rotateXAxisTicks",!0)("animations",!0)("showDataLabel",!0)("yAxisLabel","Price Change %")("customColors",e.getPriceChangeChartColor)("roundEdges",!1),n(4),c("scheme",e.priceRangeColorScheme)("results",e.priceRangeChartData)("xAxis",!0)("yAxis",!0)("showXAxisLabel",!0)("showYAxisLabel",!0)("rotateXAxisTicks",!0)("animations",!0)("yAxisLabel","Market Day Price Range $")}}function Me(t,d){if(t&1&&(o(0,"div",6)(1,"div",15),p(2,"ngx-charts-bar-vertical",20),r()()),t&2){let e=m(2);n(2),c("results",e.betaChartData)("xAxis",!0)("yAxis",!0)("showXAxisLabel",!0)("showYAxisLabel",!0)("rotateXAxisTicks",!0)("animations",!0)("yAxisLabel","Beta")("roundEdges",!1)("customColors",e.getBetaColor)}}function be(t,d){t&1&&p(0,"tv-symbol-overview-widget",12),t&2&&c("company","VIX Volatility")("symbol","VANTAGE:VIX")("timeFrame","1m")}function Ee(t,d){if(t&1&&(y(0,Pe,7,20,"div",6)(1,Me,3,10,"div",6)(2,be,1,3,"tv-symbol-overview-widget",12),o(3,"mat-expansion-panel",13)(4,"mat-expansion-panel-header")(5,"mat-panel-title")(6,"mat-icon"),l(7,"price_change"),r(),o(8,"span"),l(9,"Market Quotes"),r()()(),p(10,"tv-market-quotes-widget"),r(),o(11,"mat-expansion-panel",13)(12,"mat-expansion-panel-header")(13,"mat-panel-title")(14,"mat-icon"),l(15,"price_change"),r(),o(16,"span"),l(17,"Portfolio Quotes"),r()()(),p(18,"tv-market-quotes-widget",14),r()),t&2){let e=m();g(e.selectedChart===1?0:-1),n(),g(e.selectedChart===2?1:-1),n(),g(e.selectedChart===3?2:-1),n(),c("expanded",e.expandWidget),n(8),c("expanded",!1),n(7),c("stockNames",e.stockNames)("height",e.stockNames.length*35+100)}}function De(t,d){t&1&&(o(0,"div",21)(1,"a",22)(2,"span",23),l(3,"Track all markets on TradingView"),r()()())}var nt=(()=>{class t{constructor(e,i){this.dataService=e,this.helper=i,this.showTickers=!0,this.priceChange=0,this.prePostPriceChange=0,this.priceChangeChartData=[],this.priceRangeChartData=[],this.betaChartData=[],this.stockNames=[],this.priceRangeColorScheme={domain:["steelblue","skyblue"]},this.betaColorScheme={domain:["slategrey"]},this.scaleType=ee,this.selectedChart=1,this.toggleChecked=!1,this.portfolioMarketValue=0,this.chartConfigs={preMarket:{text:"Pre Market",toggleText:"Pre Market Chart",priceChange:"preMarketChange",priceChangePercent:"preMarketChangePercent"},postMarket:{text:"Post Market",toggleText:"Post Market Chart",priceChange:"postMarketChange",priceChangePercent:"postMarketChangePercent"},regularMarket:{text:"Regular Market"}},this.marketState="",this.getPriceChangeChartColor=a=>{let s=this.toggleChecked?this.chartConfigs[this.prefix]?.priceChangePercent:"regularMarketChangePercent";return this.dataService.getTickerData(a)[s].raw>0?x.Gain:x.Lost},this.getBetaColor=a=>(this.dataService.getTickerData(a).beta?.raw||0)>1?"chocolate":"slategrey"}ngOnInit(){this.marketState=this.dataService.marketState,this.prefix=this.helper.getPriceKeyPrefix(),this.portfolioMarketValue=this.dataService.portfolioHoldings.marketValue,this.prePostHourIcon=this.prefix.startsWith("pre")?"sunny":"bedtime",this.prePostHourText=this.prefix.startsWith("pre")?"Pre Market ":"Post Market ",this.dataService.portfolioSymbols.forEach(e=>{let i=this.dataService.getTickerHolding(e),a=this.dataService.getTickerData(e);if(this.stockNames.push({name:a.symbol,displayName:`${a.symbol} - ${a.longName}`}),this.priceChange+=a.regularMarketChange.raw*i.shares,this.priceChangeChartData.push({name:a.symbol,value:a.regularMarketChangePercent.raw*100}),this.priceChangeChartData.sort((s,u)=>s.value-u.value),this.priceRangeChartData.push({name:a.symbol,series:[{name:"Price -> Day Low Range",value:a.regularMarketPrice.raw-a.regularMarketDayLow.raw},{name:"Price -> Day High Range",value:a.regularMarketDayHigh.raw-a.regularMarketPrice.raw}]}),this.priceRangeChartData.sort((s,u)=>s.series[0].value+s.series[1].value-(u.series[0].value+u.series[1].value)),!this.prefix.startsWith("regular")){let s=this.chartConfigs[this.prefix].priceChange;a[s]&&(this.prePostPriceChange+=a[s].raw*i.shares)}a.quoteType==="EQUITY"&&a.beta.raw&&this.betaChartData.push({name:a.symbol,value:a.beta.raw||0})}),this.stockNames.sort((e,i)=>{let a=this.dataService.portfolioData[e.name].regularMarketChangePercent.raw,s=this.dataService.portfolioData[i.name].regularMarketChangePercent.raw;return a-s}),this.betaChartData.sort((e,i)=>e.value-i.value)}getDayPriceChangeColor(){return this.priceChange>0?x.Gain:x.Lost}getPrePostPriceChangeColor(){return this.prePostPriceChange>0?x.Gain:x.Lost}displayChart(e){this.selectedChart=e}changeChart(){this.toggleChecked=!this.toggleChecked;let e=this.toggleChecked?this.prefix+"ChangePercent":"regularMarketChangePercent";this.priceChangeChartData=[],this.dataService.portfolioSymbols?.forEach(i=>{let a=this.dataService.getTickerData(i);a[e].raw&&this.priceChangeChartData.push({name:a.symbol,value:a[e].raw*100})}),this.priceChangeChartData.sort((i,a)=>i.value-a.value)}static{this.\u0275fac=function(i){return new(i||t)(h(ne),h(oe))}}static{this.\u0275cmp=C({type:t,selectors:[["portfolio-quotes"]],inputs:{showTickers:"showTickers",expandWidget:"expandWidget"},standalone:!0,features:[f],decls:9,vars:4,consts:[["titleContentRef",""],["subtitleContentRef",""],["ValueChangeRef",""],["quotesFooterRef",""],["tooltipTemplate",""],["title","Quotes",3,"titleContentRef","subtitleContentRef","mainContentRef","footerContentRef"],[1,"add-flex"],["selected","",3,"click"],[3,"click"],[1,"subcontent-wrapper"],[3,"ngStyle"],[3,"toggleChange"],[3,"company","symbol","timeFrame"],[3,"expanded"],[3,"stockNames","height"],[1,"chart-container"],[3,"results","xAxis","yAxis","showXAxisLabel","showYAxisLabel","rotateXAxisTicks","animations","showDataLabel","yAxisLabel","customColors","roundEdges"],[3,"scheme","results","xAxis","yAxis","showXAxisLabel","showYAxisLabel","rotateXAxisTicks","animations","yAxisLabel"],[3,"symbol","theme"],[2,"margin","none","border-top-color","slategrey"],[3,"results","xAxis","yAxis","showXAxisLabel","showYAxisLabel","rotateXAxisTicks","animations","yAxisLabel","roundEdges","customColors"],[1,"tradingview-widget-copyright"],["href","https://www.tradingview.com/markets/#indices","rel","noopener nofollow","target","_blank"],[1,"blue-text"]],template:function(i,a){if(i&1&&(y(0,xe,8,0,"ng-template",null,0,M)(2,we,1,1,"ng-template",null,1,M)(4,Ee,19,7,"ng-template",null,2,M)(6,De,4,0,"ng-template",null,3,M),p(8,"container-card",5)),i&2){let s=E(1),u=E(3),he=E(5),ge=E(7);n(8),c("titleContentRef",s)("subtitleContentRef",u)("mainContentRef",he)("footerContentRef",a.expandWidget||a.selectedChart===3?ge:void 0)}},dependencies:[F,L,X,O,re,j,J,q,Y,U,Z,K,$,z,H,G,le,se,ae,te,ie,de,pe,me],styles:[".subcontent-wrapper[_ngcontent-%COMP%]{display:flex;align-content:center!important;align-items:center;margin-top:.5rem;font-size:1.25rem}.subcontent-wrapper[_ngcontent-%COMP%]   .add-flex[_ngcontent-%COMP%]{margin-right:1rem}  .mat-expansion-panel{border-radius:0!important}  .mat-expansion-panel-body{padding:0!important}"]})}}return t})();export{Ie as a,nt as b};
